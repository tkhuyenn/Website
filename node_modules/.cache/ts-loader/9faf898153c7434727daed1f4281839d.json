{"remainingRequest":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\babel-loader\\lib\\index.js!D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\ts-loader\\index.js??ref--15-2!D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\NEU\\CDTT\\frontend\\Website\\src\\mixins\\onchain.ts","dependencies":[{"path":"D:\\NEU\\CDTT\\frontend\\Website\\src\\mixins\\onchain.ts","mtime":1660970150807},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\babel.config.js","mtime":1660970148265},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660970364629},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\babel-loader\\lib\\index.js","mtime":1660970387821},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\ts-loader\\index.js","mtime":1660970390648},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\eslint-loader\\index.js","mtime":1660970366946}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJEOlxcTkVVXFxDRFRUXFxmcm9udGVuZFxcV2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcZGVmaW5lUHJvcGVydHkuanMiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJEOlxcTkVVXFxDRFRUXFxmcm9udGVuZFxcV2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJEOlxcTkVVXFxDRFRUXFxmcm9udGVuZFxcV2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiRDpcXE5FVVxcQ0RUVFxcZnJvbnRlbmRcXFdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXGNsYXNzQ2FsbENoZWNrLmpzIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJEOlxcTkVVXFxDRFRUXFxmcm9udGVuZFxcV2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcY3JlYXRlQ2xhc3MuanMiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIkQ6XFxORVVcXENEVFRcXGZyb250ZW5kXFxXZWJzaXRlXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxpbmhlcml0cy5qcyI7CmltcG9ydCBfY3JlYXRlU3VwZXIgZnJvbSAiRDpcXE5FVVxcQ0RUVFxcZnJvbnRlbmRcXFdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXGNyZWF0ZVN1cGVyLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSAidHNsaWIiOwppbXBvcnQgeyBDb21wb25lbnQsIE1peGlucyB9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InOwppbXBvcnQgUG9wdXBNaXhpbiBmcm9tICdAL21peGlucy9wb3B1cCc7CmltcG9ydCB7IG5hbWVzcGFjZSB9IGZyb20gJ3Z1ZXgtY2xhc3MnOwp2YXIgYmNBdXRoID0gbmFtZXNwYWNlKCdiZUF1dGgnKTsKdmFyIGJjTmZ0ID0gbmFtZXNwYWNlKCdiY05mdCcpOwp2YXIgYmVCYXNlID0gbmFtZXNwYWNlKCdiZUJhc2UnKTsKaW1wb3J0IGdldFJlcG9zaXRvcnkgZnJvbSAnQC9zZXJ2aWNlcy9pbmRleCc7CnZhciBhcGlOZnQgPSBnZXRSZXBvc2l0b3J5KCduZnQnKTsKdmFyIGFwaU5mdFYyID0gZ2V0UmVwb3NpdG9yeSgnbmZ0djInKTsKdmFyIGFwaU5mdFYzID0gZ2V0UmVwb3NpdG9yeSgnbmZ0djMnKTsKaW1wb3J0IE1vcmFsaXMgZnJvbSAnbW9yYWxpcyc7CmltcG9ydCBDb29raWVzIGZyb20gJ2pzLWNvb2tpZSc7CmltcG9ydCBmaWx0ZXIgZnJvbSAnbG9kYXNoL2ZpbHRlcic7CmltcG9ydCBpbmNsdWRlcyBmcm9tICdsb2Rhc2gvaW5jbHVkZXMnOwppbXBvcnQgV2FsbGV0Q29ubmVjdFByb3ZpZGVyIGZyb20gJ0B3YWxsZXRjb25uZWN0L3dlYjMtcHJvdmlkZXInOwppbXBvcnQgV2ViMyBmcm9tICd3ZWIzJzsKCnZhciBPbkNoYWluTWl4aW4gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9NaXhpbnMpIHsKICBfaW5oZXJpdHMoT25DaGFpbk1peGluLCBfTWl4aW5zKTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihPbkNoYWluTWl4aW4pOwoKICBmdW5jdGlvbiBPbkNoYWluTWl4aW4oKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE9uQ2hhaW5NaXhpbik7CgogICAgX3RoaXMgPSBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIF90aGlzLmFkZHJlc3MgPSAnJzsKICAgIF90aGlzLnJlZkFwcHJvdmVBY2NvdW50ID0gbnVsbDsKICAgIF90aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgX3RoaXMuaXNPcGVuUG9wdXAgPSBmYWxzZTsKICAgIF90aGlzLmlzQ2xpY2tDb25maXJtID0gZmFsc2U7CiAgICBfdGhpcy5jaGFpSWQgPSAnJzsKICAgIF90aGlzLmNoZWNrZWRBY2NlcHQgPSBmYWxzZTsKICAgIHJldHVybiBfdGhpczsKICB9IC8vdGVybSBjYWMgcG9wdXAKCgogIF9jcmVhdGVDbGFzcyhPbkNoYWluTWl4aW4sIFt7CiAgICBrZXk6ICJnZXRUZXJtIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICBpZiAodGhpcy5zeXN0ZW1QYXJhbXNQdWJsaWMubGVuZ3RoKSB7CiAgICAgICAgdmFyIHBhcmFtID0gZmlsdGVyKHRoaXMuc3lzdGVtUGFyYW1zUHVibGljLCBmdW5jdGlvbiAocGFyYW0pIHsKICAgICAgICAgIHJldHVybiBwYXJhbS5rZXkgPT09ICdzeXN0ZW0ubWFya2V0cGxhY2UudGVybXMuYW5kLmNvbmRpdGlvbnMnOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiBwYXJhbVswXSAmJiBwYXJhbVswXS52YWx1ZSB8fCAnJzsKICAgICAgfQoKICAgICAgcmV0dXJuICcnOwogICAgfQogIH0sIHsKICAgIGtleTogImNvbnRyYWN0QWRkcmVzc0V4Y2hhbmdlIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGlmICghdGhpcy5pc0xvZ2luKSB7CiAgICAgICAgdmFyIGNvbnRyYWN0ID0gZmlsdGVyKHRoaXMubGlzdE5mdEFzc2V0T25DaGFpbiwgZnVuY3Rpb24gKGVsbSkgewogICAgICAgICAgcmV0dXJuIGVsbS50eXBlID09PSAnRVhDSEFOR0UnICYmIGVsbS5pc1N5c3RlbSAmJiBlbG0uYmFzZUN1cnJlbmN5ID09PSBfdGhpczIubmZ0SXRlbS5iYXNlQ3VycmVuY3k7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIGNvbnRyYWN0Lmxlbmd0aCA/IGNvbnRyYWN0WzBdLmNvbnRyYWN0QWRkcmVzcyA6ICcnOwogICAgICB9CgogICAgICByZXR1cm4gJyc7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0QWJpQ29kZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2dldEFiaUNvZGUgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoY3VycmVuY3ksIGFkZHJlc3NDb250cmFjdCkgewogICAgICAgIHZhciB0eXBlLCBjb250cmFjdEFkZHJlc3MsIHJlc3VsdEFiaSwgYWJpOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAwOwogICAgICAgICAgICAgICAgdHlwZSA9IGluY2x1ZGVzKFsnVVNEQycsICdVU0RUJywgJ0NMTScsICdMWU5LJywgJ0VUSCddLCBjdXJyZW5jeSkgPyAnRVRIJyA6ICdCTkInOwogICAgICAgICAgICAgICAgY29udHJhY3RBZGRyZXNzID0gYWRkcmVzc0NvbnRyYWN0ID8gYWRkcmVzc0NvbnRyYWN0IDogdGhpcy5nZXRDb250cmFjdEFkZHJlc3NUb0dldEFiaUNvZGUoY3VycmVuY3kpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gYXBpTmZ0LmdldEFiaUNvbnRyYWN0KHsKICAgICAgICAgICAgICAgICAgbW9kdWxlOiAnY29udHJhY3QnLAogICAgICAgICAgICAgICAgICBhY3Rpb246ICdnZXRhYmknLAogICAgICAgICAgICAgICAgICBhZGRyZXNzOiBjb250cmFjdEFkZHJlc3MsCiAgICAgICAgICAgICAgICAgIGFwaWtleTogJ0IxN1ZCTkJEQTRFTVVVVDYzSkI1SFQ5NzZXVVNDOFM1NUInCiAgICAgICAgICAgICAgICB9LCB0eXBlKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgcmVzdWx0QWJpID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIGFiaSA9IEpTT04ucGFyc2UocmVzdWx0QWJpKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVzb2x2ZShhYmkpKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLnJlamVjdChfY29udGV4dC50MCkpOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcywgW1swLCAxMF1dKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2V0QWJpQ29kZShfeCwgX3gyKSB7CiAgICAgICAgcmV0dXJuIF9nZXRBYmlDb2RlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBnZXRBYmlDb2RlOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiZ2V0QmFsYW5jZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2dldEJhbGFuY2UgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKGNvbnRyYWN0QWRkcmVzcywgY3VycmVuY3kpIHsKICAgICAgICB2YXIgbmV0d29ya05hbWUsIF9vcHRpb25zLCBiYWxhbmNlLCBvcHRpb25zLCByZXN1bHRBbGwsIHRva2VuLCBtZXNzYWdlOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAwOwogICAgICAgICAgICAgICAgbmV0d29ya05hbWUgPSBpbmNsdWRlcyhbJ1VTREMnLCAnVVNEVCcsICdDTE0nLCAnTFlOSycsICdFVEgnXSwgY3VycmVuY3kpID8gcHJvY2Vzcy5lbnYuVlVFX0FQUF9ORVRXT1JLX05BTUVfRVRIIDogcHJvY2Vzcy5lbnYuVlVFX0FQUF9ORVRXT1JLX05BTUVfQk5COwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIE1vcmFsaXMuZW5hYmxlV2ViMygpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBpZiAoIShjdXJyZW5jeSA9PT0gJ0VUSCcgfHwgY3VycmVuY3kgPT09ICdCTkInKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfb3B0aW9ucyA9IHsKICAgICAgICAgICAgICAgICAgY2hhaW46IG5ldHdvcmtOYW1lLAogICAgICAgICAgICAgICAgICBhZGRyZXNzOiB0aGlzLndhbGxldEFkZHJlc3MKICAgICAgICAgICAgICAgIH07IC8vQHRzLWlnbm9yZQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gODsKICAgICAgICAgICAgICAgIHJldHVybiBNb3JhbGlzLldlYjNBUEkuYWNjb3VudC5nZXROYXRpdmVCYWxhbmNlKF9vcHRpb25zKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgYmFsYW5jZSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVzb2x2ZShOdW1iZXIoTW9yYWxpcy5Vbml0cy5Gcm9tV2VpKGJhbGFuY2UuYmFsYW5jZSkpKSk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBvcHRpb25zID0gewogICAgICAgICAgICAgICAgICBjaGFpbjogbmV0d29ya05hbWUsCiAgICAgICAgICAgICAgICAgIGFkZHJlc3M6IHRoaXMud2FsbGV0QWRkcmVzcwogICAgICAgICAgICAgICAgfTsgLy9AdHMtaWdub3JlCgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMzsKICAgICAgICAgICAgICAgIHJldHVybiBNb3JhbGlzLldlYjNBUEkuYWNjb3VudC5nZXRUb2tlbkJhbGFuY2VzKG9wdGlvbnMpOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgcmVzdWx0QWxsID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICB0b2tlbiA9IGZpbHRlcihyZXN1bHRBbGwsIGZ1bmN0aW9uIChlbG0pIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsbS50b2tlbl9hZGRyZXNzID09PSBjb250cmFjdEFkZHJlc3MudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmICghdG9rZW4ubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLnJlc29sdmUoTnVtYmVyKHRva2VuWzBdLmJhbGFuY2UpIC8gTWF0aC5wb3coMTAsIE51bWJlcih0b2tlblswXS5kZWNpbWFscykpKSk7CgogICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgUHJvbWlzZS5yZXNvbHZlKDApKTsKCiAgICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMjA7CiAgICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oMCk7CgogICAgICAgICAgICAgICAgaWYgKF9jb250ZXh0Mi50MC5tZXNzYWdlID09PSAnTm9uIGV0aGVyZXVtIGVuYWJsZWQgYnJvd3NlcicpIHsKICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IHRoaXMuJHQoJ25vdGlmeS5pbnN0YWxsLW1ldGFtYXNrJyk7CiAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoewogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsCiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDUwMDAKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVqZWN0KF9jb250ZXh0Mi50MCkpOwoKICAgICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzLCBbWzAsIDIwXV0pOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBnZXRCYWxhbmNlKF94MywgX3g0KSB7CiAgICAgICAgcmV0dXJuIF9nZXRCYWxhbmNlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBnZXRCYWxhbmNlOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiYWN0aW9uV2hlbkxvZ2dlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2FjdGlvbldoZW5Mb2dnZWQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKGl0ZW1OZnQsIGNvbnRyYWN0QWRkcmVzcywgdHlwZSwgb3duZXJJZCkgewogICAgICAgIHZhciBpc0V4aXRzVG9rZW4sIGJhbGFuY2UsIHBhcmFtcywgaW5mb0FjdGl2aXR5LCBtZXNzYWdlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpc0V4aXRzVG9rZW4gPSBDb29raWVzLmdldCgnYWNjZXNzX3Rva2VuJykgfHwgJyc7IC8vbeG6oW5nIHJvcHN0ZW4KICAgICAgICAgICAgICAgIC8vIGlmICghaXNFeGl0c1Rva2VuKSB7CiAgICAgICAgICAgICAgICAvLyAgIGF3YWl0IHRoaXMuaGFuZGxlTG9naW5FeHRlcm5hbCgpCiAgICAgICAgICAgICAgICAvLyB9CgogICAgICAgICAgICAgICAgYmFsYW5jZSA9IDA7CgogICAgICAgICAgICAgICAgaWYgKCEodHlwZSA9PT0gJ2J1eScpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gODsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmFsYW5jZSh0aGlzLmdldENvbnRyYWN0QWRkcmVzc09mQ3VycmVuY3kodGhpcy5jdXJyZW5jeVNlbGVjdEJ1eSksIHRoaXMuY3VycmVuY3lTZWxlY3RCdXkpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBiYWxhbmNlID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDExOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRCYWxhbmNlKHRoaXMuZ2V0Q29udHJhY3RBZGRyZXNzT2ZDdXJyZW5jeSh0aGlzLnRva2VuTmVlZEdldEJhbGFuY2UpLCB0aGlzLnRva2VuTmVlZEdldEJhbGFuY2UpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgYmFsYW5jZSA9IF9jb250ZXh0My5zZW50OwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgcGFyYW1zID0gewogICAgICAgICAgICAgICAgICBsaXN0aW5nSWQ6IGl0ZW1OZnQgPT09IG51bGwgfHwgaXRlbU5mdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogaXRlbU5mdC5taW5MaXN0aW5nSWQsCiAgICAgICAgICAgICAgICAgIGl0ZW1JZDogdHlwZSA9PT0gJ29mZmVyJyA/IGl0ZW1OZnQuaWQgOiBudWxsLAogICAgICAgICAgICAgICAgICBvd25lcklkOiB0eXBlID09PSAnb2ZmZXInID8gb3duZXJJZCA6IG51bGwKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgcmV0dXJuIGFwaU5mdC5nZXRMeW5rZXlJbmZvKGl0ZW1OZnQuY3VycmVuY3ksIHBhcmFtcyk7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICBpbmZvQWN0aXZpdHkgPSBfY29udGV4dDMuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoISh0eXBlICE9PSAnYnV5JyAmJiB0aGlzLiRyb3V0ZS5uYW1lICE9PSAnRGV0YWlsTmZ0SXRlbScgJiYgaW5mb0FjdGl2aXR5Lm15T2ZmZXJTdGF0dXMgIT09ICdTVUNDRVNTJyAmJiBpbmZvQWN0aXZpdHkubXlPZmZlclN0YXR1cyAhPT0gJ0ZBSUxFRCcgJiYgaW5mb0FjdGl2aXR5Lm15T2ZmZXJTdGF0dXMgIT09IG51bGwpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBpdGVtTmZ0Lml0ZW1OYW1lICsgJyAnICsgdGhpcy4kdCgnbm90aWZ5LnRyYW5zYWN0aW9uLWlzLXBlbmRpbmcnKTsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoewogICAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLAogICAgICAgICAgICAgICAgICBkdXJhdGlvbjogNTAwMAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDIxOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0SW5mb0FjdGl2aXR5KF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgaW5mb0FjdGl2aXR5KSwge30sIHsKICAgICAgICAgICAgICAgICAgYXZhaWxhYmxlOiBiYWxhbmNlCiAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2J1eScpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5zZXRPcGVuUG9wdXAoewogICAgICAgICAgICAgICAgICAgIHBvcHVwTmFtZTogJ3BvcHVwLWJ1eS1uZnQnLAogICAgICAgICAgICAgICAgICAgIGlzT3BlbjogdHJ1ZQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2JpZCcpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5zZXRPcGVuUG9wdXAoewogICAgICAgICAgICAgICAgICAgIHBvcHVwTmFtZTogJ3BvcHVwLXBsYWNlLWJpZCcsCiAgICAgICAgICAgICAgICAgICAgaXNPcGVuOiB0cnVlCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSAnb2ZmZXInKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuc2V0T3BlblBvcHVwKHsKICAgICAgICAgICAgICAgICAgICBwb3B1cE5hbWU6ICdwb3B1cC1tYWtlLW9mZmVyJywKICAgICAgICAgICAgICAgICAgICBpc09wZW46IHRydWUKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBhY3Rpb25XaGVuTG9nZ2VkKF94NSwgX3g2LCBfeDcsIF94OCkgewogICAgICAgIHJldHVybiBfYWN0aW9uV2hlbkxvZ2dlZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gYWN0aW9uV2hlbkxvZ2dlZDsKICAgIH0oKSAvLyBhc3luYyBoYW5kbGVMb2dpbkV4dGVybmFsKCk6IFByb21pc2U8dm9pZD4gewogICAgLy8gICB0cnkgewogICAgLy8gICAgIGNvbnN0IEtFWSA9IHByb2Nlc3MuZW52LlZVRV9BUFBfS0VZX0VYVEVSTkFMCiAgICAvLyAgICAgY29uc3QgY3JlZGVudGlhbCA9IHRoaXMuJG9wdGlvbnMuZmlsdGVycz8uZW5jcnlwdFBhc3N3b3JkKG1kNSh0aGlzLmFkZHJlc3MgKyBLRVkpKQogICAgLy8gICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFwaU5mdC5leHRlcm5hbExvZ2luKHsKICAgIC8vICAgICAgIHdhbGxldFR5cGU6ICdNRVRBTUFTSycsCiAgICAvLyAgICAgICBhZGRyZXNzOiB0aGlzLmFkZHJlc3MsCiAgICAvLyAgICAgICBjcmVkZW50aWFsCiAgICAvLyAgICAgfSkKICAgIC8vICAgICB0aGlzLnNldFRva2VuRXh0ZXJuYWxMb2dpbihyZXN1bHQpCiAgICAvLyAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpCiAgICAvLyAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAvLyAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCkKICAgIC8vICAgfQogICAgLy8gfQoKICB9LCB7CiAgICBrZXk6ICJnZXRDb250cmFjdEFkZHJlc3NUb0dldEFiaUNvZGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldENvbnRyYWN0QWRkcmVzc1RvR2V0QWJpQ29kZShjdXJyZW5jeSkgewogICAgICBpZiAodGhpcy5saXN0QXNzZXROZXR3b3JrLmxlbmd0aCkgewogICAgICAgIHZhciB0b2tlbiA9IGZpbHRlcih0aGlzLmxpc3RBc3NldE5ldHdvcmssIGZ1bmN0aW9uICh0b2tlbikgewogICAgICAgICAgcmV0dXJuIHRva2VuLmN1cnJlbmN5ID09PSBjdXJyZW5jeTsKICAgICAgICB9KVswXTsKCiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0b2tlbiwgJ2ltcGxlbWVudEFkZHJlc3MnKSkgewogICAgICAgICAgcmV0dXJuIHRva2VuLmltcGxlbWVudEFkZHJlc3M7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gKHRva2VuID09PSBudWxsIHx8IHRva2VuID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0b2tlbi5jb250cmFjdEFkZHJlc3MpIHx8ICcnOwogICAgICB9CgogICAgICByZXR1cm4gJyc7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0Q29udHJhY3RBZGRyZXNzT2ZDdXJyZW5jeSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q29udHJhY3RBZGRyZXNzT2ZDdXJyZW5jeShjdXJyZW5jeSkgewogICAgICBpZiAodGhpcy5saXN0QXNzZXROZXR3b3JrLmxlbmd0aCkgewogICAgICAgIHZhciB0b2tlbiA9IGZpbHRlcih0aGlzLmxpc3RBc3NldE5ldHdvcmssIGZ1bmN0aW9uICh0b2tlbikgewogICAgICAgICAgcmV0dXJuIHRva2VuLmN1cnJlbmN5ID09PSBjdXJyZW5jeTsKICAgICAgICB9KVswXTsKICAgICAgICByZXR1cm4gKHRva2VuID09PSBudWxsIHx8IHRva2VuID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0b2tlbi5jb250cmFjdEFkZHJlc3MpIHx8ICcnOwogICAgICB9CgogICAgICByZXR1cm4gJyc7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0QWxsb3dhbmNlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0QWxsb3dhbmNlID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNChvd25lckFkZHJlc3MsIGN1cnJlbmN5KSB7CiAgICAgICAgdmFyIF9wYXJhbXMsIF90aGlzJCRvcHRpb25zJGZpbHRlciwgY29udHJhY3RBZGRyZXNzLCBhYmksIGZ1bmN0aW9uQWxsb3dhbmNlLCBuYW1lUGFyYW1zT3duZXIsIG5hbWVQYXJhbXNTcGVuZGVyLCBwYXJhbXMsIHJlYWRPcHRpb25zLCBhbGxvd2FuY2UsIGRlY2ltYWwsIGRhdGE7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDA7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gTW9yYWxpcy5lbmFibGVXZWIzKCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIGNvbnRyYWN0QWRkcmVzcyA9IHRoaXMuZ2V0Q29udHJhY3RBZGRyZXNzT2ZDdXJyZW5jeShjdXJyZW5jeSk7CiAgICAgICAgICAgICAgICBhYmkgPSBbXTsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEFiaUNvZGUoY3VycmVuY3kpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBhYmkgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICAgIGZ1bmN0aW9uQWxsb3dhbmNlID0gZmlsdGVyKGFiaSwgZnVuY3Rpb24gKGVsbSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gZWxtLm5hbWUgPT09ICdhbGxvd2FuY2UnOwogICAgICAgICAgICAgICAgfSlbMF07CiAgICAgICAgICAgICAgICBuYW1lUGFyYW1zT3duZXIgPSBmdW5jdGlvbkFsbG93YW5jZS5pbnB1dHNbMF0ubmFtZTsKICAgICAgICAgICAgICAgIG5hbWVQYXJhbXNTcGVuZGVyID0gZnVuY3Rpb25BbGxvd2FuY2UuaW5wdXRzWzFdLm5hbWU7CiAgICAgICAgICAgICAgICBwYXJhbXMgPSAoX3BhcmFtcyA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX3BhcmFtcywgbmFtZVBhcmFtc093bmVyLCBvd25lckFkZHJlc3MpLCBfZGVmaW5lUHJvcGVydHkoX3BhcmFtcywgbmFtZVBhcmFtc1NwZW5kZXIsIHRoaXMuY29udHJhY3RBZGRyZXNzRXhjaGFuZ2UpLCBfcGFyYW1zKTsKICAgICAgICAgICAgICAgIHJlYWRPcHRpb25zID0gewogICAgICAgICAgICAgICAgICBjb250cmFjdEFkZHJlc3M6IGNvbnRyYWN0QWRkcmVzcywKICAgICAgICAgICAgICAgICAgZnVuY3Rpb25OYW1lOiAnYWxsb3dhbmNlJywKICAgICAgICAgICAgICAgICAgYWJpOiBhYmksCiAgICAgICAgICAgICAgICAgIHBhcmFtczogcGFyYW1zCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxNTsKICAgICAgICAgICAgICAgIHJldHVybiBNb3JhbGlzLmV4ZWN1dGVGdW5jdGlvbihyZWFkT3B0aW9ucyk7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICBhbGxvd2FuY2UgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICAgIGRlY2ltYWwgPSAoX3RoaXMkJG9wdGlvbnMkZmlsdGVyID0gdGhpcy4kb3B0aW9ucy5maWx0ZXJzKSA9PT0gbnVsbCB8fCBfdGhpcyQkb3B0aW9ucyRmaWx0ZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJCRvcHRpb25zJGZpbHRlci5nZXREZWNpbWFsc1Rva2VuKGN1cnJlbmN5KTsKICAgICAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgIGFsbG93YW5jZTogcGFyc2VJbnQoYWxsb3dhbmNlWydfaGV4J10sIDE2KSAvIE1hdGgucG93KDEwLCBkZWNpbWFsKSwKICAgICAgICAgICAgICAgICAgYWJpOiBhYmkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDIxOwogICAgICAgICAgICAgICAgX2NvbnRleHQ0LnQwID0gX2NvbnRleHQ0WyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVqZWN0KF9jb250ZXh0NC50MCkpOwoKICAgICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0LCB0aGlzLCBbWzAsIDIxXV0pOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBnZXRBbGxvd2FuY2UoX3g5LCBfeDEwKSB7CiAgICAgICAgcmV0dXJuIF9nZXRBbGxvd2FuY2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGdldEFsbG93YW5jZTsKICAgIH0oKQogIH0sIHsKICAgIGtleTogInNldEFwcHJvdmFsRm9yQWxsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfc2V0QXBwcm92YWxGb3JBbGwgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KGNvbnRyYWN0QWRkcmVzcywgc3BlbmRlcldhbGxldCwgY3VycmVuY3kpIHsKICAgICAgICB2YXIgYWJpLCBwYXJhbXMsIHJlYWRPcHRpb25zLCB0cmFuc2FjdGlvbjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ1LnByZXYgPSAwOwogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIE1vcmFsaXMuZW5hYmxlV2ViMygpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc2V0QXBwcm92YWxGb3JBbGwnKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEFiaUNvZGUoY3VycmVuY3ksIGNvbnRyYWN0QWRkcmVzcyk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIGFiaSA9IF9jb250ZXh0NS5zZW50OwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coYWJpKTsKICAgICAgICAgICAgICAgIHBhcmFtcyA9IHsKICAgICAgICAgICAgICAgICAgb3BlcmF0b3JzOiBbc3BlbmRlcldhbGxldCwgdGhpcy5jb250cmFjdEFkZHJlc3NFeGNoYW5nZV0sCiAgICAgICAgICAgICAgICAgIGFwcHJvdmVkOiB0cnVlCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgcmVhZE9wdGlvbnMgPSB7CiAgICAgICAgICAgICAgICAgIGNvbnRyYWN0QWRkcmVzczogY29udHJhY3RBZGRyZXNzLAogICAgICAgICAgICAgICAgICBmdW5jdGlvbk5hbWU6ICdzZXRCYXRjaEFwcHJvdmFsRm9yQWxsJywKICAgICAgICAgICAgICAgICAgYWJpOiBhYmksCiAgICAgICAgICAgICAgICAgIHBhcmFtczogcGFyYW1zCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVhZE9wdGlvbnMpOwogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxMzsKICAgICAgICAgICAgICAgIHJldHVybiBNb3JhbGlzLmV4ZWN1dGVGdW5jdGlvbihyZWFkT3B0aW9ucyk7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbiA9IF9jb250ZXh0NS5zZW50OwogICAgICAgICAgICAgICAgdGhpcy5pc0NsaWNrQ29uZmlybSA9IHRydWU7CiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXR1c0FscmVhZHlBcHByb3ZlKHRydWUpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVzb2x2ZSh0cmFuc2FjdGlvbikpOwoKICAgICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgICAgX2NvbnRleHQ1LnByZXYgPSAxOTsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS50MCA9IF9jb250ZXh0NVsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfY29udGV4dDUudDApOwoKICAgICAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1LCB0aGlzLCBbWzAsIDE5XV0pOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBzZXRBcHByb3ZhbEZvckFsbChfeDExLCBfeDEyLCBfeDEzKSB7CiAgICAgICAgcmV0dXJuIF9zZXRBcHByb3ZhbEZvckFsbC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gc2V0QXBwcm92YWxGb3JBbGw7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJwdXRPblNhbGVPbkNoYWluIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcHV0T25TYWxlT25DaGFpbiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoYm9keSwgY29udHJhY3RBZGRyZXNzLCBzcGVuZGVyV2FsbGV0LCBwb3B1cE5hbWUsIGN1cnJlbmN5KSB7CiAgICAgICAgdmFyIHRyYW5zYWN0aW9uLCBlbWl0VmFsdWU7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5wcmV2ID0gMDsKCiAgICAgICAgICAgICAgICBpZiAoISh0aGlzLnN0YXR1c0FwcHJvdmVBY2NvdW50ID09PSAnTk9ORScgfHwgdGhpcy5zdGF0dXNBcHByb3ZlQWNjb3VudCA9PT0gJ0ZBSUxFRCcpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0QXBwcm92YWxGb3JBbGwoY29udHJhY3RBZGRyZXNzLCBzcGVuZGVyV2FsbGV0LCBjdXJyZW5jeSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uID0gX2NvbnRleHQ2LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gYXBpTmZ0LnZhbGlkYXRlQXBwcm92ZSh7fSwgewogICAgICAgICAgICAgICAgICBoYXNoOiB0cmFuc2FjdGlvbi5oYXNoLAogICAgICAgICAgICAgICAgICBpdGVtSWQ6IGJvZHkuaXRlbUlkCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgaWYgKCEodGhpcy5zdGF0dXNBcHByb3ZlQWNjb3VudCA9PT0gJ1NVQ0NFU1MnKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgcmV0dXJuIGFwaU5mdFYzLmZpeGVkUHJpY2UoYm9keSk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5zZXRPcGVuUG9wdXAoewogICAgICAgICAgICAgICAgICBwb3B1cE5hbWU6IHBvcHVwTmFtZSwKICAgICAgICAgICAgICAgICAgaXNPcGVuOiBmYWxzZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBlbWl0VmFsdWUgPSBwb3B1cE5hbWUgPT09ICdwb3B1cC1maXhlZC1wcmljZScgPyAncHV0LWZpeGVkJyA6IHBvcHVwTmFtZSA9PT0gJ3BvcHVwLW9wZW4tZm9yLWJpZHMnID8gJ3B1dC1vcGVuJyA6ICdwdXQtdGltZSc7CiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdzdWNjZXNzJywgZW1pdFZhbHVlKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLnJlc29sdmUoKSk7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDIxOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgICBfY29udGV4dDYucHJldiA9IDE3OwogICAgICAgICAgICAgICAgX2NvbnRleHQ2LnQwID0gX2NvbnRleHQ2WyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coX2NvbnRleHQ2LnQwKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLnJlamVjdChfY29udGV4dDYudDApKTsKCiAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNiwgdGhpcywgW1swLCAxN11dKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gcHV0T25TYWxlT25DaGFpbihfeDE0LCBfeDE1LCBfeDE2LCBfeDE3LCBfeDE4KSB7CiAgICAgICAgcmV0dXJuIF9wdXRPblNhbGVPbkNoYWluLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBwdXRPblNhbGVPbkNoYWluOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiYWNjZXB0T2ZmZXJPbmNoYWluIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfYWNjZXB0T2ZmZXJPbmNoYWluID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNyhib2R5LCBjb250cmFjdEFkZHJlc3MsIHNwZW5kZXJXYWxsZXQsIHBvcHVwTmFtZSwgY3VycmVuY3ksIGl0ZW1JZCkgewogICAgICAgIHZhciB0cmFuc2FjdGlvbjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTckKF9jb250ZXh0NykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDcucHJldiA9IF9jb250ZXh0Ny5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ3LnByZXYgPSAwOwoKICAgICAgICAgICAgICAgIGlmICghKHRoaXMuc3RhdHVzQXBwcm92ZUFjY291bnQgPT09ICdOT05FJyB8fCB0aGlzLnN0YXR1c0FwcHJvdmVBY2NvdW50ID09PSAnRkFJTEVEJykpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRBcHByb3ZhbEZvckFsbChjb250cmFjdEFkZHJlc3MsIHNwZW5kZXJXYWxsZXQsIGN1cnJlbmN5KTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24gPSBfY29udGV4dDcuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiBhcGlOZnQudmFsaWRhdGVBcHByb3ZlKHt9LCB7CiAgICAgICAgICAgICAgICAgIGhhc2g6IHRyYW5zYWN0aW9uLmhhc2gsCiAgICAgICAgICAgICAgICAgIGl0ZW1JZDogaXRlbUlkCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgaWYgKCEodGhpcy5zdGF0dXNBcHByb3ZlQWNjb3VudCA9PT0gJ1NVQ0NFU1MnKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgcmV0dXJuIGFwaU5mdFYzLnBvc3RBY2NlcHRPZmZlcihib2R5KTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLnNldE9wZW5Qb3B1cCh7CiAgICAgICAgICAgICAgICAgIHBvcHVwTmFtZTogcG9wdXBOYW1lLAogICAgICAgICAgICAgICAgICBpc09wZW46IGZhbHNlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRoaXMuc2V0VHlwZU9mQWN0aW9uKCdvZmZlci1hY2NlcHQnKTsKICAgICAgICAgICAgICAgIHRoaXMuc2V0T3BlblBvcHVwKHsKICAgICAgICAgICAgICAgICAgcG9wdXBOYW1lOiAncG9wdXAtbm90aWZ5LXN1Y2Nlc3MnLAogICAgICAgICAgICAgICAgICBpc09wZW46IHRydWUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAxOTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgX2NvbnRleHQ3LnByZXYgPSAxNjsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny50MCA9IF9jb250ZXh0N1siY2F0Y2giXSgwKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLnJlamVjdChfY29udGV4dDcudDApKTsKCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNywgdGhpcywgW1swLCAxNl1dKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gYWNjZXB0T2ZmZXJPbmNoYWluKF94MTksIF94MjAsIF94MjEsIF94MjIsIF94MjMsIF94MjQpIHsKICAgICAgICByZXR1cm4gX2FjY2VwdE9mZmVyT25jaGFpbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gYWNjZXB0T2ZmZXJPbmNoYWluOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiYXBwcm92ZUV4Y2hhbmdlU3BlbmRUb2tlbk9mVXNlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2FwcHJvdmVFeGNoYW5nZVNwZW5kVG9rZW5PZlVzZXIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KGN1cnJlbmN5LCBvbGRBbW91bnQsIGFtb3VudCwgdHlwZSkgewogICAgICAgIHZhciBfdGhpcyQkb3B0aW9ucyRmaWx0ZXIyLCBfcGFyYW1zMiwgcmVzdWx0LCBhbGxvd2FuY2UsIGFiaSwgZGVjaW1hbCwgZnVuY3Rpb25BcHByb3ZlLCBuYW1lUGFyYW1zU3BlbmRlciwgbmFtZVBhcmFtc0Ftb3VudCwgcGFyYW1zLCBjb250cmFjdEFkZHJlc3MsIHdyaXRlT3B0aW9ucywgdHJhbnNhY3Rpb247CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOCQoX2NvbnRleHQ4KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDgucHJldiA9IDA7CiAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRBbGxvd2FuY2UodGhpcy53YWxsZXRBZGRyZXNzLCBjdXJyZW5jeSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0OC5zZW50OwogICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1jb25zdAogICAgICAgICAgICAgICAgYWxsb3dhbmNlID0gcmVzdWx0LmFsbG93YW5jZSwgYWJpID0gcmVzdWx0LmFiaTsKCiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2JpZC1hZGQnIHx8IHR5cGUgPT09ICdvZmZlci1tYWtlJykgewogICAgICAgICAgICAgICAgICBhbGxvd2FuY2UgKz0gYW1vdW50OwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSAnYmlkLWVkaXQnIHx8IHR5cGUgPT09ICdvZmZlci1lZGl0JykgewogICAgICAgICAgICAgICAgICBhbGxvd2FuY2UgPSBhbGxvd2FuY2UgLSBvbGRBbW91bnQgKyBhbW91bnQ7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdiaWQtY2FuY2VsJyB8fCB0eXBlID09PSAnb2ZmZXItY2FuY2VsJykgewogICAgICAgICAgICAgICAgICBhbGxvd2FuY2UgLT0gYW1vdW50OwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdhbGxvd2FuY2UnLCBhbGxvd2FuY2UpOwogICAgICAgICAgICAgICAgZGVjaW1hbCA9IChfdGhpcyQkb3B0aW9ucyRmaWx0ZXIyID0gdGhpcy4kb3B0aW9ucy5maWx0ZXJzKSA9PT0gbnVsbCB8fCBfdGhpcyQkb3B0aW9ucyRmaWx0ZXIyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyQkb3B0aW9ucyRmaWx0ZXIyLmdldERlY2ltYWxzVG9rZW4oY3VycmVuY3kpOwogICAgICAgICAgICAgICAgZnVuY3Rpb25BcHByb3ZlID0gZmlsdGVyKGFiaSwgZnVuY3Rpb24gKGVsbSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gZWxtLm5hbWUgPT09ICdhcHByb3ZlJzsKICAgICAgICAgICAgICAgIH0pWzBdOwogICAgICAgICAgICAgICAgbmFtZVBhcmFtc1NwZW5kZXIgPSBmdW5jdGlvbkFwcHJvdmUuaW5wdXRzWzBdLm5hbWU7CiAgICAgICAgICAgICAgICBuYW1lUGFyYW1zQW1vdW50ID0gZnVuY3Rpb25BcHByb3ZlLmlucHV0c1sxXS5uYW1lOwogICAgICAgICAgICAgICAgcGFyYW1zID0gKF9wYXJhbXMyID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfcGFyYW1zMiwgbmFtZVBhcmFtc1NwZW5kZXIsIHRoaXMuY29udHJhY3RBZGRyZXNzRXhjaGFuZ2UpLCBfZGVmaW5lUHJvcGVydHkoX3BhcmFtczIsIG5hbWVQYXJhbXNBbW91bnQsIGN1cnJlbmN5ID09PSAnQk5CJyB8fCBjdXJyZW5jeSA9PT0gJ0JVU0QnID8gTWF0aC5mbG9vcihhbGxvd2FuY2UgKiBNYXRoLnBvdygxMCwgZGVjaW1hbCArIDEpIC8gMTApLnRvU3RyaW5nKCkgOiBNYXRoLmZsb29yKGFsbG93YW5jZSAqIE1hdGgucG93KDEwLCBkZWNpbWFsICsgMSkgLyAxMCkpLCBfcGFyYW1zMik7CiAgICAgICAgICAgICAgICBjb250cmFjdEFkZHJlc3MgPSB0aGlzLmdldENvbnRyYWN0QWRkcmVzc09mQ3VycmVuY3koY3VycmVuY3kpOwogICAgICAgICAgICAgICAgd3JpdGVPcHRpb25zID0gewogICAgICAgICAgICAgICAgICBjb250cmFjdEFkZHJlc3M6IGNvbnRyYWN0QWRkcmVzcywKICAgICAgICAgICAgICAgICAgZnVuY3Rpb25OYW1lOiAnYXBwcm92ZScsCiAgICAgICAgICAgICAgICAgIGFiaTogYWJpLAogICAgICAgICAgICAgICAgICBwYXJhbXM6IHBhcmFtcwogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd3cml0ZU9wdGlvbnMnLCB3cml0ZU9wdGlvbnMpOwogICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAxOTsKICAgICAgICAgICAgICAgIHJldHVybiBNb3JhbGlzLmV4ZWN1dGVGdW5jdGlvbih3cml0ZU9wdGlvbnMpOwoKICAgICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24gPSBfY29udGV4dDguc2VudDsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRyYW5zYWN0aW9uKTsKICAgICAgICAgICAgICAgIHRoaXMuc2V0VHJhbnNhY3Rpb25Db2RlSXRlbSh0cmFuc2FjdGlvbi5oYXNoKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLnJlc29sdmUodHJhbnNhY3Rpb24uaGFzaCkpOwoKICAgICAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgICAgICAgX2NvbnRleHQ4LnByZXYgPSAyNTsKICAgICAgICAgICAgICAgIF9jb250ZXh0OC50MCA9IF9jb250ZXh0OFsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLnJlamVjdChfY29udGV4dDgudDApKTsKCiAgICAgICAgICAgICAgY2FzZSAyODoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlOCwgdGhpcywgW1swLCAyNV1dKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gYXBwcm92ZUV4Y2hhbmdlU3BlbmRUb2tlbk9mVXNlcihfeDI1LCBfeDI2LCBfeDI3LCBfeDI4KSB7CiAgICAgICAgcmV0dXJuIF9hcHByb3ZlRXhjaGFuZ2VTcGVuZFRva2VuT2ZVc2VyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBhcHByb3ZlRXhjaGFuZ2VTcGVuZFRva2VuT2ZVc2VyOwogICAgfSgpCiAgfSwgewogICAga2V5OiAic3dpdGNoTmV0d29yayIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3N3aXRjaE5ldHdvcmsgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU5KGJhc2VDdXJyZW5jeSkgewogICAgICAgIHZhciBjaGFpbklkTmV0V29yaywgbmV0d29ya05hbWUsIG1lc3NhZ2UsIF9uZXR3b3JrTmFtZSwgX21lc3NhZ2U7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOSQoX2NvbnRleHQ5KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OS5wcmV2ID0gX2NvbnRleHQ5Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDkucHJldiA9IDA7CiAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gTW9yYWxpcy5lbmFibGVXZWIzKCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldENoYWluSWQoKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgY2hhaW5JZE5ldFdvcmsgPSBfY29udGV4dDkuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIShiYXNlQ3VycmVuY3kgPT09ICdFVEgnICYmIGNoYWluSWROZXRXb3JrICE9PSBwcm9jZXNzLmVudi5WVUVfQVBQX0NIQUlOX0VUSCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gY2hhaW5JZCA9IHByb2Nlc3MuZW52LlZVRV9BUFBfQ0hBSU5fRVRIIGFzIHN0cmluZwogICAgICAgICAgICAgICAgLy8gYXdhaXQgTW9yYWxpcy5zd2l0Y2hOZXR3b3JrKGNoYWluSWQpCiAgICAgICAgICAgICAgICAvLyByZXR1cm4KICAgICAgICAgICAgICAgIG5ldHdvcmtOYW1lID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9TV0lUQ0hfTkVUV09SS19OQU1FX0VUSDsKICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSB0aGlzLiR0KCdub3RpZnlfc3dpdGNoLW5ldHdvcmsnLCB7CiAgICAgICAgICAgICAgICAgIG5ldHdvcms6IG5ldHdvcmtOYW1lCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoewogICAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLAogICAgICAgICAgICAgICAgICBkdXJhdGlvbjogNTAwMAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LmFicnVwdCgicmV0dXJuIiwgUHJvbWlzZS5yZWplY3QoewogICAgICAgICAgICAgICAgICBjb2RlOiA1ODg4CiAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICBpZiAoIShiYXNlQ3VycmVuY3kgPT09ICdCTkInICYmIGNoYWluSWROZXRXb3JrICE9PSBwcm9jZXNzLmVudi5WVUVfQVBQX0NIQUlOX0JOQikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAxNjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gY2hhaW5JZCA9IHByb2Nlc3MuZW52LlZVRV9BUFBfQ0hBSU5fQk5CIGFzIHN0cmluZwogICAgICAgICAgICAgICAgLy8gYXdhaXQgTW9yYWxpcy5zd2l0Y2hOZXR3b3JrKGNoYWluSWQpCiAgICAgICAgICAgICAgICAvLyByZXR1cm4KICAgICAgICAgICAgICAgIF9uZXR3b3JrTmFtZSA9IHByb2Nlc3MuZW52LlZVRV9BUFBfU1dJVENIX05FVFdPUktfTkFNRV9CTkI7CiAgICAgICAgICAgICAgICBfbWVzc2FnZSA9IHRoaXMuJHQoJ25vdGlmeV9zd2l0Y2gtbmV0d29yaycsIHsKICAgICAgICAgICAgICAgICAgbmV0d29yazogX25ldHdvcmtOYW1lCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoewogICAgICAgICAgICAgICAgICBtZXNzYWdlOiBfbWVzc2FnZSwKICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDUwMDAKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVqZWN0KHsKICAgICAgICAgICAgICAgICAgY29kZTogNTg4OAogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVzb2x2ZSgpKTsKCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgIF9jb250ZXh0OS5wcmV2ID0gMTk7CiAgICAgICAgICAgICAgICBfY29udGV4dDkudDAgPSBfY29udGV4dDlbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfY29udGV4dDkudDApOyAvLyBpZiAoZXJyb3IuY29kZSA9PT0gNDkwMikgewogICAgICAgICAgICAgICAgLy8gICAvL0B0cy1pZ25vcmUKICAgICAgICAgICAgICAgIC8vICAgYXdhaXQgd2luZG93LmV0aGVyZXVtLnJlcXVlc3QoewogICAgICAgICAgICAgICAgLy8gICAgIG1ldGhvZDogJ3dhbGxldF9hZGRFdGhlcmV1bUNoYWluJywKICAgICAgICAgICAgICAgIC8vICAgICBwYXJhbXM6IFsKICAgICAgICAgICAgICAgIC8vICAgICAgIHsKICAgICAgICAgICAgICAgIC8vICAgICAgICAgY2hhaW5JZDogJzB4NjEnLAogICAgICAgICAgICAgICAgLy8gICAgICAgICBjaGFpbk5hbWU6ICdCaW5hbmNlIFNtYXJ0IENoYWluIFRlc3RuZXQnLAogICAgICAgICAgICAgICAgLy8gICAgICAgICBuYXRpdmVDdXJyZW5jeTogewogICAgICAgICAgICAgICAgLy8gICAgICAgICAgIG5hbWU6ICdCTkInLAogICAgICAgICAgICAgICAgLy8gICAgICAgICAgIHN5bWJvbDogJ0JOQicsCiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgZGVjaW1hbHM6IDE4CiAgICAgICAgICAgICAgICAvLyAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHJwY1VybHM6IFsnaHR0cHM6Ly9kYXRhLXNlZWQtcHJlYnNjLTEtczEuYmluYW5jZS5vcmc6ODU0NSddLAogICAgICAgICAgICAgICAgLy8gICAgICAgICBibG9ja0V4cGxvcmVyVXJsczogWydodHRwczovL3Rlc3RuZXQuYnNjc2Nhbi5jb20nXQogICAgICAgICAgICAgICAgLy8gICAgICAgfQogICAgICAgICAgICAgICAgLy8gICAgIF0KICAgICAgICAgICAgICAgIC8vICAgfSkKICAgICAgICAgICAgICAgIC8vICAgYXdhaXQgdGhpcy5zd2l0Y2hOZXR3b3JrKGJhc2VDdXJyZW5jeSkKICAgICAgICAgICAgICAgIC8vIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LmFicnVwdCgicmV0dXJuIiwgUHJvbWlzZS5yZWplY3QoX2NvbnRleHQ5LnQwKSk7CgogICAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTksIHRoaXMsIFtbMCwgMTldXSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHN3aXRjaE5ldHdvcmsoX3gyOSkgewogICAgICAgIHJldHVybiBfc3dpdGNoTmV0d29yay5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gc3dpdGNoTmV0d29yazsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImdldENoYWluSWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9nZXRDaGFpbklkID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTAoKSB7CiAgICAgICAgdmFyIGNoYWluSWQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMCQoX2NvbnRleHQxMCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEwLnByZXYgPSBfY29udGV4dDEwLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDEwLnByZXYgPSAwOwogICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBNb3JhbGlzLmVuYWJsZVdlYjMoKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiBNb3JhbGlzLmNoYWluSWQ7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGNoYWluSWQgPSBfY29udGV4dDEwLnNlbnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVzb2x2ZShjaGFpbklkKSk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIF9jb250ZXh0MTAucHJldiA9IDk7CiAgICAgICAgICAgICAgICBfY29udGV4dDEwLnQwID0gX2NvbnRleHQxMFsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKF9jb250ZXh0MTAudDApOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLnJlamVjdChfY29udGV4dDEwLnQwKSk7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMCwgbnVsbCwgW1swLCA5XV0pOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBnZXRDaGFpbklkKCkgewogICAgICAgIHJldHVybiBfZ2V0Q2hhaW5JZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZ2V0Q2hhaW5JZDsKICAgIH0oKSAvLyBDb2RlIHBo4bqnbiB3YWxsZXQgY29ubmVjdCBtb2JpbGUKCiAgfSwgewogICAga2V5OiAiZW5hYmxlV2ViM1Byb3ZpZGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZW5hYmxlV2ViM1Byb3ZpZGVyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTEoKSB7CiAgICAgICAgdmFyIHByb3ZpZGVyOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTEkKF9jb250ZXh0MTEpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMS5wcmV2ID0gX2NvbnRleHQxMS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgLy8gIENyZWF0ZSBXYWxsZXRDb25uZWN0IFByb3ZpZGVyCiAgICAgICAgICAgICAgICBwcm92aWRlciA9IG5ldyBXYWxsZXRDb25uZWN0UHJvdmlkZXIoewogICAgICAgICAgICAgICAgICBycGM6IHsKICAgICAgICAgICAgICAgICAgICA5NzogJ2h0dHBzOi8vbmQtNDA2LTg4MS01NTEucDJwaWZ5LmNvbS8zMTUxMjllMjhkMTg1ODM5Nzc1M2FiMmMwNmUyM2ZjNScsCiAgICAgICAgICAgICAgICAgICAgMzogJ2h0dHBzOi8vbmQtOTEwLTk4MS0wODkucDJwaWZ5LmNvbS9iY2EzNWZiMjZlYThhNzk3MmU4YmU2NDRiYzhmNmUyNicKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgLy8gaW5mdXJhSWQ6ICc5YWEzZDk1YjNiYzQ0MGZhODhlYTEyZWFhNDQ1NjE2MScsCiAgICAgICAgICAgICAgICAgIHFyY29kZU1vZGFsT3B0aW9uczogewogICAgICAgICAgICAgICAgICAgIC8vIG1vYmlsZUxpbmtzOiBbJ3JhaW5ib3cnLCAnbWV0YW1hc2snLCAnYXJnZW50JywgJ3RydXN0JywgJ2ltdG9rZW4nLCAncGlsbGFyJ10KICAgICAgICAgICAgICAgICAgICBtb2JpbGVMaW5rczogWydtZXRhbWFzayddCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuYWJydXB0KCJyZXR1cm4iLCBwcm92aWRlcik7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTExKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZW5hYmxlV2ViM1Byb3ZpZGVyKCkgewogICAgICAgIHJldHVybiBfZW5hYmxlV2ViM1Byb3ZpZGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBlbmFibGVXZWIzUHJvdmlkZXI7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJhdXRvQ29ubmVjdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2F1dG9Db25uZWN0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTIoKSB7CiAgICAgICAgdmFyIGlzV2FsbGV0Q29ubmVjdCwgcHJvdmlkZXIsIHdlYjMsIGFjY291bnQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMiQoX2NvbnRleHQxMikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEyLnByZXYgPSBfY29udGV4dDEyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDEyLnByZXYgPSAwOwogICAgICAgICAgICAgICAgaXNXYWxsZXRDb25uZWN0ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3dhbGxldGNvbm5lY3QnKTsKCiAgICAgICAgICAgICAgICBpZiAoIWlzV2FsbGV0Q29ubmVjdCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDEyLm5leHQgPSAxNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuYWJsZVdlYjNQcm92aWRlcigpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBwcm92aWRlciA9IF9jb250ZXh0MTIuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDg7CiAgICAgICAgICAgICAgICByZXR1cm4gcHJvdmlkZXIuZW5hYmxlKCk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIC8vQHRzLWlnbm9yZQogICAgICAgICAgICAgICAgd2ViMyA9IG5ldyBXZWIzKHByb3ZpZGVyKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDExOwogICAgICAgICAgICAgICAgcmV0dXJuIHdlYjMuZXRoLmdldEFjY291bnRzKCk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICBhY2NvdW50ID0gX2NvbnRleHQxMi5zZW50OwogICAgICAgICAgICAgICAgdGhpcy5zZXRXYWxsZXRBZGRyZXNzKGFjY291bnRbMF0pOwogICAgICAgICAgICAgICAgdGhpcy5zZXRQcm92aWRlcldhbGxldENvbm5lY3QocHJvdmlkZXIpOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gMTk7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTIucHJldiA9IDE2OwogICAgICAgICAgICAgICAgX2NvbnRleHQxMi50MCA9IF9jb250ZXh0MTJbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfY29udGV4dDEyLnQwKTsKCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTEyLCB0aGlzLCBbWzAsIDE2XV0pOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBhdXRvQ29ubmVjdCgpIHsKICAgICAgICByZXR1cm4gX2F1dG9Db25uZWN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBhdXRvQ29ubmVjdDsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImRpc2Nvbm5lY3RXYyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2Rpc2Nvbm5lY3RXYyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEzKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTMkKF9jb250ZXh0MTMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMy5wcmV2ID0gX2NvbnRleHQxMy5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQxMy5wcmV2ID0gMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTMubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcm92aWRlcldjLmRpc2Nvbm5lY3QoKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Rpc2Nvbm5lY3QnKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEzLmFicnVwdCgicmV0dXJuIiwgUHJvbWlzZS5yZXNvbHZlKCkpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBfY29udGV4dDEzLnByZXYgPSA3OwogICAgICAgICAgICAgICAgX2NvbnRleHQxMy50MCA9IF9jb250ZXh0MTNbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfY29udGV4dDEzLnQwKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTEzLCB0aGlzLCBbWzAsIDddXSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGRpc2Nvbm5lY3RXYygpIHsKICAgICAgICByZXR1cm4gX2Rpc2Nvbm5lY3RXYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZGlzY29ubmVjdFdjOwogICAgfSgpCiAgfV0pOwoKICByZXR1cm4gT25DaGFpbk1peGluOwp9KE1peGlucyhQb3B1cE1peGluKSk7CgpfX2RlY29yYXRlKFtiY0F1dGguQWN0aW9uKCdzZXRUb2tlbkV4dGVybmFsTG9naW4nKV0sIE9uQ2hhaW5NaXhpbi5wcm90b3R5cGUsICJzZXRUb2tlbkV4dGVybmFsTG9naW4iLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbYmNBdXRoLkFjdGlvbignc2V0VG9rZW5FeHRlcm5hbExvZ2luTW9iaWxlJyldLCBPbkNoYWluTWl4aW4ucHJvdG90eXBlLCAic2V0VG9rZW5FeHRlcm5hbExvZ2luTW9iaWxlIiwgdm9pZCAwKTsKCl9fZGVjb3JhdGUoW2JjQXV0aC5HZXR0ZXIoJ2lzTG9naW4nKV0sIE9uQ2hhaW5NaXhpbi5wcm90b3R5cGUsICJpc0xvZ2luIiwgdm9pZCAwKTsKCl9fZGVjb3JhdGUoW2JjQXV0aC5NdXRhdGlvbignU0VUX1dBTExFVF9BRERSRVNTJyldLCBPbkNoYWluTWl4aW4ucHJvdG90eXBlLCAic2V0V2FsbGV0QWRkcmVzcyIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtiY05mdC5BY3Rpb24oJ3NldEluZm9BY3Rpdml0eScpXSwgT25DaGFpbk1peGluLnByb3RvdHlwZSwgInNldEluZm9BY3Rpdml0eSIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtiY0F1dGguU3RhdGUoJ3dhbGxldEFkZHJlc3MnKV0sIE9uQ2hhaW5NaXhpbi5wcm90b3R5cGUsICJ3YWxsZXRBZGRyZXNzIiwgdm9pZCAwKTsKCl9fZGVjb3JhdGUoW2JjQXV0aC5TdGF0ZSgndXNlcicpXSwgT25DaGFpbk1peGluLnByb3RvdHlwZSwgInVzZXIiLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbYmNOZnQuU3RhdGUoJ2xpc3ROZnRBc3NldCcpXSwgT25DaGFpbk1peGluLnByb3RvdHlwZSwgImxpc3ROZnRBc3NldE9uQ2hhaW4iLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbYmNOZnQuU3RhdGUoJ3N0YXR1c0FwcHJvdmVBY2NvdW50JyldLCBPbkNoYWluTWl4aW4ucHJvdG90eXBlLCAic3RhdHVzQXBwcm92ZUFjY291bnQiLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbYmNOZnQuTXV0YXRpb24oJ1NFVF9UWVBFX09GX0FDVElPTicpXSwgT25DaGFpbk1peGluLnByb3RvdHlwZSwgInNldFR5cGVPZkFjdGlvbiIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtiY05mdC5TdGF0ZSgnbGlzdEFzc2V0TmV0d29yaycpXSwgT25DaGFpbk1peGluLnByb3RvdHlwZSwgImxpc3RBc3NldE5ldHdvcmsiLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbYmNOZnQuU3RhdGUoJ2N1cnJlbmN5U2VsZWN0QnV5JyldLCBPbkNoYWluTWl4aW4ucHJvdG90eXBlLCAiY3VycmVuY3lTZWxlY3RCdXkiLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbYmNOZnQuTXV0YXRpb24oJ1NFVF9JU19BTFJFQURZX0FQUFJPVkUnKV0sIE9uQ2hhaW5NaXhpbi5wcm90b3R5cGUsICJzZXRTdGF0dXNBbHJlYWR5QXBwcm92ZSIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtiY05mdC5NdXRhdGlvbignU0VUX1NUQVRVU19BUFBST1ZFX0lURU0nKV0sIE9uQ2hhaW5NaXhpbi5wcm90b3R5cGUsICJzZXRTdGF0dXNBcHByb3ZlSXRlbSIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtiY05mdC5NdXRhdGlvbignU0VUX1RSQU5TQUNUSU9OX0NPREVfSVRFTScpXSwgT25DaGFpbk1peGluLnByb3RvdHlwZSwgInNldFRyYW5zYWN0aW9uQ29kZUl0ZW0iLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbYmNOZnQuU3RhdGUoJ2xpc3RBY2NlcHRDdXJyZW5jeScpXSwgT25DaGFpbk1peGluLnByb3RvdHlwZSwgImxpc3RBY2NlcHRDdXJyZW5jeSIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtiY05mdC5TdGF0ZSgnbGlzdEFjY2VwdEN1cnJlbmN5QnV5JyldLCBPbkNoYWluTWl4aW4ucHJvdG90eXBlLCAibGlzdEFjY2VwdEN1cnJlbmN5QnV5Iiwgdm9pZCAwKTsKCl9fZGVjb3JhdGUoW2JjTmZ0LlN0YXRlKCd0b2tlbk5lZWRHZXRCYWxhbmNlJyldLCBPbkNoYWluTWl4aW4ucHJvdG90eXBlLCAidG9rZW5OZWVkR2V0QmFsYW5jZSIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtiY05mdC5TdGF0ZSgnaXNEZXNrdG9wJyldLCBPbkNoYWluTWl4aW4ucHJvdG90eXBlLCAiaXNEZXNrdG9wIiwgdm9pZCAwKTsKCl9fZGVjb3JhdGUoW2JjTmZ0LlN0YXRlKCdwcm92aWRlcldjJyldLCBPbkNoYWluTWl4aW4ucHJvdG90eXBlLCAicHJvdmlkZXJXYyIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtiY05mdC5NdXRhdGlvbignU0VUX1BST1ZJREVSX1dBTExFVF9DT05ORUNUJyldLCBPbkNoYWluTWl4aW4ucHJvdG90eXBlLCAic2V0UHJvdmlkZXJXYWxsZXRDb25uZWN0Iiwgdm9pZCAwKTsKCl9fZGVjb3JhdGUoW2JjTmZ0LlN0YXRlKCdpc0FscmVhZHlBcHByb3ZlJyldLCBPbkNoYWluTWl4aW4ucHJvdG90eXBlLCAiaXNBbHJlYWR5QXBwcm92ZSIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtiZUJhc2UuU3RhdGUoJ2NvaW5NYWluJyldLCBPbkNoYWluTWl4aW4ucHJvdG90eXBlLCAiY29pbk1haW4iLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbYmNBdXRoLkdldHRlcignaXNTaG93Q2hlY2tib3hBY2NlcHQnKV0sIE9uQ2hhaW5NaXhpbi5wcm90b3R5cGUsICJpc1Nob3dDaGVja2JveEFjY2VwdCIsIHZvaWQgMCk7CgpPbkNoYWluTWl4aW4gPSBfX2RlY29yYXRlKFtDb21wb25lbnQoewogIGNvbXBvbmVudHM6IHt9Cn0pXSwgT25DaGFpbk1peGluKTsKZXhwb3J0IGRlZmF1bHQgT25DaGFpbk1peGluOw=="},{"version":3,"sources":["D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\NEU\\CDTT\\frontend\\Website\\src\\mixins\\onchain.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, Mixins } from 'vue-property-decorator'\r\nimport PopupMixin from '@/mixins/popup'\r\n\r\nimport { namespace } from 'vuex-class'\r\n\r\nconst bcAuth = namespace('beAuth')\r\nconst bcNft = namespace('bcNft')\r\nconst beBase = namespace('beBase')\r\n\r\nimport getRepository from '@/services/index'\r\nimport NftRepository from '@/services/repositories/nft'\r\nimport NftRepositoryV2 from '@/services/repositories/nftv2'\r\nimport NftRepositoryV3 from '@/services/repositories/nftv3'\r\nconst apiNft: NftRepository = getRepository('nft')\r\nconst apiNftV2: NftRepositoryV2 = getRepository('nftv2')\r\nconst apiNftV3: NftRepositoryV3 = getRepository('nftv3')\r\n\r\nimport Moralis from 'moralis'\r\n\r\nimport md5 from 'md5'\r\nimport Cookies from 'js-cookie'\r\nimport filter from 'lodash/filter'\r\n\r\nimport includes from 'lodash/includes'\r\n\r\nimport WalletConnectProvider from '@walletconnect/web3-provider'\r\nimport Web3 from 'web3'\r\n\r\n@Component({\r\n  components: {}\r\n})\r\nexport default class OnChainMixin extends Mixins(PopupMixin) {\r\n  [x: string]: any\r\n  @bcAuth.Action('setTokenExternalLogin') setTokenExternalLogin!: (data: Record<string, any>) => void\r\n  @bcAuth.Action('setTokenExternalLoginMobile') setTokenExternalLoginMobile!: (data: Record<string, any>) => void\r\n  @bcAuth.Getter('isLogin') isLogin!: boolean\r\n  @bcAuth.Mutation('SET_WALLET_ADDRESS') setWalletAddress!: (address: string) => void\r\n\r\n  @bcNft.Action('setInfoActivity') setInfoActivity!: (info: Record<string, any>) => void\r\n  @bcAuth.State('walletAddress') walletAddress!: string\r\n  @bcAuth.State('user') user!: Record<string, any>\r\n  @bcNft.State('listNftAsset') listNftAssetOnChain!: Array<Record<string, any>>\r\n  @bcNft.State('statusApproveAccount') statusApproveAccount!: string\r\n  @bcNft.Mutation('SET_TYPE_OF_ACTION') setTypeOfAction!: (type: string) => void\r\n  @bcNft.State('listAssetNetwork') listAssetNetwork!: Array<Record<string, any>>\r\n  @bcNft.State('currencySelectBuy') currencySelectBuy!: string\r\n\r\n  @bcNft.Mutation('SET_IS_ALREADY_APPROVE') setStatusAlreadyApprove!: (status: boolean) => void\r\n  @bcNft.Mutation('SET_STATUS_APPROVE_ITEM') setStatusApproveItem!: (status: string) => void\r\n  @bcNft.Mutation('SET_TRANSACTION_CODE_ITEM') setTransactionCodeItem!: (code: string) => void\r\n  @bcNft.State('listAcceptCurrency') listAcceptCurrency!: Array<Record<string, any>>\r\n  @bcNft.State('listAcceptCurrencyBuy') listAcceptCurrencyBuy!: Array<Record<string, any>>\r\n  @bcNft.State('tokenNeedGetBalance') tokenNeedGetBalance!: string\r\n  @bcNft.State('isDesktop') isDesktop!: boolean\r\n  @bcNft.State('providerWc') providerWc!: WalletConnectProvider\r\n  @bcNft.Mutation('SET_PROVIDER_WALLET_CONNECT') setProviderWalletConnect!: (provider: WalletConnectProvider) => void\r\n\r\n  // khi lần đầu approve, sẽ watch thay đổi status + check thêm dkien isAlreadyApprove\r\n  @bcNft.State('isAlreadyApprove') isAlreadyApprove!: boolean\r\n\r\n  @beBase.State('coinMain') coinMain!: string\r\n  @bcAuth.Getter('isShowCheckboxAccept') isShowCheckboxAccept!: boolean\r\n\r\n  address = ''\r\n  refApproveAccount: any = null\r\n\r\n  isLoading = false\r\n  isOpenPopup = false\r\n  isClickConfirm = false\r\n\r\n  chaiId = ''\r\n\r\n  checkedAccept = false\r\n\r\n  //term cac popup\r\n  get getTerm(): string {\r\n    if (this.systemParamsPublic.length) {\r\n      const param = filter(this.systemParamsPublic, param => param.key === 'system.marketplace.terms.and.conditions')\r\n      return (param[0] && param[0].value) || ''\r\n    }\r\n    return ''\r\n  }\r\n\r\n  get contractAddressExchange(): any {\r\n    if (!this.isLogin) {\r\n      const contract = filter(this.listNftAssetOnChain, elm => elm.type === 'EXCHANGE' && elm.isSystem && elm.baseCurrency === this.nftItem.baseCurrency)\r\n      return contract.length ? contract[0].contractAddress : ''\r\n    }\r\n    return ''\r\n  }\r\n\r\n  async getAbiCode(currency: string, addressContract?: string): Promise<any> {\r\n    try {\r\n      const type = includes(['USDC', 'USDT', 'CLM', 'LYNK', 'ETH'], currency) ? 'ETH' : 'BNB'\r\n      const contractAddress = addressContract ? addressContract : this.getContractAddressToGetAbiCode(currency)\r\n\r\n      const resultAbi = await apiNft.getAbiContract(\r\n        {\r\n          module: 'contract',\r\n          action: 'getabi',\r\n          address: contractAddress,\r\n          apikey: 'B17VBNBDA4EMUUT63JB5HT976WUSC8S55B'\r\n        },\r\n        type\r\n      )\r\n      const abi = JSON.parse(resultAbi)\r\n      return Promise.resolve(abi)\r\n    } catch (error) {\r\n      return Promise.reject(error)\r\n    }\r\n  }\r\n\r\n  async getBalance(contractAddress: string, currency: string): Promise<any> {\r\n    try {\r\n      const networkName = includes(['USDC', 'USDT', 'CLM', 'LYNK', 'ETH'], currency) ? process.env.VUE_APP_NETWORK_NAME_ETH : process.env.VUE_APP_NETWORK_NAME_BNB\r\n      await Moralis.enableWeb3()\r\n      if (currency === 'ETH' || currency === 'BNB') {\r\n        const options = {\r\n          chain: networkName,\r\n          address: this.walletAddress\r\n        }\r\n        //@ts-ignore\r\n        const balance = await Moralis.Web3API.account.getNativeBalance(options)\r\n        return Promise.resolve(Number(Moralis.Units.FromWei(balance.balance)))\r\n      }\r\n\r\n      const options = {\r\n        chain: networkName,\r\n        address: this.walletAddress\r\n      }\r\n      //@ts-ignore\r\n      const resultAll = await Moralis.Web3API.account.getTokenBalances(options)\r\n\r\n      const token = filter(resultAll, elm => elm.token_address === contractAddress.toLowerCase())\r\n\r\n      if (token.length) {\r\n        return Promise.resolve(Number(token[0].balance) / Math.pow(10, Number(token[0].decimals)))\r\n      }\r\n      return Promise.resolve(0)\r\n\r\n      // if (currency === 'ETH' || currency === 'BNB') {\r\n      //   const options = {\r\n      //     chain: 'ropsten',\r\n      //     address: this.walletAddress\r\n      //   }\r\n      //   //@ts-ignore\r\n      //   const balance = await Moralis.Web3API.account.getNativeBalance(options)\r\n      //   return Number(Moralis.Units.FromWei(balance.balance))\r\n      // } else {\r\n      //   const abi = await this.getAbiCode(contractAddress, currency)\r\n\r\n      //   const functionBalanceOf = filter(abi, elm => elm.name === 'balanceOf')[0]\r\n      //   const nameParamsBalanceOf = functionBalanceOf.inputs[0].name\r\n\r\n      //   const params = { [nameParamsBalanceOf]: this.walletAddress }\r\n      //   const readOptions = {\r\n      //     contractAddress,\r\n      //     functionName: 'balanceOf',\r\n      //     abi,\r\n      //     params\r\n      //   }\r\n      //   console.log('readOptions', readOptions)\r\n\r\n      //   const balances = await Moralis.executeFunction(readOptions)\r\n\r\n      //   const decimal = this.$options.filters?.getDecimalsToken(currency)\r\n      //   console.log('balances', (balances['_hex'], 16) / Math.pow(10, decimal))\r\n      //   return parseInt(balances['_hex'], 16) / Math.pow(10, decimal)\r\n      // }\r\n    } catch (error: any) {\r\n      if (error.message === 'Non ethereum enabled browser') {\r\n        const message = this.$t('notify.install-metamask') as string\r\n        this.$message.error({ message, duration: 5000 })\r\n      }\r\n      return Promise.reject(error)\r\n    }\r\n  }\r\n\r\n  async actionWhenLogged(itemNft: Record<string, any>, contractAddress: string, type: 'bid' | 'buy' | 'offer', ownerId?: number): Promise<void> {\r\n    const isExitsToken = Cookies.get('access_token') || ''\r\n    //mạng ropsten\r\n    // if (!isExitsToken) {\r\n    //   await this.handleLoginExternal()\r\n    // }\r\n    let balance = 0\r\n\r\n    if (type === 'buy') {\r\n      balance = await this.getBalance(this.getContractAddressOfCurrency(this.currencySelectBuy), this.currencySelectBuy)\r\n    } else {\r\n      balance = await this.getBalance(this.getContractAddressOfCurrency(this.tokenNeedGetBalance), this.tokenNeedGetBalance)\r\n    }\r\n\r\n    const params = {\r\n      listingId: itemNft?.minListingId,\r\n      itemId: type === 'offer' ? itemNft.id : null,\r\n      ownerId: type === 'offer' ? ownerId : null\r\n    }\r\n    const infoActivity = await apiNft.getLynkeyInfo(itemNft.currency, params)\r\n\r\n    if (\r\n      type !== 'buy' &&\r\n      this.$route.name !== 'DetailNftItem' &&\r\n      infoActivity.myOfferStatus !== 'SUCCESS' &&\r\n      infoActivity.myOfferStatus !== 'FAILED' &&\r\n      infoActivity.myOfferStatus !== null\r\n    ) {\r\n      const message = itemNft.itemName + ' ' + this.$t('notify.transaction-is-pending')\r\n      this.$message.error({ message, duration: 5000 })\r\n      return\r\n    }\r\n    await this.setInfoActivity({ ...infoActivity, available: balance })\r\n    if (type === 'buy') {\r\n      this.setOpenPopup({\r\n        popupName: 'popup-buy-nft',\r\n        isOpen: true\r\n      })\r\n    }\r\n    if (type === 'bid') {\r\n      this.setOpenPopup({\r\n        popupName: 'popup-place-bid',\r\n        isOpen: true\r\n      })\r\n    }\r\n    if (type === 'offer') {\r\n      this.setOpenPopup({\r\n        popupName: 'popup-make-offer',\r\n        isOpen: true\r\n      })\r\n    }\r\n  }\r\n\r\n  // async handleLoginExternal(): Promise<void> {\r\n  //   try {\r\n  //     const KEY = process.env.VUE_APP_KEY_EXTERNAL\r\n  //     const credential = this.$options.filters?.encryptPassword(md5(this.address + KEY))\r\n\r\n  //     const result = await apiNft.externalLogin({\r\n  //       walletType: 'METAMASK',\r\n  //       address: this.address,\r\n  //       credential\r\n  //     })\r\n  //     this.setTokenExternalLogin(result)\r\n  //     return Promise.resolve()\r\n  //   } catch (error) {\r\n  //     return Promise.reject()\r\n  //   }\r\n  // }\r\n\r\n  getContractAddressToGetAbiCode(currency: string): string {\r\n    if (this.listAssetNetwork.length) {\r\n      const token = filter(this.listAssetNetwork, token => token.currency === currency)[0]\r\n      if (Object.prototype.hasOwnProperty.call(token, 'implementAddress')) {\r\n        return token.implementAddress\r\n      }\r\n      return token?.contractAddress || ''\r\n    }\r\n    return ''\r\n  }\r\n\r\n  getContractAddressOfCurrency(currency: string): string {\r\n    if (this.listAssetNetwork.length) {\r\n      const token = filter(this.listAssetNetwork, token => token.currency === currency)[0]\r\n      return token?.contractAddress || ''\r\n    }\r\n    return ''\r\n  }\r\n\r\n  async getAllowance(ownerAddress: string, currency: string): Promise<Record<string, any>> {\r\n    try {\r\n      await Moralis.enableWeb3()\r\n      const contractAddress = this.getContractAddressOfCurrency(currency)\r\n\r\n      let abi: Array<Record<string, any>> = []\r\n\r\n      abi = await this.getAbiCode(currency)\r\n\r\n      const functionAllowance = filter(abi, elm => elm.name === 'allowance')[0]\r\n      const nameParamsOwner = functionAllowance.inputs[0].name\r\n      const nameParamsSpender = functionAllowance.inputs[1].name\r\n\r\n      const params = {\r\n        [nameParamsOwner]: ownerAddress,\r\n        [nameParamsSpender]: this.contractAddressExchange\r\n      }\r\n\r\n      const readOptions = {\r\n        contractAddress,\r\n        functionName: 'allowance',\r\n        abi,\r\n        params\r\n      }\r\n      const allowance = await Moralis.executeFunction(readOptions)\r\n      const decimal = this.$options.filters?.getDecimalsToken(currency)\r\n      const data = {\r\n        allowance: parseInt(allowance['_hex'], 16) / Math.pow(10, decimal),\r\n        abi\r\n      }\r\n      return data\r\n    } catch (error) {\r\n      return Promise.reject(error)\r\n    }\r\n  }\r\n\r\n  async setApprovalForAll(contractAddress: string, spenderWallet: string, currency: string): Promise<any> {\r\n    try {\r\n      await Moralis.enableWeb3()\r\n      console.log('setApprovalForAll')\r\n\r\n      const abi = await this.getAbiCode(currency, contractAddress)\r\n      console.log(abi)\r\n\r\n      const params = {\r\n        operators: [spenderWallet, this.contractAddressExchange],\r\n        approved: true\r\n      }\r\n      const readOptions = {\r\n        contractAddress,\r\n        functionName: 'setBatchApprovalForAll',\r\n        abi,\r\n        params\r\n      }\r\n      console.log(readOptions)\r\n\r\n      const transaction = await Moralis.executeFunction(readOptions)\r\n      this.isClickConfirm = true\r\n      this.setStatusAlreadyApprove(true)\r\n      return Promise.resolve(transaction)\r\n    } catch (error) {\r\n      this.isLoading = false\r\n      console.log(error)\r\n    }\r\n  }\r\n\r\n  async putOnSaleOnChain(body: Record<string, any>, contractAddress: string, spenderWallet: string, popupName: string, currency: string): Promise<any> {\r\n    try {\r\n      if (this.statusApproveAccount === 'NONE' || this.statusApproveAccount === 'FAILED') {\r\n        const transaction = await this.setApprovalForAll(contractAddress, spenderWallet, currency)\r\n        await apiNft.validateApprove({}, { hash: transaction.hash, itemId: body.itemId })\r\n      }\r\n      if (this.statusApproveAccount === 'SUCCESS') {\r\n        await apiNftV3.fixedPrice(body)\r\n        this.isLoading = false\r\n        this.setOpenPopup({\r\n          popupName,\r\n          isOpen: false\r\n        })\r\n        const emitValue = popupName === 'popup-fixed-price' ? 'put-fixed' : popupName === 'popup-open-for-bids' ? 'put-open' : 'put-time'\r\n        this.$emit('success', emitValue)\r\n        return Promise.resolve()\r\n      }\r\n    } catch (error) {\r\n      console.log(error)\r\n      return Promise.reject(error)\r\n    }\r\n  }\r\n\r\n  async acceptOfferOnchain(body: Record<string, any>, contractAddress: string, spenderWallet: string, popupName: string, currency: string, itemId?: number): Promise<void> {\r\n    try {\r\n      if (this.statusApproveAccount === 'NONE' || this.statusApproveAccount === 'FAILED') {\r\n        const transaction = await this.setApprovalForAll(contractAddress, spenderWallet, currency)\r\n        await apiNft.validateApprove({}, { hash: transaction.hash, itemId })\r\n      }\r\n      if (this.statusApproveAccount === 'SUCCESS') {\r\n        await apiNftV3.postAcceptOffer(body)\r\n        this.isLoading = false\r\n        this.setOpenPopup({\r\n          popupName,\r\n          isOpen: false\r\n        })\r\n        this.setTypeOfAction('offer-accept')\r\n        this.setOpenPopup({\r\n          popupName: 'popup-notify-success',\r\n          isOpen: true\r\n        })\r\n      }\r\n    } catch (error) {\r\n      return Promise.reject(error)\r\n    }\r\n  }\r\n\r\n  async approveExchangeSpendTokenOfUser(\r\n    currency: string,\r\n    oldAmount: number,\r\n    amount: number,\r\n    type: 'bid-add' | 'bid-edit' | 'bid-cancel' | 'offer-make' | 'offer-edit' | 'offer-cancel'\r\n  ): Promise<any> {\r\n    try {\r\n      const result = await this.getAllowance(this.walletAddress, currency)\r\n\r\n      // eslint-disable-next-line prefer-const\r\n      let { allowance, abi } = result\r\n      if (type === 'bid-add' || type === 'offer-make') {\r\n        allowance += amount\r\n      }\r\n      if (type === 'bid-edit' || type === 'offer-edit') {\r\n        allowance = allowance - oldAmount + amount\r\n      }\r\n      if (type === 'bid-cancel' || type === 'offer-cancel') {\r\n        allowance -= amount\r\n      }\r\n      console.log('allowance', allowance)\r\n\r\n      const decimal = this.$options.filters?.getDecimalsToken(currency)\r\n\r\n      const functionApprove = filter(abi, elm => elm.name === 'approve')[0]\r\n      const nameParamsSpender = functionApprove.inputs[0].name\r\n      const nameParamsAmount = functionApprove.inputs[1].name\r\n\r\n      const params = {\r\n        [nameParamsSpender]: this.contractAddressExchange,\r\n        [nameParamsAmount]:\r\n          currency === 'BNB' || currency === 'BUSD' ? Math.floor((allowance * Math.pow(10, decimal + 1)) / 10).toString() : Math.floor((allowance * Math.pow(10, decimal + 1)) / 10)\r\n      }\r\n\r\n      const contractAddress = this.getContractAddressOfCurrency(currency)\r\n\r\n      const writeOptions = {\r\n        contractAddress,\r\n        functionName: 'approve',\r\n        abi,\r\n        params\r\n      }\r\n      console.log('writeOptions', writeOptions)\r\n\r\n      const transaction = await Moralis.executeFunction(writeOptions)\r\n      console.log(transaction)\r\n      this.setTransactionCodeItem(transaction.hash)\r\n      return Promise.resolve(transaction.hash)\r\n    } catch (error) {\r\n      return Promise.reject(error)\r\n    }\r\n  }\r\n  async switchNetwork(baseCurrency: string): Promise<void> {\r\n    try {\r\n      await Moralis.enableWeb3()\r\n      const chainIdNetWork = await this.getChainId()\r\n      // let chainId = ''\r\n      if (baseCurrency === 'ETH' && chainIdNetWork !== process.env.VUE_APP_CHAIN_ETH) {\r\n        // chainId = process.env.VUE_APP_CHAIN_ETH as string\r\n        // await Moralis.switchNetwork(chainId)\r\n\r\n        // return\r\n\r\n        const networkName = process.env.VUE_APP_SWITCH_NETWORK_NAME_ETH\r\n        const message = this.$t('notify_switch-network', { network: networkName }) as string\r\n        this.$message.error({ message, duration: 5000 })\r\n        return Promise.reject({ code: 5888 })\r\n      }\r\n      if (baseCurrency === 'BNB' && chainIdNetWork !== process.env.VUE_APP_CHAIN_BNB) {\r\n        // chainId = process.env.VUE_APP_CHAIN_BNB as string\r\n        // await Moralis.switchNetwork(chainId)\r\n        // return\r\n        const networkName = process.env.VUE_APP_SWITCH_NETWORK_NAME_BNB\r\n        const message = this.$t('notify_switch-network', { network: networkName }) as string\r\n        this.$message.error({ message, duration: 5000 })\r\n        return Promise.reject({ code: 5888 })\r\n      }\r\n      return Promise.resolve()\r\n      // const balance = await this.getBalance(this.getContractAddressOfCurrency(this.currencySelectBuy), this.currencySelectBuy)\r\n      // console.log(balance)\r\n    } catch (error: any) {\r\n      console.log(error)\r\n      // if (error.code === 4902) {\r\n      //   //@ts-ignore\r\n      //   await window.ethereum.request({\r\n      //     method: 'wallet_addEthereumChain',\r\n      //     params: [\r\n      //       {\r\n      //         chainId: '0x61',\r\n      //         chainName: 'Binance Smart Chain Testnet',\r\n      //         nativeCurrency: {\r\n      //           name: 'BNB',\r\n      //           symbol: 'BNB',\r\n      //           decimals: 18\r\n      //         },\r\n      //         rpcUrls: ['https://data-seed-prebsc-1-s1.binance.org:8545'],\r\n      //         blockExplorerUrls: ['https://testnet.bscscan.com']\r\n      //       }\r\n      //     ]\r\n      //   })\r\n      //   await this.switchNetwork(baseCurrency)\r\n      // }\r\n      return Promise.reject(error)\r\n    }\r\n  }\r\n\r\n  async getChainId(): Promise<string | any> {\r\n    try {\r\n      await Moralis.enableWeb3()\r\n      const chainId = await Moralis.chainId\r\n      return Promise.resolve(chainId)\r\n    } catch (error) {\r\n      console.log(error)\r\n      return Promise.reject(error)\r\n    }\r\n  }\r\n\r\n  // Code phần wallet connect mobile\r\n\r\n  async enableWeb3Provider(): Promise<WalletConnectProvider> {\r\n    //  Create WalletConnect Provider\r\n    const provider = new WalletConnectProvider({\r\n      rpc: {\r\n        97: 'https://nd-406-881-551.p2pify.com/315129e28d1858397753ab2c06e23fc5',\r\n        3: 'https://nd-910-981-089.p2pify.com/bca35fb26ea8a7972e8be644bc8f6e26'\r\n      },\r\n      // infuraId: '9aa3d95b3bc440fa88ea12eaa4456161',\r\n      qrcodeModalOptions: {\r\n        // mobileLinks: ['rainbow', 'metamask', 'argent', 'trust', 'imtoken', 'pillar']\r\n        mobileLinks: ['metamask']\r\n      }\r\n    })\r\n\r\n    return provider\r\n  }\r\n\r\n  async autoConnect(): Promise<void> {\r\n    try {\r\n      const isWalletConnect = localStorage.getItem('walletconnect')\r\n\r\n      if (isWalletConnect) {\r\n        const provider = await this.enableWeb3Provider()\r\n\r\n        await provider.enable()\r\n\r\n        //@ts-ignore\r\n        const web3 = new Web3(provider)\r\n\r\n        const account = await web3.eth.getAccounts()\r\n\r\n        this.setWalletAddress(account[0])\r\n\r\n        this.setProviderWalletConnect(provider)\r\n      }\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n  }\r\n\r\n  async disconnectWc(): Promise<void> {\r\n    try {\r\n      await this.providerWc.disconnect()\r\n      console.log('disconnect')\r\n      return Promise.resolve()\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":""}]}