{"remainingRequest":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\thread-loader\\dist\\cjs.js!D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\babel-loader\\lib\\index.js!D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\ts-loader\\index.js??ref--15-3!D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\NEU\\CDTT\\frontend\\Website\\src\\modules\\marketplace\\home\\view\\ProductList.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\NEU\\CDTT\\frontend\\Website\\src\\modules\\marketplace\\home\\view\\ProductList.vue","mtime":1660970151679},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\babel.config.js","mtime":1660970148265},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660970364629},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1660970364258},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\babel-loader\\lib\\index.js","mtime":1660970387821},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\ts-loader\\index.js","mtime":1660970390648},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660970364629},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\vue-loader\\lib\\index.js","mtime":1660970394220}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRDpcXE5FVVxcQ0RUVFxcZnJvbnRlbmRcXFdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXG9iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIkQ6XFxORVVcXENEVFRcXGZyb250ZW5kXFxXZWJzaXRlXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFx0b0NvbnN1bWFibGVBcnJheS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJEOlxcTkVVXFxDRFRUXFxmcm9udGVuZFxcV2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiRDpcXE5FVVxcQ0RUVFxcZnJvbnRlbmRcXFdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXGNsYXNzQ2FsbENoZWNrLmpzIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJEOlxcTkVVXFxDRFRUXFxmcm9udGVuZFxcV2Vic2l0ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcY3JlYXRlQ2xhc3MuanMiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIkQ6XFxORVVcXENEVFRcXGZyb250ZW5kXFxXZWJzaXRlXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxpbmhlcml0cy5qcyI7CmltcG9ydCBfY3JlYXRlU3VwZXIgZnJvbSAiRDpcXE5FVVxcQ0RUVFxcZnJvbnRlbmRcXFdlYnNpdGVcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXGNyZWF0ZVN1cGVyLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zZWFyY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0IHsgX19kZWNvcmF0ZSB9IGZyb20gInRzbGliIjsKaW1wb3J0IHsgQ29tcG9uZW50LCBWdWUgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJzsKaW1wb3J0IEZvb3Rlck1hcmtldCBmcm9tICdAL21vZHVsZXMvbWFya2V0cGxhY2UvaG9tZS9jb21wb25lbnRzL0Zvb3RlclByb2R1Y3QudnVlJzsKaW1wb3J0IGdldFJlcG9zaXRvcnkgZnJvbSAnQC9zZXJ2aWNlcyc7CmltcG9ydCBmb3JFYWNoIGZyb20gJ2xvZGFzaC9mb3JFYWNoJzsKaW1wb3J0IGZpbHRlciBmcm9tICdsb2Rhc2gvZmlsdGVyJzsKaW1wb3J0IHRyaW0gZnJvbSAnbG9kYXNoL3RyaW0nOwppbXBvcnQgZGVib3VuY2UgZnJvbSAnbG9kYXNoL2RlYm91bmNlJzsKaW1wb3J0IHsgTG9hZGVyIH0gZnJvbSAnQGdvb2dsZW1hcHMvanMtYXBpLWxvYWRlcic7CmltcG9ydCB7IE1hcmtlckNsdXN0ZXJlciB9IGZyb20gJ0Bnb29nbGVtYXBzL21hcmtlcmNsdXN0ZXJlcic7CmltcG9ydCBFdmVudEJ1cyBmcm9tICdAL3V0aWxzL2V2ZW50QnVzJzsKaW1wb3J0IHsgbmFtZXNwYWNlIH0gZnJvbSAndnVleC1jbGFzcyc7CnZhciBiY0F1dGggPSBuYW1lc3BhY2UoJ2JlQXV0aCcpOwp2YXIgYXBpTWFya2V0ID0gZ2V0UmVwb3NpdG9yeSgnbWFya2V0Jyk7CnZhciBhcGkgPSBnZXRSZXBvc2l0b3J5KCdtYXJrZXQnKTsKCnZhciBQcm9qZWN0TGlzdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1Z1ZSkgewogIF9pbmhlcml0cyhQcm9qZWN0TGlzdCwgX1Z1ZSk7CgogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoUHJvamVjdExpc3QpOwoKICBmdW5jdGlvbiBQcm9qZWN0TGlzdCgpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvamVjdExpc3QpOwoKICAgIF90aGlzID0gX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICBfdGhpcy5mb3JtID0gewogICAgICBwcm9qZWN0SWRzOiAnJywKICAgICAgcHJvZHVjdFR5cGU6ICcnLAogICAgICBmcm9tUHJpY2VVc2Q6ICcnLAogICAgICB0b1ByaWNlVXNkOiAnJywKICAgICAgc3RhdHVzOiAnJywKICAgICAgc2VhcmNoOiAnJywKICAgICAgcGFnZTogMSwKICAgICAgYXJlYTogJycsCiAgICAgIGxpbWl0OiAxMiwKICAgICAgb3JkZXJCeTogMCwKICAgICAgcHJpY2U6ICcnLAogICAgICB0b3RhbDogbnVsbAogICAgfTsKICAgIF90aGlzLnNvcnRMYWJlbCA9ICcnOwogICAgX3RoaXMucHJvamVjdElkcyA9ICcnOwogICAgX3RoaXMucHJvZHVjdFR5cGUgPSAnJzsKICAgIF90aGlzLmZyb21QcmljZVVzZCA9ICcnOwogICAgX3RoaXMudG9QcmljZVVzZCA9ICcnOwogICAgX3RoaXMuc3RhdHVzID0gJyc7CiAgICBfdGhpcy5zZWFyY2ggPSAnJzsKICAgIF90aGlzLnBhZ2UgPSAxOwogICAgX3RoaXMubGltaXQgPSAxMjsKICAgIF90aGlzLm9yZGVyQnkgPSAwOwogICAgX3RoaXMuYXJlYSA9ICcnOwogICAgX3RoaXMudG90YWwgPSBudWxsOwogICAgX3RoaXMucGFyYW0xID0gewogICAgICBwYWdlOiAxLAogICAgICBsaW1pdDogMTIKICAgIH07CiAgICBfdGhpcy5wcmljZSA9ICcnOwogICAgX3RoaXMudG90YWxQYWdlID0gMDsKICAgIF90aGlzLmxhbmd1YWdlID0gJyc7CiAgICBfdGhpcy5pdGVtcyA9IFt7CiAgICAgIHR5cGU6ICcnLAogICAgICBsYWJlbDogJ1RhZyAxJwogICAgfV07CiAgICBfdGhpcy5saXN0UHJvZHVjdCA9IFtdOwogICAgX3RoaXMubGlzdFByb2R1Y3RBbGwgPSBbXTsKICAgIF90aGlzLnBhcmFtID0gewogICAgICBzZWFyY2g6IG51bGwsCiAgICAgIHByb2plY3RUeXBlOiBudWxsLAogICAgICBuYXRpb25hbGl0eUNvZGU6IG51bGwsCiAgICAgIHN0YXRlQ29kZTogbnVsbCwKICAgICAgY2l0eUNvZGU6IG51bGwsCiAgICAgIHByb2plY3RTdGF0dXM6IG51bGwsCiAgICAgIHBhZ2U6IDEsCiAgICAgIGxpbWl0OiAxMiwKICAgICAgc29ydEJ5OiAxLAogICAgICB0b3RhbDogbnVsbCAvLyBzaXplOiAxMAoKICAgIH07CiAgICBfdGhpcy5zb3J0QWN0aXZlID0gJyc7CiAgICBfdGhpcy5zb3J0QWN0aXZlMiA9ICcnOwogICAgX3RoaXMuc29ydEFjdGl2ZTMgPSAnJzsKICAgIF90aGlzLnNvcnRBY3RpdmU0ID0gMDsKICAgIF90aGlzLmxpc3RQcm9qZWN0ID0gW107CiAgICBfdGhpcy5zZWFyY2hUZXh0ID0gZGVib3VuY2UoZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIF90aGlzLmZvcm0uc2VhcmNoID0gdmFsdWU7CiAgICAgIGNvbnNvbGUubG9nKCd0ZXh0JywgX3RoaXMuZm9ybS5zZWFyY2gpOwoKICAgICAgX3RoaXMuZ2V0UHJvZHVjdExpc3QoKTsKICAgIH0sIDUwMCk7IC8vIHBhZ2UgPSB7CiAgICAvLyAgIHBhZ2U6IDEsCiAgICAvLyAgIGxpbWl0OiAxMAogICAgLy8gfQoKICAgIF90aGlzLnN0YXJ0RWxlbWVudCA9IDE7CiAgICBfdGhpcy5lbmRFbGVtZW50ID0gMDsKICAgIF90aGlzLnRvdGFsRWxlbWVudCA9IDA7CiAgICBfdGhpcy5wcm9wZXJUeXBlTGlzdCA9IFtdOwogICAgX3RoaXMubGlzdFR5cGUgPSBbXTsKICAgIF90aGlzLmxpc3RQcmljZSA9IFtdOwogICAgX3RoaXMucHJpY2VMaXN0ID0gW107CiAgICBfdGhpcy5saXN0U3RhdHVzID0gW107CiAgICBfdGhpcy5wcm9qZWN0TGlzdCA9IFtdOwogICAgX3RoaXMuYXJlYUxpc3QgPSBbXTsKICAgIF90aGlzLnNvcnRzQnlMYXRlc3QgPSBbewogICAgICBjb21tYW5kOiAwLAogICAgICAvLyBsYWJlbDogJ0RlZmF1bHQnLAogICAgICBsYWJlbDogX3RoaXMuJGkxOG4udCgnbWFya2V0LWRldGFpbC5zb3J0LmRlZmF1bHQnKSwKICAgICAgZGl2aWRlZDogZmFsc2UsCiAgICAgIGkxOG46ICcnCiAgICB9LCB7CiAgICAgIGNvbW1hbmQ6IDEsCiAgICAgIGxhYmVsOiBfdGhpcy4kaTE4bi50KCdtYXJrZXQtZGV0YWlsLnNvcnQuY3JlYXRlYXQnKSwKICAgICAgZGl2aWRlZDogZmFsc2UsCiAgICAgIGkxOG46ICcnCiAgICB9LCB7CiAgICAgIGNvbW1hbmQ6IDIsCiAgICAgIGxhYmVsOiBfdGhpcy4kaTE4bi50KCdtYXJrZXQtZGV0YWlsLnNvcnQucHJpY2UnKSwKICAgICAgZGl2aWRlZDogZmFsc2UsCiAgICAgIGkxOG46ICcnCiAgICB9LCB7CiAgICAgIGNvbW1hbmQ6IDQsCiAgICAgIGxhYmVsOiBfdGhpcy4kaTE4bi50KCdtYXJrZXQtZGV0YWlsLnNvcnQuc2l6ZScpLAogICAgICBkaXZpZGVkOiBmYWxzZSwKICAgICAgaTE4bjogJycKICAgIH0sIHsKICAgICAgY29tbWFuZDogMywKICAgICAgbGFiZWw6IF90aGlzLiRpMThuLnQoJ21hcmtldC1kZXRhaWwuc29ydC5mYXZvdXJpdGUnKSwKICAgICAgZGl2aWRlZDogZmFsc2UsCiAgICAgIGkxOG46ICcnCiAgICB9XTsKICAgIHJldHVybiBfdGhpczsKICB9IC8vIEBXYXRjaCgnZm9ybS5zZWFyY2gnKSBoYW5kbGVTZWFyY2godmFsdWU6IHN0cmluZyk6IHZvaWQgewogIC8vICAgdGhpcy5zZWFyY2hUZXh0KHZhbHVlKQogIC8vIH0KCgogIF9jcmVhdGVDbGFzcyhQcm9qZWN0TGlzdCwgW3sKICAgIGtleTogImhhbmRsZVNlYXJjaCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlU2VhcmNoKCkgewogICAgICAvLyB0aGlzLmZvcm0uc2VhcmNoID0gdGhpcy5zZWFyY2gKICAgICAgdGhpcy5nZXRQcm9kdWN0TGlzdCgpOwogICAgfQogIH0sIHsKICAgIGtleTogImhhbmRsZUNoYW5nZVByb2plY3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUNoYW5nZVByb2plY3QodmFsdWUpIHsKICAgICAgY29uc29sZS5sb2coJ3ZhbHVlJywgdmFsdWUpOwogICAgICB0aGlzLmZvcm0ucGFnZSA9IDE7CgogICAgICBpZiAodmFsdWUpIHsKICAgICAgICB0aGlzLmZvcm0ucHJvamVjdElkcyA9IHZhbHVlOwogICAgICAgIHRoaXMuZ2V0UHJvZHVjdExpc3QoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmZvcm0ucHJvamVjdElkcyA9IG51bGw7CiAgICAgICAgdGhpcy5nZXRQcm9kdWN0TGlzdCgpOwogICAgICB9CiAgICB9IC8vIGdldCBnZXRMYWJlbChpdGVtKTogYW55IHsKICAgIC8vICAgaWYgKGl0ZW0ubGVuZ3RoID49IDEyKSB7CiAgICAvLyAgICAgcmV0dXJuIGl0ZW0uc3Vic3RyaW5nKDAsIDEyKSArICcuLi4nCiAgICAvLyAgIH0gZWxzZSB7CiAgICAvLyAgICAgcmV0dXJuIGl0ZW0KICAgIC8vICAgfQogICAgLy8gfQoKICB9LCB7CiAgICBrZXk6ICJoYW5kbGVDaGFuZ2VQcm9kdWN0VHlwZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQ2hhbmdlUHJvZHVjdFR5cGUodmFsdWUpIHsKICAgICAgdGhpcy5mb3JtLnBhZ2UgPSAxOwogICAgICBjb25zb2xlLmxvZygndmFsdWUnLCB2YWx1ZSk7CgogICAgICBpZiAodmFsdWUpIHsKICAgICAgICB0aGlzLmZvcm0ucHJvZHVjdFR5cGUgPSB2YWx1ZTsKICAgICAgICB0aGlzLmdldFByb2R1Y3RMaXN0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5mb3JtLnByb2R1Y3RUeXBlID0gbnVsbDsKICAgICAgICB0aGlzLmdldFByb2R1Y3RMaXN0KCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJoYW5kbGVDaGFuZ2VTdGF0dXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUNoYW5nZVN0YXR1cyh2YWx1ZSkgewogICAgICB0aGlzLmZvcm0ucGFnZSA9IDE7CiAgICAgIGNvbnNvbGUubG9nKCdTdGF0dXMnLCB2YWx1ZSk7CgogICAgICBpZiAodmFsdWUpIHsKICAgICAgICB0aGlzLmZvcm0ucHJvZHVjdFN0YXR1cyA9IHZhbHVlOwogICAgICAgIHRoaXMuZ2V0UHJvZHVjdExpc3QoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmZvcm0ucHJvZHVjdFN0YXR1cyA9IG51bGw7CiAgICAgICAgdGhpcy5nZXRQcm9kdWN0TGlzdCgpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiaGFuZGxlQ2hhbmdlUHJpY2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUNoYW5nZVByaWNlKHZhbHVlKSB7CiAgICAgIHRoaXMuZm9ybS5wYWdlID0gMTsKICAgICAgY29uc29sZS5sb2coJ3ZhbHVlJywgdmFsdWUpOwoKICAgICAgaWYgKHZhbHVlID09ICdwcmljZV9yYW5nZS5iZWxvd181MGsnKSB7CiAgICAgICAgdGhpcy5mb3JtLmZyb21QcmljZVVzZCA9IDA7CiAgICAgICAgdGhpcy5mb3JtLnRvUHJpY2VVc2QgPSA1MDAwMDsKICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PSAncHJpY2VfcmFuZ2UuNTBrX3RvXzUwMGsnKSB7CiAgICAgICAgdGhpcy5mb3JtLmZyb21QcmljZVVzZCA9IDUwMDAwOwogICAgICAgIHRoaXMuZm9ybS50b1ByaWNlVXNkID0gNTAwMDAwOwogICAgICB9IGVsc2UgaWYgKHZhbHVlID09ICdwcmljZV9yYW5nZS41MDBrX3RvXzFtJykgewogICAgICAgIHRoaXMuZm9ybS5mcm9tUHJpY2VVc2QgPSA1MDAwMDA7CiAgICAgICAgdGhpcy5mb3JtLnRvUHJpY2VVc2QgPSAxMDAwMDAwOwogICAgICB9IGVsc2UgaWYgKHZhbHVlID09ICdwcmljZV9yYW5nZS4xbV90b18zbScpIHsKICAgICAgICB0aGlzLmZvcm0uZnJvbVByaWNlVXNkID0gMTAwMDAwMDsKICAgICAgICB0aGlzLmZvcm0udG9QcmljZVVzZCA9IDMwMDAwMDA7CiAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT0gJ3ByaWNlX3JhbmdlLjNtX3RvXzVtJykgewogICAgICAgIHRoaXMuZm9ybS5mcm9tUHJpY2VVc2QgPSAzMDAwMDAwOwogICAgICAgIHRoaXMuZm9ybS50b1ByaWNlVXNkID0gNTAwMDAwMDsKICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PSAncHJpY2VfcmFuZ2UuNW1fdG9fOG0nKSB7CiAgICAgICAgdGhpcy5mb3JtLmZyb21QcmljZVVzZCA9IDUwMDAwMDA7CiAgICAgICAgdGhpcy5mb3JtLnRvUHJpY2VVc2QgPSA4MDAwMDAwOwogICAgICB9IGVsc2UgaWYgKHZhbHVlID09ICdwcmljZV9yYW5nZS44bV90b18xMG0nKSB7CiAgICAgICAgdGhpcy5mb3JtLmZyb21QcmljZVVzZCA9IDgwMDAwMDA7CiAgICAgICAgdGhpcy5mb3JtLnRvUHJpY2VVc2QgPSAxMDAwMDAwMDsKICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PSAncHJpY2VfcmFuZ2UuYWJvdmVfMTBtJykgewogICAgICAgIHRoaXMuZm9ybS5mcm9tUHJpY2VVc2QgPSAxMDAwMDAwMDsKICAgICAgICB0aGlzLmZvcm0udG9QcmljZVVzZCA9IG51bGw7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5mb3JtLmZyb21QcmljZVVzZCA9IG51bGw7CiAgICAgICAgdGhpcy5mb3JtLnRvUHJpY2VVc2QgPSBudWxsOwogICAgICB9CgogICAgICB0aGlzLmdldFByb2R1Y3RMaXN0KCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaGFuZGxlQ2hhbmdlQXJlYSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQ2hhbmdlQXJlYSh2YWx1ZSkgewogICAgICB0aGlzLmZvcm0ucGFnZSA9IDE7CgogICAgICBpZiAodmFsdWUgPT0gJ2FyZWFfcmFuZ2UuYmVsb3dfMzAnKSB7CiAgICAgICAgdGhpcy5mb3JtLmZyb21BcmVhID0gbnVsbDsKICAgICAgICB0aGlzLmZvcm0udG9BcmVhID0gMzA7CiAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT0gJ2FyZWFfcmFuZ2UuYmVsb3dfMzBfdG9fNTAnKSB7CiAgICAgICAgdGhpcy5mb3JtLmZyb21BcmVhID0gMzA7CiAgICAgICAgdGhpcy5mb3JtLnRvQXJlYSA9IDUwOwogICAgICB9IGVsc2UgaWYgKHZhbHVlID09ICdhcmVhX3JhbmdlLjUwX3RvXzgwJykgewogICAgICAgIHRoaXMuZm9ybS5mcm9tQXJlYSA9IDUwOwogICAgICAgIHRoaXMuZm9ybS50b0FyZWEgPSA4MDsKICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PSAnYXJlYV9yYW5nZS44MF90b18xMDAnKSB7CiAgICAgICAgdGhpcy5mb3JtLmZyb21BcmVhID0gODA7CiAgICAgICAgdGhpcy5mb3JtLnRvQXJlYSA9IDEwMDsKICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PSAnYXJlYV9yYW5nZS4xMDBfdG9fMTUwJykgewogICAgICAgIHRoaXMuZm9ybS5mcm9tQXJlYSA9IDEwMDsKICAgICAgICB0aGlzLmZvcm0udG9BcmVhID0gMTUwOwogICAgICB9IGVsc2UgaWYgKHZhbHVlID09ICdhcmVhX3JhbmdlLjE1MF90b18zMDAnKSB7CiAgICAgICAgdGhpcy5mb3JtLmZyb21BcmVhID0gMTUwOwogICAgICAgIHRoaXMuZm9ybS50b0FyZWEgPSAzMDA7CiAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT0gJ2FyZWFfcmFuZ2UuMzAwX3RvXzUwMCcpIHsKICAgICAgICB0aGlzLmZvcm0uZnJvbUFyZWEgPSAzMDA7CiAgICAgICAgdGhpcy5mb3JtLnRvQXJlYSA9IDUwMDsKICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PSAnYXJlYV9yYW5nZS5hYm92ZV81MDAnKSB7CiAgICAgICAgdGhpcy5mb3JtLmZyb21BcmVhID0gNTAwOwogICAgICAgIHRoaXMuZm9ybS50b0FyZWEgPSBudWxsOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZm9ybS5mcm9tQXJlYSA9IG51bGw7CiAgICAgICAgdGhpcy5mb3JtLnRvQXJlYSA9IG51bGw7CiAgICAgIH0KCiAgICAgIHRoaXMuZ2V0UHJvZHVjdExpc3QoKTsKICAgIH0gLy8gYXN5bmMgY3JlYXRlZCgpOiBQcm9taXNlPHZvaWQ+IHsKICAgIC8vICAgdGhpcy5mb3JtID0gT2JqZWN0LmFzc2lnbih0aGlzLmZvcm0sIHRoaXMuJHJvdXRlLnF1ZXJ5KQogICAgLy8gICB0aGlzLmluaXQoKQogICAgLy8gICB0aGlzLmdldFByb2R1Y3RMaXN0KCkKICAgIC8vIH0KCiAgfSwgewogICAga2V5OiAibW91bnRlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX21vdW50ZWQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHRleHQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdGV4dCA9IHRoaXMuJHQoJ21hcmtldC1kZXRhaWwuc29ydC5kZWZhdWx0Jyk7CiAgICAgICAgICAgICAgICB0aGlzLnNvcnRMYWJlbCA9IHRleHQ7CiAgICAgICAgICAgICAgICB0aGlzLmZvcm0gPSBPYmplY3QuYXNzaWduKHRoaXMuZm9ybSwgdGhpcy4kcm91dGUucXVlcnkpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbml0KCk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UHJvZHVjdExpc3QoKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICAgICAgcmV0dXJuIF9tb3VudGVkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBtb3VudGVkOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiaW5pdE1hcCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdE1hcCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgbG9hZGVyID0gbmV3IExvYWRlcih7CiAgICAgICAgYXBpS2V5OiAnQUl6YVN5Qkw1azQzVTdsZ1N5T2p2MjBMNjNjS09feDVoZS0tak1NJywKICAgICAgICB2ZXJzaW9uOiAnd2Vla2x5JywKICAgICAgICBsYW5ndWFnZTogJ2VuJwogICAgICB9KTsKICAgICAgbG9hZGVyLmxvYWQoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAod2luZG93Lmdvb2dsZSkgewogICAgICAgICAgdmFyIG1hcCA9IG5ldyB3aW5kb3cuZ29vZ2xlLm1hcHMuTWFwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKSwgewogICAgICAgICAgICB6b29tOiA2LAogICAgICAgICAgICAvLyBkZWZhdWx0IHpvb20gdG8gSHXhur8KICAgICAgICAgICAgY2VudGVyOiB7CiAgICAgICAgICAgICAgbGF0OiAxNi42MTQ3NDk3ODk3OTc1NzUsCiAgICAgICAgICAgICAgbG5nOiAxMDcuNzEyMzU1NTY3ODcyMTgKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICAvKioNCiAgICAgICAgICAgKiAqIG1hcmtlcg0KICAgICAgICAgICAqLwoKICAgICAgICAgIHZhciBpbmZvV2luZG93ID0gbmV3IHdpbmRvdy5nb29nbGUubWFwcy5JbmZvV2luZG93KHsKICAgICAgICAgICAgY29udGVudDogJycsCiAgICAgICAgICAgIGRpc2FibGVBdXRvUGFuOiB0cnVlCiAgICAgICAgICB9KTsKICAgICAgICAgIHZhciBsb2NhdGlvbnMgPSBbXTsKICAgICAgICAgIGZvckVhY2goX3RoaXMyLmxpc3RQcm9kdWN0QWxsLCBmdW5jdGlvbiAocHJvZHVjdCkgewogICAgICAgICAgICBsb2NhdGlvbnMucHVzaCh7CiAgICAgICAgICAgICAgbGF0OiArcHJvZHVjdC5sYXRDb29yZGluYXRlLAogICAgICAgICAgICAgIGxuZzogK3Byb2R1Y3QubG5nQ29vcmRpbmF0ZSwKICAgICAgICAgICAgICBpZDogcHJvZHVjdC5pZAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgICAgdmFyIG1hcmtlcnMgPSBsb2NhdGlvbnMubWFwKGZ1bmN0aW9uIChwb3NpdGlvbikgewogICAgICAgICAgICB2YXIgX3RoaXMyJCRvcHRpb25zJGZpbHRlOwoKICAgICAgICAgICAgdmFyIHByb2R1Y3QgPSBmaWx0ZXIoX3RoaXMyLmxpc3RQcm9kdWN0QWxsLCBmdW5jdGlvbiAoZWxtKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVsbS5pZCA9PT0gcG9zaXRpb24uaWQ7CiAgICAgICAgICAgIH0pWzBdOwogICAgICAgICAgICBjb25zb2xlLmxvZyhwcm9kdWN0KTsKICAgICAgICAgICAgdmFyIHByaWNlID0gKF90aGlzMiQkb3B0aW9ucyRmaWx0ZSA9IF90aGlzMi4kb3B0aW9ucy5maWx0ZXJzKSA9PT0gbnVsbCB8fCBfdGhpczIkJG9wdGlvbnMkZmlsdGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzMiQkb3B0aW9ucyRmaWx0ZS5jb252ZXJ0QW1vdW50RGVjaW1hbChwcm9kdWN0LnByaWNlLCAnVVNEJyk7CiAgICAgICAgICAgIHZhciBsYWJlbCA9ICI8ZGl2IGNsYXNzPVwiaW5mby13aW5kb3dcIj48aW1nIHNyYz1cIiIuY29uY2F0KHByb2R1Y3QuYXZhdGFyLCAiXCIgYWx0PVwiXCI+PGg1IGNsYXNzPVwiaGVhZGVyLTYgdGV4dC1zZW1pYm9sZFwiPiIpLmNvbmNhdChwcm9kdWN0LnByb3BlcnR5TmFtZSwgIjwvaDU+PHNwYW4gY2xhc3M9XCJ0ZXh0LWJnXCI+fiQiKS5jb25jYXQocHJpY2UsICI8L3NwYW4+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImxpbmVcIj48L2Rpdj48L2Rpdj4iKTsKICAgICAgICAgICAgdmFyIG1hcmtlciA9IG5ldyB3aW5kb3cuZ29vZ2xlLm1hcHMuTWFya2VyKHsKICAgICAgICAgICAgICBwb3NpdGlvbjogcG9zaXRpb24sCiAgICAgICAgICAgICAgaWNvbjogewogICAgICAgICAgICAgICAgLy8gdXJsOiAnaHR0cHM6Ly9pbWcuaWNvbnM4LmNvbS9mbHVlbmN5LzQ4LzAwMDAwMC9kb2xsYXItcGxhY2UtbWFya2VyLnBuZycKICAgICAgICAgICAgICAgIHVybDogJ2h0dHBzOi8vaW1nLmljb25zOC5jb20vZmx1ZW5jeS80OC8wMDAwMDAvbWFya2VyLWEucG5nJyAvLyBzY2FsZWRTaXplOiBuZXcgd2luZG93Lmdvb2dsZS5tYXBzLlNpemUoMzAsIDMwKQoKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBtYXJrZXIuYWRkTGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGluZm9XaW5kb3cuc2V0Q29udGVudChsYWJlbCk7CiAgICAgICAgICAgICAgaW5mb1dpbmRvdy5vcGVuKG1hcCwgbWFya2VyKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBtYXJrZXI7CiAgICAgICAgICB9KTsKICAgICAgICAgIG5ldyBNYXJrZXJDbHVzdGVyZXIoewogICAgICAgICAgICBtYXJrZXJzOiBtYXJrZXJzLAogICAgICAgICAgICBtYXA6IG1hcAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0gLy8gaGFuZGxlT3Blbih2YWx1ZTogYW55KTogdm9pZCB7CiAgICAvLyAgIGNvbnNvbGUubG9nKCdzZWFyY2gnLCB2YWx1ZSkKICAgIC8vICAgdGhpcy5nZXRQcm9kdWN0TGlzdCgpCiAgICAvLyB9CgogIH0sIHsKICAgIGtleTogImxvYWRNb3JlUHJvamVjdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2xvYWRNb3JlUHJvamVjdCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIHJlc3VsdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAwOwoKICAgICAgICAgICAgICAgIGlmICghKHRoaXMuZm9ybS5wYWdlID09PSB0aGlzLnRvdGFsUGFnZSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHRoaXMuZm9ybS5wYWdlICs9IDE7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gYXBpTWFya2V0LmdldERhdGFQcm9qZWN0TGlzdCh0aGlzLmZvcm0pOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIHRoaXMubGlzdFByb2plY3QgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHRoaXMubGlzdFByb2plY3QpLCBfdG9Db25zdW1hYmxlQXJyYXkocmVzdWx0LmNvbnRlbnQpKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTA7CiAgICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfY29udGV4dDIudDApOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzLCBbWzAsIDEwXV0pOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBsb2FkTW9yZVByb2plY3QoKSB7CiAgICAgICAgcmV0dXJuIF9sb2FkTW9yZVByb2plY3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGxvYWRNb3JlUHJvamVjdDsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImhhbmRsZURldGFpbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlRGV0YWlsKGlkKSB7CiAgICAgIGNvbnNvbGUubG9nKCdpZCcsIGlkKTsKICAgICAgRXZlbnRCdXMuJGVtaXQoJ2RldGFpbFByb2plY3QnLCBpZCk7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAnRGV0YWlsUHJvamVjdFByaW1hcnknLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgdHlwZTogJ3Byb2R1Y3QnLAogICAgICAgICAgaWQ6IGlkLnRvU3RyaW5nKCkKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImRlc3Ryb3llZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveWVkKCkgewogICAgICBFdmVudEJ1cy4kb2ZmKCdkZXRhaWxQcm9qZWN0Jyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0UHJvZHVjdExpc3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9nZXRQcm9kdWN0TGlzdCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIGFwaTEsIGFwaTIsIHJlc3VsdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgLy8gZGVsZXRlIHRoaXMuZm9ybS5wcmljZQogICAgICAgICAgICAgICAgLy8gZGVsZXRlIHRoaXMuZm9ybS5hcmVhCiAgICAgICAgICAgICAgICB0aGlzLmZvcm0gPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRoaXMuZm9ybSksIHt9LCB7CiAgICAgICAgICAgICAgICAgIHNlYXJjaDogdHJpbSh0aGlzLmZvcm0uc2VhcmNoKQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBhcGkxID0gYXBpLmdldFByb2R1Y3RMaXN0KF9vYmplY3RTcHJlYWQoe30sIHRoaXMuZm9ybSkpOwogICAgICAgICAgICAgICAgYXBpMiA9IGFwaS5nZXRQcm9kdWN0TGlzdChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRoaXMuZm9ybSksIHt9LCB7CiAgICAgICAgICAgICAgICAgIHBhZ2U6IG51bGwsCiAgICAgICAgICAgICAgICAgIGxpbWl0OiBudWxsCiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW2FwaTEsIGFwaTJdKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQzLnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5saXN0UHJvZHVjdCA9IHJlc3VsdFswXS5jb250ZW50OwogICAgICAgICAgICAgICAgICB0aGlzLmxpc3RQcm9kdWN0QWxsID0gcmVzdWx0WzFdOwoKICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdFswXS5udW1iZXJPZkVsZW1lbnRzKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydEVsZW1lbnQgPSAxOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRFbGVtZW50ID0gMDsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgdGhpcy5lbmRFbGVtZW50ID0gcmVzdWx0WzBdLm51bWJlck9mRWxlbWVudHM7CiAgICAgICAgICAgICAgICAgIHRoaXMudG90YWxFbGVtZW50ID0gcmVzdWx0WzBdLnRvdGFsRWxlbWVudHM7CiAgICAgICAgICAgICAgICAgIHRoaXMucGFyYW0udG90YWwgPSByZXN1bHRbMF0udG90YWxFbGVtZW50czsKICAgICAgICAgICAgICAgICAgdGhpcy5pbml0TWFwKCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMywgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGdldFByb2R1Y3RMaXN0KCkgewogICAgICAgIHJldHVybiBfZ2V0UHJvZHVjdExpc3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGdldFByb2R1Y3RMaXN0OwogICAgfSgpCiAgfSwgewogICAga2V5OiAiZ2V0TGFiZWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldExhYmVsKGl0ZW0pIHsKICAgICAgaWYgKGl0ZW0ubGVuZ3RoID49IDEyKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0uc3Vic3RyaW5nKDAsIDEyKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gaXRlbTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImluaXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9pbml0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgcmVzdWx0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDA7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gYXBpTWFya2V0LmdldERhdGFQcm9qZWN0TGlzdCh0aGlzLnBhcmFtMSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIGFwaU1hcmtldC5nZXRTeXN0ZW1wYXJhbSh7CiAgICAgICAgICAgICAgICAgIHR5cGU6ICdQUk9QRVJUWV9UWVBFJwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIHRoaXMubGlzdFR5cGUgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIHJldHVybiBhcGlNYXJrZXQuZ2V0U3lzdGVtcGFyYW0oewogICAgICAgICAgICAgICAgICB0eXBlOiAnUFJJQ0VfUkFOR0UnCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgdGhpcy5saXN0UHJpY2UgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICByZXR1cm4gYXBpTWFya2V0LmdldFN5c3RlbXBhcmFtKHsKICAgICAgICAgICAgICAgICAgdHlwZTogJ1BST1BFUlRZX1NUQVRVUycKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgdGhpcy5saXN0U3RhdHVzID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgcmV0dXJuIGFwaU1hcmtldC5nZXRTeXN0ZW1wYXJhbSh7CiAgICAgICAgICAgICAgICAgIHR5cGU6ICdBUkVBX1JBTkdFJwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICB0aGlzLmFyZWFMaXN0ID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgICAgICB0aGlzLmxpc3RQcm9qZWN0ID0gcmVzdWx0LmNvbnRlbnQ7IC8vIGNvbnN0IGxpc3Q6IGFueSA9IFtdCiAgICAgICAgICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGlzdFByb2plY3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIC8vICAgaWYgKHRoaXMubGlzdFByb2plY3RbaV0ucHJvamVjdE5hbWUubGVuZ3RoID49IDEyKSB7CiAgICAgICAgICAgICAgICAvLyAgICAgY29uc3QgYSA9IHRoaXMubGlzdFByb2plY3RbaV0ucHJvamVjdE5hbWUKICAgICAgICAgICAgICAgIC8vICAgICBjb25zdCBiID0gewogICAgICAgICAgICAgICAgLy8gICAgICAgLi4udGhpcy5saXN0UHJvamVjdFtpXSwKICAgICAgICAgICAgICAgIC8vICAgICAgIGxhYmVsTmFtZTogYS5zdWJzdHJpbmcoMCwgMTIpICsgJy4uLicKICAgICAgICAgICAgICAgIC8vICAgICB9CiAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy5saXN0UHJvamVjdFtpXSA9IHsKICAgICAgICAgICAgICAgIC8vICAgICAgIC4uLmIKICAgICAgICAgICAgICAgIC8vICAgICB9CiAgICAgICAgICAgICAgICAvLyAgIH0KICAgICAgICAgICAgICAgIC8vIH0KICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdwcm8nLCB0aGlzLmxpc3RQcm9qZWN0KQoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjI7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gMTk7CiAgICAgICAgICAgICAgICBfY29udGV4dDQudDAgPSBfY29udGV4dDRbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfY29udGV4dDQudDApOwoKICAgICAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0LCB0aGlzLCBbWzAsIDE5XV0pOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBpbml0KCkgewogICAgICAgIHJldHVybiBfaW5pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gaW5pdDsKICAgIH0oKSAvLyBhc3luYyBnZXREYXRhRmlsdGVyKCk6IFByb21pc2U8dm9pZD4gewogICAgLy8gICBjb25zdCByZXN1bHQgPSBhd2FpdCBhcGkuZ2V0RGF0YVByb2plY3RMaXN0KHsgcGFnZTogMSwgbGltaXQ6IDEwLCBvcmRlckJ5OiAwIH0pCiAgICAvLyAgIGlmIChyZXN1bHQpIHsKICAgIC8vICAgICB0aGlzLnByb2plY3RMaXN0ID0gcmVzdWx0LmNvbnRlbnQKICAgIC8vICAgfQogICAgLy8gICAvL3Byb3BldHlwZQogICAgLy8gICBjb25zdCByZXN1bHQxID0gYXdhaXQgYXBpLmdldFN5c3RlbXBhcmFtKHsgdHlwZTogJ1BST1BFUlRZX1RZUEUnIH0pCiAgICAvLyAgIGlmIChyZXN1bHQxKSB7CiAgICAvLyAgICAgdGhpcy5wcm9wZXJUeXBlTGlzdCA9IHJlc3VsdDEKICAgIC8vICAgICBjb25zb2xlLmxvZygncHJvcGVyVHlwZUxpc3QnLCByZXN1bHQxKQogICAgLy8gICB9CiAgICAvLyAgIC8vcHJpY2UKICAgIC8vICAgY29uc3QgcmVzdWx0MiA9IGF3YWl0IGFwaS5nZXRTeXN0ZW1wYXJhbSh7IHR5cGU6ICdQUklDRV9SQU5HRScgfSkKICAgIC8vICAgaWYgKHJlc3VsdDIpIHsKICAgIC8vICAgICB0aGlzLnByaWNlTGlzdCA9IHJlc3VsdDIKICAgIC8vICAgICBjb25zb2xlLmxvZygncHJpY2UnLCB0aGlzLnByaWNlTGlzdCkKICAgIC8vICAgfQogICAgLy8gICAvL3N0YXR1cwogICAgLy8gICBjb25zdCByZXN1bHQzID0gYXdhaXQgYXBpLmdldFN5c3RlbXBhcmFtKHsgdHlwZTogJ1BST1BFUlRZX1NUQVRVUycgfSkKICAgIC8vICAgaWYgKHJlc3VsdDMpIHsKICAgIC8vICAgICB0aGlzLnN0YXR1c0xpc3QgPSByZXN1bHQzCiAgICAvLyAgICAgY29uc29sZS5sb2coJ3N0YXR1cycsIHRoaXMuc3RhdHVzTGlzdCkKICAgIC8vICAgfQogICAgLy8gfQoKICB9LCB7CiAgICBrZXk6ICJoYW5kbGVTb3J0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVTb3J0KGNvbW1hbmQpIHsKICAgICAgY29uc29sZS5sb2coY29tbWFuZCk7CiAgICAgIHRoaXMuc29ydEFjdGl2ZSA9IGNvbW1hbmQ7CiAgICB9CiAgfSwgewogICAga2V5OiAiaGFuZGxlU29ydDIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVNvcnQyKGNvbW1hbmQpIHsKICAgICAgY29uc29sZS5sb2coY29tbWFuZCk7CiAgICAgIHRoaXMuc29ydEFjdGl2ZTIgPSBjb21tYW5kOwogICAgfQogIH0sIHsKICAgIGtleTogImhhbmRsZVNvcnQzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVTb3J0Myhjb21tYW5kKSB7CiAgICAgIGNvbnNvbGUubG9nKGNvbW1hbmQpOwogICAgICB0aGlzLnNvcnRBY3RpdmUzID0gY29tbWFuZDsKICAgICAgdGhpcy5wYXJhbSA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdGhpcy5wYXJhbSksIHt9LCB7CiAgICAgICAgcHJvamVjdFN0YXR1czogY29tbWFuZAogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJoYW5kbGVTb3J0NCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlU29ydDQoY29tbWFuZCkgewogICAgICB0aGlzLnNvcnRBY3RpdmU0ID0gTnVtYmVyKGNvbW1hbmQpOwogICAgICBjb25zb2xlLmxvZyhjb21tYW5kKTsKCiAgICAgIGlmIChjb21tYW5kID09IDApIHsKICAgICAgICB2YXIgdGV4dCA9IHRoaXMuJHQoJ21hcmtldC1kZXRhaWwuc29ydC5kZWZhdWx0Jyk7CiAgICAgICAgdGhpcy5zb3J0TGFiZWwgPSB0ZXh0OwogICAgICB9IGVsc2UgaWYgKGNvbW1hbmQgPT0gMSkgewogICAgICAgIHZhciBfdGV4dCA9IHRoaXMuJHQoJ21hcmtldC1kZXRhaWwuc29ydC5jcmVhdGVhdCcpOwoKICAgICAgICB0aGlzLnNvcnRMYWJlbCA9IF90ZXh0OwogICAgICB9IGVsc2UgaWYgKGNvbW1hbmQgPT0gMikgewogICAgICAgIHZhciBfdGV4dDIgPSB0aGlzLiR0KCdtYXJrZXQtZGV0YWlsLnNvcnQucHJpY2UnKTsKCiAgICAgICAgdGhpcy5zb3J0TGFiZWwgPSBfdGV4dDI7CiAgICAgIH0gZWxzZSBpZiAoY29tbWFuZCA9PSAzKSB7CiAgICAgICAgdmFyIF90ZXh0MyA9IHRoaXMuJHQoJ21hcmtldC1kZXRhaWwuc29ydC5mYXZvdXJpdGUnKTsKCiAgICAgICAgdGhpcy5zb3J0TGFiZWwgPSBfdGV4dDM7CiAgICAgIH0gZWxzZSBpZiAoY29tbWFuZCA9PSA0KSB7CiAgICAgICAgdmFyIF90ZXh0NCA9IHRoaXMuJHQoJ21hcmtldC1kZXRhaWwuc29ydC5zaXplJyk7CgogICAgICAgIHRoaXMuc29ydExhYmVsID0gX3RleHQ0OwogICAgICB9CgogICAgICB0aGlzLmZvcm0ub3JkZXJCeSA9IGNvbW1hbmQ7CiAgICAgIHRoaXMuZ2V0UHJvZHVjdExpc3QoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJoYW5kbGVDbGlja0NhbmNlbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQ2xpY2tDYW5jZWwoZSkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHRoaXMuc29ydEFjdGl2ZSA9ICcnOwogICAgfQogIH0sIHsKICAgIGtleTogImhhbmRsZUNsaWNrQ2FuY2VsMiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQ2xpY2tDYW5jZWwyKCkgewogICAgICB0aGlzLnNvcnRBY3RpdmUyID0gJyc7CiAgICB9CiAgfSwgewogICAga2V5OiAiaGFuZGxlQ2xpY2tDYW5jZWwzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVDbGlja0NhbmNlbDMoKSB7CiAgICAgIHRoaXMuc29ydEFjdGl2ZTMgPSAnJzsKICAgICAgdGhpcy5wYXJhbSA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdGhpcy5wYXJhbSksIHt9LCB7CiAgICAgICAgcHJvamVjdFN0YXR1czogbnVsbAogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJoYW5kbGVTaXplQ2hhbmdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoYW5kbGVTaXplQ2hhbmdlKHZhbCkgewogICAgICBjb25zb2xlLmxvZygnc2l6ZSBjaGFuZ2UnLCB2YWwpOwogICAgfQogIH0sIHsKICAgIGtleTogImhhbmRsZUN1cnJlbnRDaGFuZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7CiAgICAgIGNvbnNvbGUubG9nKCdjdXJyZW5jaGFuZ2UnLCB2YWwpOwogICAgICB0aGlzLmZvcm0ucGFnZSA9IHZhbDsKICAgICAgdGhpcy5nZXRQcm9kdWN0TGlzdCgpOwogICAgfQogIH0sIHsKICAgIGtleTogImhhbmRsZUZhdm91cml0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlRmF2b3VyaXRlKGl0ZW0pIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMuaXNMb2dpbikgewogICAgICAgIHZhciBtZXNzYWdlID0gdGhpcy4kdCgnbm90aWZ5Lm11c3QtbG9naW4nKTsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHsKICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsCiAgICAgICAgICBkdXJhdGlvbjogNTAwMAogICAgICAgIH0pOwogICAgICAgIHZhciBkZXRhaWwgPSB7CiAgICAgICAgICBpc0JhY2s6ICcxJywKICAgICAgICAgIG5hbWU6IHRoaXMuJHJvdXRlLm5hbWUKICAgICAgICB9OwogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIG5hbWU6ICdsb2dpbicsCiAgICAgICAgICAgIHF1ZXJ5OiBfb2JqZWN0U3ByZWFkKHt9LCBkZXRhaWwpCiAgICAgICAgICB9KTsKICAgICAgICB9LCAxMDAwKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBkYXRhID0gewogICAgICAgIGlkOiBpdGVtLmlkLAogICAgICAgIG9iamVjdFR5cGU6ICdQUk9EVUNUJywKICAgICAgICBpc0Zhdm91cml0ZTogaXRlbS5pc0Zhdm91cml0ZQogICAgICB9OwogICAgICBhcGlNYXJrZXQuaGFuZGxlRmF2b3VyaXRlKGRhdGEpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBwcm9kdWN0ID0gZmlsdGVyKF90aGlzMy5saXN0UHJvZHVjdCwgZnVuY3Rpb24gKGVsbSkgewogICAgICAgICAgcmV0dXJuIGVsbS5pZCA9PT0gaXRlbS5pZDsKICAgICAgICB9KVswXTsKICAgICAgICBwcm9kdWN0LmlzRmF2b3VyaXRlID0gIXByb2R1Y3QuaXNGYXZvdXJpdGU7CgogICAgICAgIF90aGlzMy4kZm9yY2VVcGRhdGUoKTsKICAgICAgfSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gUHJvamVjdExpc3Q7Cn0oVnVlKTsKCl9fZGVjb3JhdGUoW2JjQXV0aC5HZXR0ZXIoJ2lzTG9naW4nKV0sIFByb2plY3RMaXN0LnByb3RvdHlwZSwgImlzTG9naW4iLCB2b2lkIDApOwoKUHJvamVjdExpc3QgPSBfX2RlY29yYXRlKFtDb21wb25lbnQoewogIGNvbXBvbmVudHM6IHsKICAgIEZvb3Rlck1hcmtldDogRm9vdGVyTWFya2V0CiAgfQp9KV0sIFByb2plY3RMaXN0KTsKZXhwb3J0IGRlZmF1bHQgUHJvamVjdExpc3Q7"},null]}