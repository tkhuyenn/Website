{"remainingRequest":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\NEU\\CDTT\\frontend\\Website\\src\\modules\\auth\\views\\ResetPin.vue?vue&type=style&index=0&id=af8e4646&scoped=true&lang=scss&","dependencies":[{"path":"D:\\NEU\\CDTT\\frontend\\Website\\src\\modules\\auth\\views\\ResetPin.vue","mtime":1660970151292},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\css-loader\\dist\\cjs.js","mtime":1660970368992},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1660970411845},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\postcss-loader\\src\\index.js","mtime":1660970387688},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1660970364303},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660970364629},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\vue-loader\\lib\\index.js","mtime":1660970394220}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmJjLWxvZ2luIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjZmOGZjOwogIGhlaWdodDogMTAwdmg7CiAgLmVycm9yIHsKICAgIGNvbG9yOiB2YXIoLS1iYy1zdGF0dXMtZXJyb3IpOwoKICAgIGZvbnQtc2l6ZTogMTJweDsKICAgIGxpbmUtaGVpZ2h0OiAxOwogICAgcGFkZGluZy10b3A6IDRweDsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHRvcDogMTAwJTsKICAgIGxlZnQ6IDA7CiAgICBtYXJnaW4tYm90dG9tOiAzcHg7CiAgfQogIC5mb3JtIHsKICAgIHdpZHRoOiA1MTJweDsKICAgIG1hcmdpbjogNDBweCBhdXRvIDA7CiAgICBib3gtc2hhZG93OiAwcHggMC42cHggMS44cHggcmdiYSgwLCAwLCAwLCAwLjEpLCAwcHggMy4ycHggNy4ycHggcmdiYSgwLCAwLCAwLCAwLjEzKTsKICAgIGJvcmRlci1yYWRpdXM6IDhweDsKICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJjLWJnLXdoaXRlKTsKCiAgICAuZm9ybS1pdGVtIHsKICAgICAgcGFkZGluZzogMzBweCAyNHB4OwogICAgICAudGl0bGUtZm9ybSB7CiAgICAgICAgY29sb3I6ICMyMDFmMWU7CiAgICAgIH0KICAgIH0KCiAgICAuYnRuIHsKICAgICAgcGFkZGluZzogMTJweCAwICFpbXBvcnRhbnQ7CiAgICAgIGZvbnQtc2l6ZTogMTZweCAhaW1wb3J0YW50OwogICAgICBsaW5lLWhlaWdodDogMjRweCAhaW1wb3J0YW50OwogICAgfQogICAgLmlucHV0LXBhc3N3b3JkIHsKICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgfQogICAgLmljb24tc2hvdy1wYXNzd29yZCB7CiAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICB0b3A6IDNweDsKICAgICAgcmlnaHQ6IDE0cHg7CiAgICAgIC5zcGFuLWljb24gewogICAgICAgIGNvbG9yOiB2YXIoLS1iYy1jb2xvci1ncmV5OTApOwogICAgICB9CiAgICB9CiAgfQogIC5sYWJlbC1ib3ggewogICAgbWFyZ2luLWJvdHRvbTogOHB4OwogICAgY29sb3I6IHZhcigtLWJjLXRhYmxlLXRleHQtY29sb3IpOwogICAgZm9udC13ZWlnaHQ6IDQwMDsKICAgIGZvbnQtc2l6ZTogMTRweDsKICB9CiAgLmlucHV0LXBhc3N3b3JkLAogIC5pbnB1dC1wYXNzd29yZDIgewogICAgcG9zaXRpb246IHJlbGF0aXZlOwogIH0KICAuaWNvbi1zaG93LXBhc3N3b3JkLAogIC5pY29uLXNob3ctcGFzc3dvcmQyIHsKICAgIGN1cnNvcjogcG9pbnRlcjsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHRvcDogM3B4OwogICAgcmlnaHQ6IDE0cHg7CiAgICAuc3Bhbi1pY29uIHsKICAgICAgY29sb3I6IHZhcigtLWJjLWNvbG9yLWdyZXk5MCk7CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["ResetPin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6LA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ResetPin.vue","sourceRoot":"src/modules/auth/views","sourcesContent":["<template>\r\n  <div class=\"bc-login\">\r\n    <header-login />\r\n    <div class=\"form\">\r\n      <el-form class=\"form-item\" :model=\"form\" :rules=\"rules\" ref=\"form-login\">\r\n        <div class=\"text-3xl text-semibold text-center mb-2 title-form\">{{ $t('resetPin.title') }}</div>\r\n        <div class=\"label-box\">\r\n          <label for=\"\">{{ $t('label.pin') }}</label>\r\n        </div>\r\n        <el-form-item prop=\"pin\" class=\"input-password\">\r\n          <el-input :type=\"showPass == true ? 'text' : 'password'\" style=\"border-clor: red\" :placeholder=\"$t('placeholder.pin')\" maxlength=\"4\" v-model=\"form.pin\" />\r\n          <!-- <el-input :placeholder=\"$t('placeholder.password')\" type=\"password\" v-model=\"form.password\" /> -->\r\n          <span class=\"icon-show-password\" @click=\"showPass = !showPass\">\r\n            <base-icon :icon=\"showPass == true ? 'icon-eye-off' : 'icon-eye'\" size=\"22\" />\r\n          </span>\r\n        </el-form-item>\r\n        <div class=\"label-box\">\r\n          <label for=\"\">{{ $t('label.repin') }}</label>\r\n        </div>\r\n        <el-form-item prop=\"repin\" class=\"input-password2\">\r\n          <el-input class=\"input-password\" :type=\"showPass2 == true ? 'text' : 'password'\" :placeholder=\"$t('placeholder.repin')\" v-model=\"form.repin\" maxlength=\"4\" />\r\n          <!-- <el-input class=\"input-password\" type=\"password\" :placeholder=\"$t('placeholder.repassword')\" v-model=\"form.repassword\" /> -->\r\n          <span class=\"icon-show-password2\" @click=\"showPass2 = !showPass2\">\r\n            <base-icon :icon=\"showPass2 == true ? 'icon-eye-off' : 'icon-eye'\" size=\"22\" />\r\n          </span>\r\n          <span class=\"small-err\" v-if=\"!isMatchPassword\">{{ $t('validate.password-correct') }}</span>\r\n        </el-form-item>\r\n        <el-button :loading=\"isLoading\" :class=\"getDisableBtn ? 'btn--disabled' : null\" class=\"btn w-100 is-none-border cursor\" @click=\"handleResetPass\"\r\n          >{{ $t('resetPin.submit') }}\r\n        </el-button>\r\n        <!-- <button :class=\"getDisableBtn ? 'btn--disabled' : null\" type=\"button\" class=\"btn is-none-border w-100 cursor\" @click=\"handleResetPass\">{{ $t('resetPass.submit') }}</button> -->\r\n      </el-form>\r\n    </div>\r\n    <!-- <language :isReload=\"false\" @changeLanguage=\"handleChangeLanguage\" /> -->\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\n  import VueRecaptcha from 'vue-recaptcha'\r\n  import HeaderLogin from '../components/HeaderLogin.vue'\r\n  import Language from '../components/Language.vue'\r\n  import { namespace } from 'vuex-class'\r\n\r\n  import getRepository from '@/services'\r\n  import { AuthRepository } from '@/services/repositories/auth'\r\n\r\n  import { Component, Vue, Watch } from 'vue-property-decorator'\r\n  import trim from 'lodash/trim'\r\n  const apiAuth: AuthRepository = getRepository('auth')\r\n\r\n  interface FormLogin {\r\n    pin: string\r\n    repin: string\r\n  }\r\n  const bcAuth = namespace('beAuth')\r\n\r\n  @Component({ components: { VueRecaptcha, HeaderLogin, Language } })\r\n  export default class ResetPin extends Vue {\r\n    @bcAuth.Getter('isLogin') isLogin!: boolean\r\n    @bcAuth.Action('logout') logout!: () => Promise<void>\r\n    isMatchPassword = true\r\n    showPass = false\r\n    showPass2 = false\r\n    language = 'en'\r\n    form: FormLogin = {\r\n      repin: '',\r\n      pin: ''\r\n    }\r\n    isLoading = false\r\n    visible = false\r\n    visibleRe = false\r\n    validate: Record<string, boolean> = {\r\n      length: false,\r\n      number: false,\r\n      uppercase: false,\r\n      lowercase: false,\r\n      specialCharacter: false\r\n    }\r\n    validateRepassword: Record<string, boolean> = {\r\n      length: false,\r\n      number: false,\r\n      uppercase: false,\r\n      lowercase: false,\r\n      specialCharacter: false\r\n    }\r\n    selectLanguage = ''\r\n\r\n    optionLanguage: Array<Record<string, any>> = [\r\n      {\r\n        id: 1,\r\n        lang: 'en'\r\n      },\r\n      {\r\n        id: 2,\r\n        lang: 'vi'\r\n      }\r\n    ]\r\n\r\n    rules: Record<string, any> = {\r\n      pin: [\r\n        {\r\n          required: true,\r\n          message: this.$t('resetPin.wrong-pin'),\r\n          trigger: 'blur'\r\n        }\r\n      ],\r\n      repin: [\r\n        {\r\n          required: true,\r\n          message: this.$t('resetPin.wrong-re-pin'),\r\n          trigger: 'blur'\r\n        }\r\n      ]\r\n    }\r\n\r\n    // }\r\n    @Watch('form.repin') watchRePassword(pass: string): void {\r\n      //@ts-ignore\r\n      this.$refs['form-login']?.fields.find(f => f.prop == 'repin').clearValidate()\r\n      if (this.form.pin && this.form.repin) {\r\n        this.isMatchPassword = !(this.form.pin !== this.form.repin)\r\n      } else {\r\n        this.isMatchPassword = true\r\n      }\r\n    }\r\n\r\n    get getDisableBtn(): boolean {\r\n      return !(this.form.pin && trim(this.form.pin) === this.form.repin && trim(this.form.repin))\r\n    }\r\n\r\n    created(): void {\r\n      this.language = window.localStorage.getItem('bc-lang')!\r\n      this.selectLanguage = this.language\r\n    }\r\n\r\n    handleChangeLanguage(): void {\r\n      //@ts-ignore\r\n      this.$refs['form-login']?.resetFields()\r\n    }\r\n    handleResetPass(): void {\r\n      if (this.getDisableBtn) {\r\n        return\r\n      }\r\n      //@ts-ignore\r\n      this.$refs['form-login']?.validate(async valid => {\r\n        if (valid) {\r\n          let message: any = ''\r\n          this.isLoading = true\r\n          const data = {\r\n            email: this.$route.query.email,\r\n            verificationCode: this.$route.query.code,\r\n            pin: this.$options.filters?.encryptPassword(this.form.pin),\r\n            pinConfirm: this.$options.filters?.encryptPassword(this.form.repin)\r\n          }\r\n          apiAuth\r\n            .resetPinCode(data)\r\n            .then(() => {\r\n              message = this.$t('notify.reset-pin-success')\r\n              this.$message.success({ message, duration: 5000 })\r\n              if (this.isLogin) {\r\n                this.logout().then(() => {\r\n                  this.$router.push({ name: 'login' })\r\n                })\r\n              } else {\r\n                this.$router.push({ name: 'login' })\r\n              }\r\n              this.isLoading = false\r\n            })\r\n            .catch((error: any) => {\r\n              let message: any = ''\r\n              const { data } = error.response\r\n\r\n              if (data.status === 'EXPIRED_VERIFICATION' || data.status === 'INVALID_VERIFICATION') {\r\n                message = this.$t('notify.reset-pin-timeout')\r\n                this.$message.error({ message, duration: 5000 })\r\n              } else {\r\n                message = this.$t('notify.reset-pin-not-match')\r\n                this.$message.error({ message, duration: 5000 })\r\n              }\r\n\r\n              this.isLoading = false\r\n            })\r\n        }\r\n      })\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n  .bc-login {\r\n    background-color: #f6f8fc;\r\n    height: 100vh;\r\n    .error {\r\n      color: var(--bc-status-error);\r\n\r\n      font-size: 12px;\r\n      line-height: 1;\r\n      padding-top: 4px;\r\n      position: absolute;\r\n      top: 100%;\r\n      left: 0;\r\n      margin-bottom: 3px;\r\n    }\r\n    .form {\r\n      width: 512px;\r\n      margin: 40px auto 0;\r\n      box-shadow: 0px 0.6px 1.8px rgba(0, 0, 0, 0.1), 0px 3.2px 7.2px rgba(0, 0, 0, 0.13);\r\n      border-radius: 8px;\r\n      background-color: var(--bc-bg-white);\r\n\r\n      .form-item {\r\n        padding: 30px 24px;\r\n        .title-form {\r\n          color: #201f1e;\r\n        }\r\n      }\r\n\r\n      .btn {\r\n        padding: 12px 0 !important;\r\n        font-size: 16px !important;\r\n        line-height: 24px !important;\r\n      }\r\n      .input-password {\r\n        position: relative;\r\n      }\r\n      .icon-show-password {\r\n        cursor: pointer;\r\n        position: absolute;\r\n        top: 3px;\r\n        right: 14px;\r\n        .span-icon {\r\n          color: var(--bc-color-grey90);\r\n        }\r\n      }\r\n    }\r\n    .label-box {\r\n      margin-bottom: 8px;\r\n      color: var(--bc-table-text-color);\r\n      font-weight: 400;\r\n      font-size: 14px;\r\n    }\r\n    .input-password,\r\n    .input-password2 {\r\n      position: relative;\r\n    }\r\n    .icon-show-password,\r\n    .icon-show-password2 {\r\n      cursor: pointer;\r\n      position: absolute;\r\n      top: 3px;\r\n      right: 14px;\r\n      .span-icon {\r\n        color: var(--bc-color-grey90);\r\n      }\r\n    }\r\n  }\r\n</style>\r\n"]}]}