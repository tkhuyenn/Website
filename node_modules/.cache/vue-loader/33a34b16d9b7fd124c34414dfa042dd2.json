{"remainingRequest":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\NEU\\CDTT\\frontend\\Website\\src\\modules\\setting\\view\\Activity.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\NEU\\CDTT\\frontend\\Website\\src\\modules\\setting\\view\\Activity.vue","mtime":1660123011577},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660970364629},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\babel-loader\\lib\\index.js","mtime":1660970387821},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\ts-loader\\index.js","mtime":1660970390648},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660970364629},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\vue-loader\\lib\\index.js","mtime":1660970394220}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0IHsgQ29tcG9uZW50LCBNaXhpbnMgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJwppbXBvcnQgZ2V0UmVwb3NpdG9yeSBmcm9tICdAL3NlcnZpY2VzJwppbXBvcnQgeyBBY3Rpdml0eVJlcG9zaXRvcnkgfSBmcm9tICdAL3NlcnZpY2VzL3JlcG9zaXRvcmllcy9hY3Rpdml0eScKaW1wb3J0IGZpbHRlciBmcm9tICdsb2Rhc2gvZmlsdGVyJwppbXBvcnQgUG9wdXBNaXhpbiBmcm9tICdAL21peGlucy9wb3B1cCcKaW1wb3J0IFBvcHVwQ29uZmlybSBmcm9tICcuLi9jb21wb25lbnRzL3BvcHVwL1BvcHVwQ29uZmlybS52dWUnCgpjb25zdCBhcGlBY3Rpdml0eTogQWN0aXZpdHlSZXBvc2l0b3J5ID0gZ2V0UmVwb3NpdG9yeSgnYWN0aXZpdHknKQpAQ29tcG9uZW50KHsgY29tcG9uZW50czogeyBQb3B1cENvbmZpcm0gfSB9KQpleHBvcnQgZGVmYXVsdCBjbGFzcyBBY3Rpdml0eSBleHRlbmRzIE1peGlucyhQb3B1cE1peGluKSB7CiAgZGF0YVRhYmxlOiBBcnJheTxSZWNvcmQ8c3RyaW5nLCBhbnk+PiA9IFtdCiAgYWN0aXZpdHlXZWJDdXJlbnQ6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fQogIGFjdGl2aXR5TW9iaWxlQ3VyZW50OiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge30KICBkYXRhVGFibGVNb2JpbGU6IEFycmF5PFJlY29yZDxzdHJpbmcsIGFueT4+ID0gW10KICBnZXQgYWN0aXZpdHlNb2JpTGUoKTogQXJyYXk8UmVjb3JkPHN0cmluZywgYW55Pj4gewogICAgcmV0dXJuIGZpbHRlcih0aGlzLmRhdGFUYWJsZSwgZWxtID0+IGVsbS5zb3VyY2VUeXBlID09PSAnTU9CSUxFJykKICB9CgogIGdldCBhY3Rpdml0eVdlYigpOiBBcnJheTxSZWNvcmQ8c3RyaW5nLCBhbnk+PiB7CiAgICByZXR1cm4gZmlsdGVyKHRoaXMuZGF0YVRhYmxlLCBlbG0gPT4gZWxtLnNvdXJjZVR5cGUgPT09ICdXRUInKQogIH0KCiAgY3JlYXRlZCgpOiB2b2lkIHsKICAgIGFwaUFjdGl2aXR5LmdldExpc3RBY3Rpdml0eSh7IHNvdXJjZVR5cGU6ICdXRUInIH0pLnRoZW4ocmVzID0+IHsKICAgICAgdGhpcy5kYXRhVGFibGUgPSByZXMuY29udGVudAogICAgICB0aGlzLmFjdGl2aXR5V2ViQ3VyZW50ID0gZmlsdGVyKHRoaXMuZGF0YVRhYmxlLCBlbG0gPT4gZWxtLnNvdXJjZVR5cGUgPT09ICdXRUInKVswXQogICAgfSkKICAgIGFwaUFjdGl2aXR5LmdldExpc3RBY3Rpdml0eSh7IHNvdXJjZVR5cGU6ICdNT0JJTEUnIH0pLnRoZW4ocmVzID0+IHsKICAgICAgdGhpcy5kYXRhVGFibGVNb2JpbGUgPSByZXMuY29udGVudAogICAgICB0aGlzLmFjdGl2aXR5TW9iaWxlQ3VyZW50ID0gZmlsdGVyKHRoaXMuZGF0YVRhYmxlTW9iaWxlLCBlbG0gPT4gZWxtLnNvdXJjZVR5cGUgPT09ICdNT0JJTEUnKVswXQogICAgfSkKICB9CgogIGhhbmRsZURlbGV0ZUFjdGl2aXR5KHJvdzogUmVjb3JkPHN0cmluZywgYW55PiwgdHlwZSA9ICd3ZWInKTogdm9pZCB7CiAgICBhcGlBY3Rpdml0eS5kZWxldGVBY3Rpdml0eShyb3cuaWQpLnRoZW4oKCkgPT4gewogICAgICBsZXQgbWVzc2FnZTogYW55ID0gdGhpcy4kaTE4bi50KCdub3RpZnkuZGVsZXRlLXN1Y2Nlc3MnKQogICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MobWVzc2FnZSkKICAgICAgaWYgKHR5cGUgPT09ICd3ZWInKSB7CiAgICAgICAgdGhpcy5kYXRhVGFibGUgPSBmaWx0ZXIodGhpcy5kYXRhVGFibGUsIGVsbSA9PiBlbG0uaWQgIT09IHJvdy5pZCkKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmRhdGFUYWJsZU1vYmlsZSA9IGZpbHRlcih0aGlzLmRhdGFUYWJsZU1vYmlsZSwgZWxtID0+IGVsbS5pZCAhPT0gcm93LmlkKQogICAgICB9CiAgICB9KQogIH0KCiAgaGFuZGxlT3BlblBvcHVwKCk6IHZvaWQgewogICAgdGhpcy5zZXRPcGVuUG9wdXAoewogICAgICBwb3B1cE5hbWU6ICdwb3B1cC1jb25maXJtLWFjdGl2aXR5JywKICAgICAgaXNPcGVuOiB0cnVlCiAgICB9KQogIH0KCiAgaGFuZGxlRGVsZXRlQWxsQWN0aXZpdHkoKTogdm9pZCB7CiAgICBhcGlBY3Rpdml0eS5kZWxldGVBbGxBY3Rpdml0eSgpLnRoZW4oKCkgPT4gewogICAgICBsZXQgbWVzc2FnZTogYW55ID0gdGhpcy4kaTE4bi50KCdub3RpZnkuZGVsZXRlLXN1Y2Nlc3MnKQogICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MobWVzc2FnZSkKICAgICAgdGhpcy5kYXRhVGFibGUgPSBmaWx0ZXIodGhpcy5kYXRhVGFibGUsIGVsbSA9PiBlbG0uc291cmNlVHlwZSAhPT0gJ1dFQicpCiAgICAgIHRoaXMuZGF0YVRhYmxlLnB1c2godGhpcy5hY3Rpdml0eVdlYkN1cmVudCkKICAgIH0pCiAgfQp9Cg=="},{"version":3,"sources":["Activity.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Activity.vue","sourceRoot":"src/modules/setting/view","sourcesContent":["<template>\r\n  <div class=\"setting-activity\">\r\n    <div class=\"box-mobile-app\">\r\n      <div class=\"title-box\">{{ $t('setting.activity.title1') }}</div>\r\n      <div class=\"discription\">{{ $t('setting.activity.discript3') }}</div>\r\n      <base-table :data=\"dataTableMobile\" :showPagination=\"false\">\r\n        <el-table-column label=\"#\" type=\"index\" align=\"center\" width=\"40\" />\r\n        <el-table-column :label=\"$t('setting.activity.signedIn')\" prop=\"createdAt\" width=\"180\">\r\n          <template slot-scope=\"scope\">\r\n            <span>{{ scope.row.createdAt | timeAgo }}</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('setting.activity.ipAddress')\" prop=\"ipAddress\" width=\"160\" />\r\n        <el-table-column :label=\"$t('setting.activity.source')\" prop=\"deviceName\" width=\"250\" />\r\n        <el-table-column :label=\"$t('setting.activity.location')\" prop=\"metaDescription\" />\r\n        <el-table-column :label=\"$t('setting.activity.current')\" width=\"164\" align=\"center\">\r\n          <template slot-scope=\"scope\">\r\n            <div class=\"action\">\r\n              <base-icon v-if=\"scope.row.id === activityMobileCurent.id\" icon=\"iconSuccess\"></base-icon>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"\" width=\"40\" align=\"right\">\r\n          <template align=\"right\" slot-scope=\"scope\">\r\n            <div class=\"action\" @click=\"handleDeleteActivity(scope.row, 'mobile')\">\r\n              <el-tooltip class=\"item\" effect=\"dark\" content=\"Sign out\" placement=\"bottom\">\r\n                <base-icon icon=\"iconDelete\"></base-icon>\r\n              </el-tooltip>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n      </base-table>\r\n    </div>\r\n    <div class=\"hr\" />\r\n    <div class=\"box-sessions\">\r\n      <div class=\"title-box\">{{ $t('setting.activity.title2') }}</div>\r\n      <div class=\"discription\">\r\n        {{ $t('setting.activity.discript4') }} <span class=\"link\" @click=\"handleOpenPopup\">{{ $t('setting.activity.discript5') }}</span>\r\n      </div>\r\n      <base-table :data=\"activityWeb\" :showPagination=\"false\">\r\n        <el-table-column label=\"#\" type=\"index\" align=\"center\" width=\"40\" />\r\n        <el-table-column :label=\"$t('setting.activity.signedIn')\" prop=\"createdAt\" width=\"180\">\r\n          <template slot-scope=\"scope\">\r\n            <span>{{ scope.row.createdAt | timeAgo }}</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('setting.activity.ipAddress')\" prop=\"ipAddress\" width=\"160\" />\r\n        <el-table-column :label=\"$t('setting.activity.source')\" prop=\"deviceName\" width=\"250\" />\r\n        <el-table-column :label=\"$t('setting.activity.location')\" prop=\"metaDescription\" />\r\n        <el-table-column :label=\"$t('setting.activity.current')\" width=\"164\" align=\"center\">\r\n          <template align=\"right\" slot-scope=\"scope\">\r\n            <div class=\"action\">\r\n              <base-icon v-if=\"scope.row.id === activityWebCurent.id\" icon=\"iconSuccess\"></base-icon>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"\" width=\"40\" align=\"right\">\r\n          <template align=\"right\" slot-scope=\"scope\">\r\n            <div class=\"action\" @click=\"handleDeleteActivity(scope.row)\">\r\n              <el-tooltip class=\"item\" effect=\"dark\" :content=\"$t('setting.activity.sign-out')\" placement=\"bottom\">\r\n                <base-icon icon=\"iconDelete\"></base-icon>\r\n              </el-tooltip>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n      </base-table>\r\n    </div>\r\n    <popup-confirm @confirm=\"handleDeleteAllActivity\" />\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\n  import { Component, Mixins } from 'vue-property-decorator'\r\n  import getRepository from '@/services'\r\n  import { ActivityRepository } from '@/services/repositories/activity'\r\n  import filter from 'lodash/filter'\r\n  import PopupMixin from '@/mixins/popup'\r\n  import PopupConfirm from '../components/popup/PopupConfirm.vue'\r\n\r\n  const apiActivity: ActivityRepository = getRepository('activity')\r\n  @Component({ components: { PopupConfirm } })\r\n  export default class Activity extends Mixins(PopupMixin) {\r\n    dataTable: Array<Record<string, any>> = []\r\n    activityWebCurent: Record<string, any> = {}\r\n    activityMobileCurent: Record<string, any> = {}\r\n    dataTableMobile: Array<Record<string, any>> = []\r\n    get activityMobiLe(): Array<Record<string, any>> {\r\n      return filter(this.dataTable, elm => elm.sourceType === 'MOBILE')\r\n    }\r\n\r\n    get activityWeb(): Array<Record<string, any>> {\r\n      return filter(this.dataTable, elm => elm.sourceType === 'WEB')\r\n    }\r\n\r\n    created(): void {\r\n      apiActivity.getListActivity({ sourceType: 'WEB' }).then(res => {\r\n        this.dataTable = res.content\r\n        this.activityWebCurent = filter(this.dataTable, elm => elm.sourceType === 'WEB')[0]\r\n      })\r\n      apiActivity.getListActivity({ sourceType: 'MOBILE' }).then(res => {\r\n        this.dataTableMobile = res.content\r\n        this.activityMobileCurent = filter(this.dataTableMobile, elm => elm.sourceType === 'MOBILE')[0]\r\n      })\r\n    }\r\n\r\n    handleDeleteActivity(row: Record<string, any>, type = 'web'): void {\r\n      apiActivity.deleteActivity(row.id).then(() => {\r\n        let message: any = this.$i18n.t('notify.delete-success')\r\n        this.$message.success(message)\r\n        if (type === 'web') {\r\n          this.dataTable = filter(this.dataTable, elm => elm.id !== row.id)\r\n        } else {\r\n          this.dataTableMobile = filter(this.dataTableMobile, elm => elm.id !== row.id)\r\n        }\r\n      })\r\n    }\r\n\r\n    handleOpenPopup(): void {\r\n      this.setOpenPopup({\r\n        popupName: 'popup-confirm-activity',\r\n        isOpen: true\r\n      })\r\n    }\r\n\r\n    handleDeleteAllActivity(): void {\r\n      apiActivity.deleteAllActivity().then(() => {\r\n        let message: any = this.$i18n.t('notify.delete-success')\r\n        this.$message.success(message)\r\n        this.dataTable = filter(this.dataTable, elm => elm.sourceType !== 'WEB')\r\n        this.dataTable.push(this.activityWebCurent)\r\n      })\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n  .setting-activity {\r\n    background: var(--bc-color-white);\r\n    padding: 24px;\r\n    box-shadow: var(--bc-box-shadow);\r\n    border-radius: 0 0 4px 4px;\r\n    .title-box {\r\n      color: var(--bc-text-primary);\r\n      font-weight: 600;\r\n      font-size: 24px;\r\n      line-height: 32px;\r\n    }\r\n    .discription {\r\n      color: var(--bc-text-discript);\r\n      font-weight: 400;\r\n      font-size: 14px;\r\n      line-height: 20px;\r\n      margin-top: 8px;\r\n      margin-bottom: 20px;\r\n    }\r\n    .link {\r\n      color: var(--bc-btn-bg-default-hover);\r\n      cursor: pointer;\r\n    }\r\n    .hr {\r\n      width: 100%;\r\n      border-top: 1px solid var(--bc-input-border);\r\n      margin: 24px 0;\r\n    }\r\n    .box-mobile-app,\r\n    .box-sessions {\r\n      .action {\r\n        color: var(--bc-text-discript);\r\n        &:hover {\r\n          color: var(--bc-btn-bg-default);\r\n        }\r\n        &:focus {\r\n          color: var(--bc-btn-bg-default);\r\n        }\r\n        &:active {\r\n          color: var(--bc-btn-bg-default);\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n"]}]}