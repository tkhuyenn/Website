{"remainingRequest":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\NEU\\CDTT\\frontend\\Website\\src\\modules\\setting\\components\\popup\\PopupVerification.vue?vue&type=style&index=0&id=79dcb86b&scoped=true&lang=scss&","dependencies":[{"path":"D:\\NEU\\CDTT\\frontend\\Website\\src\\modules\\setting\\components\\popup\\PopupVerification.vue","mtime":1660123011575},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\css-loader\\dist\\cjs.js","mtime":1660970368992},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1660970411845},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\postcss-loader\\src\\index.js","mtime":1660970387688},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1660970364303},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660970364629},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\vue-loader\\lib\\index.js","mtime":1660970394220}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5wb3B1cC12ZXJpZmljYXRpb24gewogIC5jb250ZW50IHsKICAgIHBhZGRpbmctYm90dG9tOiAyNHB4OwogICAgLmxhYmVsIHsKICAgICAgbWFyZ2luLXRvcDogMjRweCAhaW1wb3J0YW50OwogICAgICBjb2xvcjogdmFyKC0tYmMtdGV4dC1wcmltYXJ5KTsKICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICBmb250LXdlaWdodDogNDAwOwogICAgfQogICAgLmJpZy10aXRsZSB7CiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgZm9udC13ZWlnaHQ6IDYwMDsKICAgICAgZm9udC1zaXplOiAyNHB4OwogICAgICBjb2xvcjogdmFyKC0tYmMtdGV4dC1wcmltYXJ5KTsKICAgICAgd29yZC1icmVhazogYnJlYWstd29yZDsKICAgIH0KICAgIC5mb3JtLXZlcmlmaWNhdGlvbiB7CiAgICAgIC5pbnB1dC1waG9uZTEsCiAgICAgIC5pbnB1dC1waG9uZTIgewogICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgfQogICAgICAuYnRuLXJlc2VuZC1jb2RlMSwKICAgICAgLmJ0bi1yZXNlbmQtY29kZTIgewogICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICB0b3A6IDExcHg7CiAgICAgICAgcmlnaHQ6IDEwcHg7CiAgICAgICAgY29sb3I6IHZhcigtLWJjLWJ0bi1iZy1kZWZhdWx0LWhvdmVyKTsKICAgICAgICBmb250LXdlaWdodDogNjAwOwogICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgIH0KICAgIH0KICB9CiAgLmJ0bi1hY3Rpb24gewogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IDQwcHg7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICBsaW5lLWhlaWdodDogNDBweDsKICAgIGZvbnQtc2l6ZTogMTZweDsKICAgIGZvbnQtd2VpZ2h0OiA0MDA7CiAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICBib3JkZXItcmFkaXVzOiA2cHg7CiAgfQogIC5idG4tc3VibWl0IHsKICAgIGNvbG9yOiB2YXIoLS1iYy1jb2xvci13aGl0ZSk7CiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYy10aGVtZS1wcmltYXJ5LWdyYWRpZW50KTsKICAgICY6aG92ZXIgewogICAgICBib3JkZXI6IG5vbmU7CiAgICAgIGNvbG9yOiB2YXIoLS1iYy1jb2xvci13aGl0ZSk7CiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJjLXRoZW1lLXByaW1hcnktZ3JhZGllbnQtaG92ZXIpICFpbXBvcnRhbnQ7CiAgICB9CiAgfQp9CkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDc2OHB4KSB7CiAgOjp2LWRlZXAucG9wdXAtdmVyaWZpY2F0aW9uewogICAgLmVsLWRpYWxvZ3sKICAgICAgd2lkdGg6IDMzNXB4ICFpbXBvcnRhbnQ7CiAgICAgICZfX2hlYWRlcnsKICAgICAgICAudGl0bGV7CiAgICAgICAgICBmb250LXdlaWdodDogNjAwOwogICAgICAgICAgZm9udC1zaXplOiAxNnB4OwogICAgICAgICAgbGluZS1oZWlnaHQ6IDI0cHg7CiAgICAgICAgfQogICAgICB9CiAgICAgICZfX2JvZHl7CiAgICAgICAgLnBvcHVwLWNvbnRlbnR7CiAgICAgICAgICAuY29udGVudHsKICAgICAgICAgICAgLmJpZy10aXRsZXsKICAgICAgICAgICAgICBmb250LXdlaWdodDogNjAwOwogICAgICAgICAgICAgIGZvbnQtc2l6ZTogMjBweDsKICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMjRweDsKICAgICAgICAgICAgfQogICAgICAgICAgICAuZWwtZm9ybS1pdGVtewogICAgICAgICAgICAgIGlucHV0ewogICAgICAgICAgICAgICAgaGVpZ2h0OiA0OHB4OwogICAgICAgICAgICAgICAgcGFkZGluZzogMCAxMnB4OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAuaW5wdXQtcGhvbmUxICwKICAgICAgICAgICAgLmlucHV0LXBob25lMnsKICAgICAgICAgICAgICAuYnRuLXJlc2VuZC1jb2RlMSwKICAgICAgICAgICAgICAuYnRuLXJlc2VuZC1jb2RlMnsKICAgICAgICAgICAgICAgIGNvbG9yOiAjMDE1MUZDOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAuYnRuLXN1Ym1pdHsKICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAyMHB4OwogICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["PopupVerification.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"PopupVerification.vue","sourceRoot":"src/modules/setting/components/popup","sourcesContent":["<template>\r\n  <base-popup name=\"popup-verification\" class=\"popup-verification\" width=\"480px\" :open=\"handleOpen\" :close=\"handleClose\" :isShowFooter=\"false\">\r\n    <div slot=\"title\">\r\n      <span>{{ $t('verification.title') }}</span>\r\n    </div>\r\n    <div class=\"content\">\r\n      <el-form class=\"form-verification\" ref=\"dataInput\" :model=\"dataInput\" :rules=\"rules\">\r\n        <div class=\"big-title\">{{ $t('verification.bigTitle') }}</div>\r\n        <div class=\"label\" style=\"margin-top: 0px\">{{ $t('verification.label1') }}</div>\r\n        <el-form-item prop=\"verificationCodeOldPhone\" class=\"input-phone1\">\r\n          <el-input v-model=\"dataInput.verificationCodeOldPhone\" maxlength=\"6\" :placeholder=\"$t('verification.placeholder')\"></el-input>\r\n          <div class=\"btn-resend-code1\" @click=\"handleResendCode('old')\">{{ $t('verification.sendCode') }}</div>\r\n        </el-form-item>\r\n        <div class=\"label\">{{ $t('verification.label2') }}</div>\r\n        <el-form-item prop=\"verificationCodeNewPhone\" class=\"input-phone2\">\r\n          <el-input v-model=\"dataInput.verificationCodeNewPhone\" maxlength=\"6\" :placeholder=\"$t('verification.placeholder')\"></el-input>\r\n          <div class=\"btn-resend-code2\" @click=\"handleResendCode('new')\">{{ $t('verification.sendCode') }}</div>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div @click=\"handleSubmit\" class=\"btn-action btn-submit\">{{ $t('verification.submit') }}</div>\r\n    </div>\r\n  </base-popup>\r\n</template>\r\n<script lang=\"ts\">\r\n  import { Component, Mixins, Prop } from 'vue-property-decorator'\r\n  import PopupMixin from '@/mixins/popup'\r\n  import getRepository from '@/services'\r\n  import { SettingRepository } from '@/services/repositories/setting'\r\n  import debounce from 'lodash/debounce'\r\n  interface IListCountry {\r\n    name: string\r\n    dialCode: string\r\n    isoCode: string\r\n    flag: string\r\n  }\r\n  const api: SettingRepository = getRepository('setting')\r\n  @Component({ components: {} })\r\n  export default class PopupVerification extends Mixins(PopupMixin) {\r\n    @Prop() stage!: Record<string, any>\r\n    dataInput: any = {\r\n      verificationCodeOldPhone: '',\r\n      verificationCodeNewPhone: '',\r\n      countryCode: '',\r\n      country: '',\r\n      newPhone: ''\r\n    }\r\n    rules: any = {\r\n      verificationCodeOldPhone: [\r\n        {\r\n          required: true,\r\n          message: this.$t('verification.wrong-oldPhone'),\r\n          trigger: 'blur'\r\n        },\r\n        {\r\n          len: 6,\r\n          message: this.$t('changePassword.errorLengthVerificationCode'),\r\n          trigger: 'blur'\r\n        }\r\n      ],\r\n      verificationCodeNewPhone: [\r\n        {\r\n          required: true,\r\n          message: this.$t('verification.wrong-newPhone'),\r\n          trigger: 'blur'\r\n        },\r\n        {\r\n          len: 6,\r\n          message: this.$t('changePassword.errorLengthVerificationCode'),\r\n          trigger: 'blur'\r\n        }\r\n      ]\r\n    }\r\n    handleReset(): void {\r\n      this.dataInput = {\r\n        verificationCodeOldPhone: '',\r\n        verificationCodeNewPhone: '',\r\n        countryCode: '',\r\n        country: '',\r\n        newPhone: ''\r\n      }\r\n      if (this.$refs.dataInput) {\r\n        //@ts-ignore\r\n        this.$refs.dataInput.clearValidate()\r\n      }\r\n    }\r\n    validateForm(): boolean {\r\n      let formInput: any = this.$refs.dataInput\r\n      let valid = false\r\n      formInput.validate((_valid: boolean) => {\r\n        valid = _valid\r\n      })\r\n      return valid\r\n    }\r\n    handleOpen(): void {\r\n      this.dataInput.countryCode = this.stage.countryCode\r\n      this.dataInput.country = this.stage.country\r\n      this.dataInput.newPhone = this.stage.newPhone\r\n    }\r\n    handleClose(): void {\r\n      this.handleReset()\r\n      this.setOpenPopup({\r\n        popupName: 'popup-verification',\r\n        isOpen: false\r\n      })\r\n    }\r\n    // debounce chan doble click\r\n    debounceFilter = debounce((nameAction: any) => {\r\n      if (nameAction == 'handleSubmit') {\r\n        this.submit()\r\n      }\r\n    }, 400)\r\n    async handleSubmit(): Promise<void> {\r\n      const valid = this.validateForm()\r\n      if (valid) {\r\n        this.debounceFilter('handleSubmit')\r\n      }\r\n    }\r\n    async submit(): Promise<void> {\r\n      await api\r\n        .changePhoneVerification(this.dataInput)\r\n        .then(() => {\r\n          let message: any = this.$t('notify.verify-success')\r\n          this.$message.success(message)\r\n          this.$emit('apply')\r\n          this.handleClose()\r\n        })\r\n        .catch(error => {\r\n          console.log(error)\r\n        })\r\n    }\r\n    async handleResendCode(string: string): Promise<void> {\r\n      if (string) {\r\n        const params = {\r\n          resendCode: string\r\n        }\r\n        api.changePhone(this.stage, params).then(() => {\r\n          let message: any = this.$t('verified.resendCodeMess')\r\n          this.$message.success(message)\r\n        })\r\n        // .catch(() => {\r\n        //   let message: any = this.$t('notify.user-blocked-resend-code')\r\n        //   this.$message.error(message)\r\n        // })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style scoped lang=\"scss\">\r\n  .popup-verification {\r\n    .content {\r\n      padding-bottom: 24px;\r\n      .label {\r\n        margin-top: 24px !important;\r\n        color: var(--bc-text-primary);\r\n        font-size: 14px;\r\n        font-weight: 400;\r\n      }\r\n      .big-title {\r\n        text-align: center;\r\n        font-weight: 600;\r\n        font-size: 24px;\r\n        color: var(--bc-text-primary);\r\n        word-break: break-word;\r\n      }\r\n      .form-verification {\r\n        .input-phone1,\r\n        .input-phone2 {\r\n          position: relative;\r\n        }\r\n        .btn-resend-code1,\r\n        .btn-resend-code2 {\r\n          position: absolute;\r\n          top: 11px;\r\n          right: 10px;\r\n          color: var(--bc-btn-bg-default-hover);\r\n          font-weight: 600;\r\n          font-size: 14px;\r\n          cursor: pointer;\r\n        }\r\n      }\r\n    }\r\n    .btn-action {\r\n      width: 100%;\r\n      height: 40px;\r\n      text-align: center;\r\n      line-height: 40px;\r\n      font-size: 16px;\r\n      font-weight: 400;\r\n      cursor: pointer;\r\n      border-radius: 6px;\r\n    }\r\n    .btn-submit {\r\n      color: var(--bc-color-white);\r\n      background: var(--bc-theme-primary-gradient);\r\n      &:hover {\r\n        border: none;\r\n        color: var(--bc-color-white);\r\n        background: var(--bc-theme-primary-gradient-hover) !important;\r\n      }\r\n    }\r\n  }\r\n  @media screen and (max-width: 768px) {\r\n    ::v-deep.popup-verification{\r\n      .el-dialog{\r\n        width: 335px !important;\r\n        &__header{\r\n          .title{\r\n            font-weight: 600;\r\n            font-size: 16px;\r\n            line-height: 24px;\r\n          }\r\n        }\r\n        &__body{\r\n          .popup-content{\r\n            .content{\r\n              .big-title{\r\n                font-weight: 600;\r\n                font-size: 20px;\r\n                line-height: 24px;\r\n              }\r\n              .el-form-item{\r\n                input{\r\n                  height: 48px;\r\n                  padding: 0 12px;\r\n                }\r\n              }\r\n              .input-phone1 ,\r\n              .input-phone2{\r\n                .btn-resend-code1,\r\n                .btn-resend-code2{\r\n                  color: #0151FC;\r\n                }\r\n              }\r\n              .btn-submit{\r\n                display: flex;\r\n                justify-content: center;\r\n                align-items: center;\r\n                font-size: 14px;\r\n                line-height: 20px;\r\n                font-weight: 600;\r\n              }\r\n            }\r\n\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n"]}]}