{"remainingRequest":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\NEU\\CDTT\\frontend\\Website\\src\\modules\\setting\\components\\mobileSetting\\MobileActivity.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\NEU\\CDTT\\frontend\\Website\\src\\modules\\setting\\components\\mobileSetting\\MobileActivity.vue","mtime":1660123011569},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660970364629},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\babel-loader\\lib\\index.js","mtime":1660970387821},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\ts-loader\\index.js","mtime":1660970390648},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660970364629},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\vue-loader\\lib\\index.js","mtime":1660970394220}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCmltcG9ydCB7IENvbXBvbmVudCwgTWl4aW5zIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcicNCmltcG9ydCBnZXRSZXBvc2l0b3J5IGZyb20gJ0Avc2VydmljZXMnDQppbXBvcnQgeyBBY3Rpdml0eVJlcG9zaXRvcnkgfSBmcm9tICdAL3NlcnZpY2VzL3JlcG9zaXRvcmllcy9hY3Rpdml0eScNCmltcG9ydCBmaWx0ZXIgZnJvbSAnbG9kYXNoL2ZpbHRlcicNCmltcG9ydCBQb3B1cE1peGluIGZyb20gJ0AvbWl4aW5zL3BvcHVwJw0KaW1wb3J0IFBvcHVwQ29uZmlybSBmcm9tICcuLi8uLi9jb21wb25lbnRzL3BvcHVwL1BvcHVwQ29uZmlybS52dWUnDQoNCmNvbnN0IGFwaUFjdGl2aXR5OiBBY3Rpdml0eVJlcG9zaXRvcnkgPSBnZXRSZXBvc2l0b3J5KCdhY3Rpdml0eScpDQpAQ29tcG9uZW50KHsgY29tcG9uZW50czogeyBQb3B1cENvbmZpcm0gfSB9KQ0KZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9iaWxlQWN0aXZpdHkgZXh0ZW5kcyBNaXhpbnMoUG9wdXBNaXhpbikgew0KICBkYXRhVGFibGU6IEFycmF5PFJlY29yZDxzdHJpbmcsIGFueT4+ID0gW10NCiAgYWN0aXZpdHlXZWJDdXJlbnQ6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fQ0KICBhY3Rpdml0eU1vYmlsZUN1cmVudDogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9DQogIGRhdGFUYWJsZU1vYmlsZTogQXJyYXk8UmVjb3JkPHN0cmluZywgYW55Pj4gPSBbXQ0KICBnZXQgYWN0aXZpdHlNb2JpTGUoKTogQXJyYXk8UmVjb3JkPHN0cmluZywgYW55Pj4gew0KICAgIHJldHVybiBmaWx0ZXIodGhpcy5kYXRhVGFibGUsIGVsbSA9PiBlbG0uc291cmNlVHlwZSA9PT0gJ01PQklMRScpDQogIH0NCg0KICBnZXQgYWN0aXZpdHlXZWIoKTogQXJyYXk8UmVjb3JkPHN0cmluZywgYW55Pj4gew0KICAgIHJldHVybiBmaWx0ZXIodGhpcy5kYXRhVGFibGUsIGVsbSA9PiBlbG0uc291cmNlVHlwZSA9PT0gJ1dFQicpDQogIH0NCg0KICBjcmVhdGVkKCk6IHZvaWQgew0KICAgIGFwaUFjdGl2aXR5LmdldExpc3RBY3Rpdml0eSh7IHNvdXJjZVR5cGU6ICdXRUInIH0pLnRoZW4ocmVzID0+IHsNCiAgICAgIHRoaXMuZGF0YVRhYmxlID0gcmVzLmNvbnRlbnQNCiAgICAgIHRoaXMuYWN0aXZpdHlXZWJDdXJlbnQgPSBmaWx0ZXIodGhpcy5kYXRhVGFibGUsIGVsbSA9PiBlbG0uc291cmNlVHlwZSA9PT0gJ1dFQicpWzBdDQogICAgfSkNCiAgICBhcGlBY3Rpdml0eS5nZXRMaXN0QWN0aXZpdHkoeyBzb3VyY2VUeXBlOiAnTU9CSUxFJyB9KS50aGVuKHJlcyA9PiB7DQogICAgICB0aGlzLmRhdGFUYWJsZU1vYmlsZSA9IHJlcy5jb250ZW50DQogICAgICB0aGlzLmFjdGl2aXR5TW9iaWxlQ3VyZW50ID0gZmlsdGVyKHRoaXMuZGF0YVRhYmxlTW9iaWxlLCBlbG0gPT4gZWxtLnNvdXJjZVR5cGUgPT09ICdNT0JJTEUnKVswXQ0KICAgIH0pDQogIH0NCg0KICBoYW5kbGVEZWxldGVBY3Rpdml0eShyb3c6IFJlY29yZDxzdHJpbmcsIGFueT4sIHR5cGUgPSAnd2ViJyk6IHZvaWQgew0KICAgIGFwaUFjdGl2aXR5LmRlbGV0ZUFjdGl2aXR5KHJvdy5pZCkudGhlbigoKSA9PiB7DQogICAgICBsZXQgbWVzc2FnZTogYW55ID0gdGhpcy4kaTE4bi50KCdub3RpZnkuZGVsZXRlLXN1Y2Nlc3MnKQ0KICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKG1lc3NhZ2UpDQogICAgICBpZiAodHlwZSA9PT0gJ3dlYicpIHsNCiAgICAgICAgdGhpcy5kYXRhVGFibGUgPSBmaWx0ZXIodGhpcy5kYXRhVGFibGUsIGVsbSA9PiBlbG0uaWQgIT09IHJvdy5pZCkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuZGF0YVRhYmxlTW9iaWxlID0gZmlsdGVyKHRoaXMuZGF0YVRhYmxlTW9iaWxlLCBlbG0gPT4gZWxtLmlkICE9PSByb3cuaWQpDQogICAgICB9DQogICAgfSkNCiAgfQ0KDQogIGhhbmRsZU9wZW5Qb3B1cCgpOiB2b2lkIHsNCiAgICB0aGlzLnNldE9wZW5Qb3B1cCh7DQogICAgICBwb3B1cE5hbWU6ICdwb3B1cC1jb25maXJtLWFjdGl2aXR5JywNCiAgICAgIGlzT3BlbjogdHJ1ZQ0KICAgIH0pDQogIH0NCg0KICBoYW5kbGVEZWxldGVBbGxBY3Rpdml0eSgpOiB2b2lkIHsNCiAgICBhcGlBY3Rpdml0eS5kZWxldGVBbGxBY3Rpdml0eSgpLnRoZW4oKCkgPT4gew0KICAgICAgbGV0IG1lc3NhZ2U6IGFueSA9IHRoaXMuJGkxOG4udCgnbm90aWZ5LmRlbGV0ZS1zdWNjZXNzJykNCiAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhtZXNzYWdlKQ0KICAgICAgdGhpcy5kYXRhVGFibGUgPSBmaWx0ZXIodGhpcy5kYXRhVGFibGUsIGVsbSA9PiBlbG0uc291cmNlVHlwZSAhPT0gJ1dFQicpDQogICAgICB0aGlzLmRhdGFUYWJsZS5wdXNoKHRoaXMuYWN0aXZpdHlXZWJDdXJlbnQpDQogICAgfSkNCiAgfQ0KfQ0K"},{"version":3,"sources":["MobileActivity.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MobileActivity.vue","sourceRoot":"src/modules/setting/components/mobileSetting","sourcesContent":["<template>\r\n  <div class=\"setting-activity-mobile\">\r\n    <div class=\"box-mobile-app\">\r\n      <div class=\"title-box\">{{ $t('setting.activity.title1') }}</div>\r\n      <div class=\"discription\">{{ $t('setting.activity.discript3') }}</div>\r\n      <base-table :data=\"dataTableMobile\" :showPagination=\"false\">\r\n        <el-table-column label=\"#\" type=\"index\" align=\"center\" width=\"40\" />\r\n        <el-table-column :label=\"$t('setting.activity.signedIn')\" prop=\"createdAt\" width=\"150px\">\r\n          <template slot-scope=\"scope\">\r\n            <span>{{ scope.row.createdAt | timeAgo }}</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('setting.activity.ipAddress')\" prop=\"ipAddress\" min-width=\"145px\"/>\r\n        <el-table-column :label=\"$t('setting.activity.source')\" prop=\"deviceName\" width=\"150\" />\r\n        <el-table-column :label=\"$t('setting.activity.location')\" prop=\"metaDescription\" min-width=\"250\"/>\r\n        <el-table-column :label=\"$t('setting.activity.current')\" width=\"164\" align=\"center\">\r\n          <template slot-scope=\"scope\">\r\n            <div class=\"action\">\r\n              <base-icon v-if=\"scope.row.id === activityMobileCurent.id\" icon=\"iconSuccess\"></base-icon>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"\" width=\"40\" align=\"right\">\r\n          <template align=\"right\" slot-scope=\"scope\">\r\n            <div class=\"action\" @click=\"handleDeleteActivity(scope.row, 'mobile')\">\r\n              <el-tooltip class=\"item\" effect=\"dark\" content=\"Sign out\" placement=\"bottom\">\r\n                <base-icon icon=\"iconDelete\"></base-icon>\r\n              </el-tooltip>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n      </base-table>\r\n    </div>\r\n    <div class=\"hr\" />\r\n    <div class=\"box-sessions\">\r\n      <div class=\"title-box\">{{ $t('setting.activity.title2') }}</div>\r\n      <div class=\"discription\">\r\n        {{ $t('setting.activity.discript4') }} <span class=\"link\" @click=\"handleOpenPopup\">{{ $t('setting.activity.discript5') }}</span>\r\n      </div>\r\n      <base-table :data=\"activityWeb\" :showPagination=\"false\">\r\n        <el-table-column label=\"#\" type=\"index\" align=\"center\" width=\"40\"/>\r\n        <el-table-column :label=\"$t('setting.activity.signedIn')\" prop=\"createdAt\" width=\"150px\">\r\n          <template slot-scope=\"scope\">\r\n            <span>{{ scope.row.createdAt | timeAgo }}</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('setting.activity.ipAddress')\" prop=\"ipAddress\" min-width=\"145px\"/>\r\n        <el-table-column :label=\"$t('setting.activity.source')\" prop=\"deviceName\" width=\"150\" />\r\n        <el-table-column :label=\"$t('setting.activity.location')\" prop=\"metaDescription\" min-width=\"250\"/>\r\n        <el-table-column :label=\"$t('setting.activity.current')\" width=\"164\" align=\"center\">\r\n          <template align=\"right\" slot-scope=\"scope\">\r\n            <div class=\"action\">\r\n              <base-icon v-if=\"scope.row.id === activityWebCurent.id\" icon=\"iconSuccess\"></base-icon>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"\" width=\"40\" align=\"right\">\r\n          <template align=\"right\" slot-scope=\"scope\">\r\n            <div class=\"action\" @click=\"handleDeleteActivity(scope.row)\">\r\n              <el-tooltip class=\"item\" effect=\"dark\" :content=\"$t('setting.activity.sign-out')\" placement=\"bottom\">\r\n                <base-icon icon=\"iconDelete\"></base-icon>\r\n              </el-tooltip>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n      </base-table>\r\n    </div>\r\n    <popup-confirm @confirm=\"handleDeleteAllActivity\" />\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Mixins } from 'vue-property-decorator'\r\nimport getRepository from '@/services'\r\nimport { ActivityRepository } from '@/services/repositories/activity'\r\nimport filter from 'lodash/filter'\r\nimport PopupMixin from '@/mixins/popup'\r\nimport PopupConfirm from '../../components/popup/PopupConfirm.vue'\r\n\r\nconst apiActivity: ActivityRepository = getRepository('activity')\r\n@Component({ components: { PopupConfirm } })\r\nexport default class MobileActivity extends Mixins(PopupMixin) {\r\n  dataTable: Array<Record<string, any>> = []\r\n  activityWebCurent: Record<string, any> = {}\r\n  activityMobileCurent: Record<string, any> = {}\r\n  dataTableMobile: Array<Record<string, any>> = []\r\n  get activityMobiLe(): Array<Record<string, any>> {\r\n    return filter(this.dataTable, elm => elm.sourceType === 'MOBILE')\r\n  }\r\n\r\n  get activityWeb(): Array<Record<string, any>> {\r\n    return filter(this.dataTable, elm => elm.sourceType === 'WEB')\r\n  }\r\n\r\n  created(): void {\r\n    apiActivity.getListActivity({ sourceType: 'WEB' }).then(res => {\r\n      this.dataTable = res.content\r\n      this.activityWebCurent = filter(this.dataTable, elm => elm.sourceType === 'WEB')[0]\r\n    })\r\n    apiActivity.getListActivity({ sourceType: 'MOBILE' }).then(res => {\r\n      this.dataTableMobile = res.content\r\n      this.activityMobileCurent = filter(this.dataTableMobile, elm => elm.sourceType === 'MOBILE')[0]\r\n    })\r\n  }\r\n\r\n  handleDeleteActivity(row: Record<string, any>, type = 'web'): void {\r\n    apiActivity.deleteActivity(row.id).then(() => {\r\n      let message: any = this.$i18n.t('notify.delete-success')\r\n      this.$message.success(message)\r\n      if (type === 'web') {\r\n        this.dataTable = filter(this.dataTable, elm => elm.id !== row.id)\r\n      } else {\r\n        this.dataTableMobile = filter(this.dataTableMobile, elm => elm.id !== row.id)\r\n      }\r\n    })\r\n  }\r\n\r\n  handleOpenPopup(): void {\r\n    this.setOpenPopup({\r\n      popupName: 'popup-confirm-activity',\r\n      isOpen: true\r\n    })\r\n  }\r\n\r\n  handleDeleteAllActivity(): void {\r\n    apiActivity.deleteAllActivity().then(() => {\r\n      let message: any = this.$i18n.t('notify.delete-success')\r\n      this.$message.success(message)\r\n      this.dataTable = filter(this.dataTable, elm => elm.sourceType !== 'WEB')\r\n      this.dataTable.push(this.activityWebCurent)\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.setting-activity-mobile {\r\n  background: var(--bc-color-white);\r\n  padding: 24px 20px;\r\n  box-shadow: var(--bc-box-shadow);\r\n  border-radius: 0 0 4px 4px;\r\n  .title-box {\r\n    color: var(--bc-text-primary);\r\n    font-weight: 600;\r\n    font-size: 20px;\r\n    line-height: 24px;\r\n  }\r\n  .discription {\r\n    color: var(--bc-text-discript);\r\n    font-weight: 400;\r\n    font-size: 14px;\r\n    line-height: 20px;\r\n    margin-top: 12px;\r\n    margin-bottom: 24px;\r\n  }\r\n\r\n  ::v-deep.base-table .el-table__header-wrapper .el-table__header thead th{\r\n    padding: 14px 0;\r\n  }\r\n\r\n  ::v-deep.base-table .el-table__header-wrapper .el-table__header thead th .cell{\r\n    font-weight: 600;\r\n    font-size: 14px;\r\n    line-height: 20px;\r\n    color: #0A0B0D;\r\n  }\r\n  ::v-deep.base-table td {\r\n    padding: 14px 0 !important;\r\n  }\r\n  ::v-deep.el-table td.el-table__cell .cell{\r\n    white-space: nowrap;\r\n    font-size: 14px;\r\n    line-height: 20px;\r\n    font-weight: 400;\r\n    color: #0A0B0D;\r\n  }\r\n  ::v-deep.el-table--scrollable-x .el-table__body-wrapper{\r\n    overflow-x: auto;\r\n    -ms-overflow-style: none;\r\n    scrollbar-width: none;\r\n  }\r\n  ::v-deep.el-table--scrollable-x .el-table__body-wrapper::-webkit-scrollbar{\r\n    display: none;\r\n  }\r\n  .link {\r\n    color: var(--bc-btn-bg-default-hover);\r\n    cursor: pointer;\r\n  }\r\n  .hr {\r\n    width: 100%;\r\n    border-top: 1px solid var(--bc-input-border);\r\n    margin: 32px 0;\r\n  }\r\n  .box-mobile-app,\r\n  .box-sessions {\r\n    .action {\r\n      color: var(--bc-text-discript);\r\n      &:hover {\r\n        color: var(--bc-btn-bg-default);\r\n      }\r\n      &:focus {\r\n        color: var(--bc-btn-bg-default);\r\n      }\r\n      &:active {\r\n        color: var(--bc-btn-bg-default);\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n</style>\r\n"]}]}