{"remainingRequest":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\NEU\\CDTT\\frontend\\Website\\src\\App.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\NEU\\CDTT\\frontend\\Website\\src\\App.vue","mtime":1660970149007},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660970364629},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\babel-loader\\lib\\index.js","mtime":1660970387821},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\ts-loader\\index.js","mtime":1660970390648},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660970364629},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\vue-loader\\lib\\index.js","mtime":1660970394220}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCmltcG9ydCB7IFZ1ZSwgQ29tcG9uZW50LCBNaXhpbnMgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJwppbXBvcnQgZ2V0UmVwb3NpdG9yeSBmcm9tICdAL3NlcnZpY2VzJwppbXBvcnQgUGFyYW1zUmVwb3NpdG9yeSBmcm9tICdAL3NlcnZpY2VzL3JlcG9zaXRvcmllcy9wYXJhbXMnCmltcG9ydCB7IG5hbWVzcGFjZSB9IGZyb20gJ3Z1ZXgtY2xhc3MnCgppbXBvcnQgTW9yYWxpcyBmcm9tICdtb3JhbGlzJwoKaW1wb3J0IE9uQ2hhaW5NaXhpbiBmcm9tICdAL21peGlucy9vbmNoYWluJwoKY29uc3Qgc2VydmVyVXJsID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9LRVlfU0VSVkVSX1VSTF9NT1JBTElTIHx8ICcnCmNvbnN0IGFwcElkID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9LRVlfQVBQSURfTU9SQUxJUyB8fCAnJwoKY29uc3QgYXBpUGFyYW1zOiBQYXJhbXNSZXBvc2l0b3J5ID0gZ2V0UmVwb3NpdG9yeSgncGFyYW1zJykKY29uc3QgYmVCYXNlID0gbmFtZXNwYWNlKCdiZUJhc2UnKQpjb25zdCBiY0F1dGggPSBuYW1lc3BhY2UoJ2JlQXV0aCcpCgpAQ29tcG9uZW50KHsKICBjb21wb25lbnRzOiB7fQp9KQpleHBvcnQgZGVmYXVsdCBjbGFzcyBBcHAgZXh0ZW5kcyBNaXhpbnMoT25DaGFpbk1peGluKSB7CiAgQGJlQmFzZS5BY3Rpb24oJ3NldFN5c3RlbVBhcmFtcycpIHNldFN5c3RlbVBhcmFtcyE6IChkYXRhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSA9PiB2b2lkCiAgQGJlQmFzZS5BY3Rpb24oJ3NldENvbmZpZ01vZHVsZScpIHNldENvbmZpZ01vZHVsZSE6IChkYXRhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSA9PiB2b2lkCiAgQGJjQXV0aC5BY3Rpb24oJ2xvZ291dCcpIGxvZ291dCE6IChzdGF0dXM/OiBib29sZWFuKSA9PiBQcm9taXNlPGFueT4KICBAYmNBdXRoLk11dGF0aW9uKCdTRVRfSU5GTycpIHNldEluZm8hOiAoaW5mbzogUmVjb3JkPHN0cmluZywgYW55PikgPT4gUHJvbWlzZTxhbnk+CgogIGNyZWF0ZWQoKTogdm9pZCB7CiAgICBNb3JhbGlzLnN0YXJ0KHsgc2VydmVyVXJsLCBhcHBJZCB9KQoKICAgIGlmICghdGhpcy5pc0xvZ2luKSB7CiAgICAgIGNvbnN0IHVzZXIgPSBNb3JhbGlzLlVzZXIuY3VycmVudCgpCiAgICAgIGlmICh1c2VyKSB7CiAgICAgICAgdGhpcy5zZXRXYWxsZXRBZGRyZXNzKHVzZXIuZ2V0KCdldGhBZGRyZXNzJykpCiAgICAgICAgLy8gY2hlY2sgdXNlciB0aGF5IMSR4buVaSB0w6BpIGtob+G6o24KICAgICAgICB3aW5kb3cuZXRoZXJldW0ub24oJ2FjY291bnRzQ2hhbmdlZCcsIGFzeW5jICgpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdhY2NvdW50c0NoYW5nZXMnKQogICAgICAgICAgYXdhaXQgTW9yYWxpcy5Vc2VyLmxvZ091dCgpCiAgICAgICAgICBhd2FpdCB0aGlzLmxvZ291dChmYWxzZSkKICAgICAgICAgIHRoaXMuc2V0V2FsbGV0QWRkcmVzcygnJykKICAgICAgICAgIHRoaXMuc2V0SW5mbyh7fSkKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogJ01hcmtldE1haW4nIH0pLmNhdGNoKCkKCiAgICAgICAgICBpZiAod2luZG93LmV0aGVyZXVtLnJlbW92ZUxpc3RlbmVyKSB7CiAgICAgICAgICAgIHdpbmRvdy5ldGhlcmV1bS5yZW1vdmVMaXN0ZW5lcignYWNjb3VudHNDaGFuZ2VkJywgKCkgPT4gewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZW1vdmUnKQogICAgICAgICAgICB9KQogICAgICAgICAgfQogICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCkKICAgICAgICB9KQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2V0V2FsbGV0QWRkcmVzcygnJykKICAgICAgfQogICAgfQoKICAgIC8vIGNvbnN0IGlzV2FsbGV0Q29ubmVjdCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd3YWxsZXRjb25uZWN0JykKICAgIC8vIC8vaXNXYWxsZXRDb25uZWN0IHPhur0gY2jhu4kgY8OzIOG7nyBtb2JpbGUKICAgIC8vIGlmIChpc1dhbGxldENvbm5lY3QpIHsKICAgIC8vICAgdGhpcy5hdXRvQ29ubmVjdCgpCiAgICAvLyB9IGVsc2UgewogICAgLy8gICBjb25zdCB1c2VyID0gTW9yYWxpcy5Vc2VyLmN1cnJlbnQoKQogICAgLy8gICBpZiAodXNlcikgewogICAgLy8gICAgIHRoaXMuc2V0V2FsbGV0QWRkcmVzcyh1c2VyLmdldCgnZXRoQWRkcmVzcycpKQogICAgLy8gICB9IGVsc2UgewogICAgLy8gICAgIHRoaXMuc2V0V2FsbGV0QWRkcmVzcygnJykKICAgIC8vICAgfQogICAgLy8gfQoKICAgIGFwaVBhcmFtcy5nZXRQcmFtc0hlYWRlcigpLnRoZW4ocmVzID0+IHsKICAgICAgdGhpcy5zZXRTeXN0ZW1QYXJhbXMocmVzKQogICAgfSkKCiAgICBjb25zdCBsYW5ndWFnZSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmMtbGFuZycpCiAgICBpZiAoIWxhbmd1YWdlKSB7CiAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYmMtbGFuZycsICdlbicpCiAgICB9CiAgICAvLyBpZiAobGFuZ3VhZ2UgPT09ICd2aScpIHsKICAgIC8vICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdiYy1sYW5nJywgJ2VuJykKICAgIC8vICAgbG9jYXRpb24ucmVsb2FkKCkKICAgIC8vIH0KICAgIC8vIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYmMtbGFuZycsICdlbicpCiAgfQp9Cg=="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;AAOA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\r\n  <div id=\"app\">\r\n    <router-view />\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\n  import { Vue, Component, Mixins } from 'vue-property-decorator'\r\n  import getRepository from '@/services'\r\n  import ParamsRepository from '@/services/repositories/params'\r\n  import { namespace } from 'vuex-class'\r\n\r\n  import Moralis from 'moralis'\r\n\r\n  import OnChainMixin from '@/mixins/onchain'\r\n\r\n  const serverUrl = process.env.VUE_APP_KEY_SERVER_URL_MORALIS || ''\r\n  const appId = process.env.VUE_APP_KEY_APPID_MORALIS || ''\r\n\r\n  const apiParams: ParamsRepository = getRepository('params')\r\n  const beBase = namespace('beBase')\r\n  const bcAuth = namespace('beAuth')\r\n\r\n  @Component({\r\n    components: {}\r\n  })\r\n  export default class App extends Mixins(OnChainMixin) {\r\n    @beBase.Action('setSystemParams') setSystemParams!: (data: Record<string, any>) => void\r\n    @beBase.Action('setConfigModule') setConfigModule!: (data: Record<string, any>) => void\r\n    @bcAuth.Action('logout') logout!: (status?: boolean) => Promise<any>\r\n    @bcAuth.Mutation('SET_INFO') setInfo!: (info: Record<string, any>) => Promise<any>\r\n\r\n    created(): void {\r\n      Moralis.start({ serverUrl, appId })\r\n\r\n      if (!this.isLogin) {\r\n        const user = Moralis.User.current()\r\n        if (user) {\r\n          this.setWalletAddress(user.get('ethAddress'))\r\n          // check user thay đổi tài khoản\r\n          window.ethereum.on('accountsChanged', async () => {\r\n            console.log('accountsChanges')\r\n            await Moralis.User.logOut()\r\n            await this.logout(false)\r\n            this.setWalletAddress('')\r\n            this.setInfo({})\r\n            this.$router.push({ name: 'MarketMain' }).catch()\r\n\r\n            if (window.ethereum.removeListener) {\r\n              window.ethereum.removeListener('accountsChanged', () => {\r\n                console.log('remove')\r\n              })\r\n            }\r\n            location.reload()\r\n          })\r\n        } else {\r\n          this.setWalletAddress('')\r\n        }\r\n      }\r\n\r\n      // const isWalletConnect = localStorage.getItem('walletconnect')\r\n      // //isWalletConnect sẽ chỉ có ở mobile\r\n      // if (isWalletConnect) {\r\n      //   this.autoConnect()\r\n      // } else {\r\n      //   const user = Moralis.User.current()\r\n      //   if (user) {\r\n      //     this.setWalletAddress(user.get('ethAddress'))\r\n      //   } else {\r\n      //     this.setWalletAddress('')\r\n      //   }\r\n      // }\r\n\r\n      apiParams.getPramsHeader().then(res => {\r\n        this.setSystemParams(res)\r\n      })\r\n\r\n      const language = window.localStorage.getItem('bc-lang')\r\n      if (!language) {\r\n        window.localStorage.setItem('bc-lang', 'en')\r\n      }\r\n      // if (language === 'vi') {\r\n      //   window.localStorage.setItem('bc-lang', 'en')\r\n      //   location.reload()\r\n      // }\r\n      // window.localStorage.setItem('bc-lang', 'en')\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n  // @import url('./accets/styles/index.scss');\r\n</style>\r\n"]}]}