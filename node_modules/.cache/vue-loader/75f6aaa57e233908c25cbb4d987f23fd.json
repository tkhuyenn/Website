{"remainingRequest":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\NEU\\CDTT\\frontend\\Website\\src\\modules\\auth\\views\\ResetPin.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\NEU\\CDTT\\frontend\\Website\\src\\modules\\auth\\views\\ResetPin.vue","mtime":1660970151292},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660970364629},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\babel-loader\\lib\\index.js","mtime":1660970387821},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\ts-loader\\index.js","mtime":1660970390648},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660970364629},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\vue-loader\\lib\\index.js","mtime":1660970394220}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgppbXBvcnQgVnVlUmVjYXB0Y2hhIGZyb20gJ3Z1ZS1yZWNhcHRjaGEnCmltcG9ydCBIZWFkZXJMb2dpbiBmcm9tICcuLi9jb21wb25lbnRzL0hlYWRlckxvZ2luLnZ1ZScKaW1wb3J0IExhbmd1YWdlIGZyb20gJy4uL2NvbXBvbmVudHMvTGFuZ3VhZ2UudnVlJwppbXBvcnQgeyBuYW1lc3BhY2UgfSBmcm9tICd2dWV4LWNsYXNzJwoKaW1wb3J0IGdldFJlcG9zaXRvcnkgZnJvbSAnQC9zZXJ2aWNlcycKaW1wb3J0IHsgQXV0aFJlcG9zaXRvcnkgfSBmcm9tICdAL3NlcnZpY2VzL3JlcG9zaXRvcmllcy9hdXRoJwoKaW1wb3J0IHsgQ29tcG9uZW50LCBWdWUsIFdhdGNoIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcicKaW1wb3J0IHRyaW0gZnJvbSAnbG9kYXNoL3RyaW0nCmNvbnN0IGFwaUF1dGg6IEF1dGhSZXBvc2l0b3J5ID0gZ2V0UmVwb3NpdG9yeSgnYXV0aCcpCgppbnRlcmZhY2UgRm9ybUxvZ2luIHsKICBwaW46IHN0cmluZwogIHJlcGluOiBzdHJpbmcKfQpjb25zdCBiY0F1dGggPSBuYW1lc3BhY2UoJ2JlQXV0aCcpCgpAQ29tcG9uZW50KHsgY29tcG9uZW50czogeyBWdWVSZWNhcHRjaGEsIEhlYWRlckxvZ2luLCBMYW5ndWFnZSB9IH0pCmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlc2V0UGluIGV4dGVuZHMgVnVlIHsKICBAYmNBdXRoLkdldHRlcignaXNMb2dpbicpIGlzTG9naW4hOiBib29sZWFuCiAgQGJjQXV0aC5BY3Rpb24oJ2xvZ291dCcpIGxvZ291dCE6ICgpID0+IFByb21pc2U8dm9pZD4KICBpc01hdGNoUGFzc3dvcmQgPSB0cnVlCiAgc2hvd1Bhc3MgPSBmYWxzZQogIHNob3dQYXNzMiA9IGZhbHNlCiAgbGFuZ3VhZ2UgPSAnZW4nCiAgZm9ybTogRm9ybUxvZ2luID0gewogICAgcmVwaW46ICcnLAogICAgcGluOiAnJwogIH0KICBpc0xvYWRpbmcgPSBmYWxzZQogIHZpc2libGUgPSBmYWxzZQogIHZpc2libGVSZSA9IGZhbHNlCiAgdmFsaWRhdGU6IFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+ID0gewogICAgbGVuZ3RoOiBmYWxzZSwKICAgIG51bWJlcjogZmFsc2UsCiAgICB1cHBlcmNhc2U6IGZhbHNlLAogICAgbG93ZXJjYXNlOiBmYWxzZSwKICAgIHNwZWNpYWxDaGFyYWN0ZXI6IGZhbHNlCiAgfQogIHZhbGlkYXRlUmVwYXNzd29yZDogUmVjb3JkPHN0cmluZywgYm9vbGVhbj4gPSB7CiAgICBsZW5ndGg6IGZhbHNlLAogICAgbnVtYmVyOiBmYWxzZSwKICAgIHVwcGVyY2FzZTogZmFsc2UsCiAgICBsb3dlcmNhc2U6IGZhbHNlLAogICAgc3BlY2lhbENoYXJhY3RlcjogZmFsc2UKICB9CiAgc2VsZWN0TGFuZ3VhZ2UgPSAnJwoKICBvcHRpb25MYW5ndWFnZTogQXJyYXk8UmVjb3JkPHN0cmluZywgYW55Pj4gPSBbCiAgICB7CiAgICAgIGlkOiAxLAogICAgICBsYW5nOiAnZW4nCiAgICB9LAogICAgewogICAgICBpZDogMiwKICAgICAgbGFuZzogJ3ZpJwogICAgfQogIF0KCiAgcnVsZXM6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7CiAgICBwaW46IFsKICAgICAgewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoJ3Jlc2V0UGluLndyb25nLXBpbicpLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9CiAgICBdLAogICAgcmVwaW46IFsKICAgICAgewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoJ3Jlc2V0UGluLndyb25nLXJlLXBpbicpLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9CiAgICBdCiAgfQoKICAvLyB9CiAgQFdhdGNoKCdmb3JtLnJlcGluJykgd2F0Y2hSZVBhc3N3b3JkKHBhc3M6IHN0cmluZyk6IHZvaWQgewogICAgLy9AdHMtaWdub3JlCiAgICB0aGlzLiRyZWZzWydmb3JtLWxvZ2luJ10/LmZpZWxkcy5maW5kKGYgPT4gZi5wcm9wID09ICdyZXBpbicpLmNsZWFyVmFsaWRhdGUoKQogICAgaWYgKHRoaXMuZm9ybS5waW4gJiYgdGhpcy5mb3JtLnJlcGluKSB7CiAgICAgIHRoaXMuaXNNYXRjaFBhc3N3b3JkID0gISh0aGlzLmZvcm0ucGluICE9PSB0aGlzLmZvcm0ucmVwaW4pCiAgICB9IGVsc2UgewogICAgICB0aGlzLmlzTWF0Y2hQYXNzd29yZCA9IHRydWUKICAgIH0KICB9CgogIGdldCBnZXREaXNhYmxlQnRuKCk6IGJvb2xlYW4gewogICAgcmV0dXJuICEodGhpcy5mb3JtLnBpbiAmJiB0cmltKHRoaXMuZm9ybS5waW4pID09PSB0aGlzLmZvcm0ucmVwaW4gJiYgdHJpbSh0aGlzLmZvcm0ucmVwaW4pKQogIH0KCiAgY3JlYXRlZCgpOiB2b2lkIHsKICAgIHRoaXMubGFuZ3VhZ2UgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2JjLWxhbmcnKSEKICAgIHRoaXMuc2VsZWN0TGFuZ3VhZ2UgPSB0aGlzLmxhbmd1YWdlCiAgfQoKICBoYW5kbGVDaGFuZ2VMYW5ndWFnZSgpOiB2b2lkIHsKICAgIC8vQHRzLWlnbm9yZQogICAgdGhpcy4kcmVmc1snZm9ybS1sb2dpbiddPy5yZXNldEZpZWxkcygpCiAgfQogIGhhbmRsZVJlc2V0UGFzcygpOiB2b2lkIHsKICAgIGlmICh0aGlzLmdldERpc2FibGVCdG4pIHsKICAgICAgcmV0dXJuCiAgICB9CiAgICAvL0B0cy1pZ25vcmUKICAgIHRoaXMuJHJlZnNbJ2Zvcm0tbG9naW4nXT8udmFsaWRhdGUoYXN5bmMgdmFsaWQgPT4gewogICAgICBpZiAodmFsaWQpIHsKICAgICAgICBsZXQgbWVzc2FnZTogYW55ID0gJycKICAgICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWUKICAgICAgICBjb25zdCBkYXRhID0gewogICAgICAgICAgZW1haWw6IHRoaXMuJHJvdXRlLnF1ZXJ5LmVtYWlsLAogICAgICAgICAgdmVyaWZpY2F0aW9uQ29kZTogdGhpcy4kcm91dGUucXVlcnkuY29kZSwKICAgICAgICAgIHBpbjogdGhpcy4kb3B0aW9ucy5maWx0ZXJzPy5lbmNyeXB0UGFzc3dvcmQodGhpcy5mb3JtLnBpbiksCiAgICAgICAgICBwaW5Db25maXJtOiB0aGlzLiRvcHRpb25zLmZpbHRlcnM/LmVuY3J5cHRQYXNzd29yZCh0aGlzLmZvcm0ucmVwaW4pCiAgICAgICAgfQogICAgICAgIGFwaUF1dGgKICAgICAgICAgIC5yZXNldFBpbkNvZGUoZGF0YSkKICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgbWVzc2FnZSA9IHRoaXMuJHQoJ25vdGlmeS5yZXNldC1waW4tc3VjY2VzcycpCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcyh7IG1lc3NhZ2UsIGR1cmF0aW9uOiA1MDAwIH0pCiAgICAgICAgICAgIGlmICh0aGlzLmlzTG9naW4pIHsKICAgICAgICAgICAgICB0aGlzLmxvZ291dCgpLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiAnbG9naW4nIH0pCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICdsb2dpbicgfSkKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlCiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKChlcnJvcjogYW55KSA9PiB7CiAgICAgICAgICAgIGxldCBtZXNzYWdlOiBhbnkgPSAnJwogICAgICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGVycm9yLnJlc3BvbnNlCgogICAgICAgICAgICBpZiAoZGF0YS5zdGF0dXMgPT09ICdFWFBJUkVEX1ZFUklGSUNBVElPTicgfHwgZGF0YS5zdGF0dXMgPT09ICdJTlZBTElEX1ZFUklGSUNBVElPTicpIHsKICAgICAgICAgICAgICBtZXNzYWdlID0gdGhpcy4kdCgnbm90aWZ5LnJlc2V0LXBpbi10aW1lb3V0JykKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHsgbWVzc2FnZSwgZHVyYXRpb246IDUwMDAgfSkKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBtZXNzYWdlID0gdGhpcy4kdCgnbm90aWZ5LnJlc2V0LXBpbi1ub3QtbWF0Y2gnKQogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoeyBtZXNzYWdlLCBkdXJhdGlvbjogNTAwMCB9KQogICAgICAgICAgICB9CgogICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlCiAgICAgICAgICB9KQogICAgICB9CiAgICB9KQogIH0KfQo="},{"version":3,"sources":["ResetPin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"ResetPin.vue","sourceRoot":"src/modules/auth/views","sourcesContent":["<template>\r\n  <div class=\"bc-login\">\r\n    <header-login />\r\n    <div class=\"form\">\r\n      <el-form class=\"form-item\" :model=\"form\" :rules=\"rules\" ref=\"form-login\">\r\n        <div class=\"text-3xl text-semibold text-center mb-2 title-form\">{{ $t('resetPin.title') }}</div>\r\n        <div class=\"label-box\">\r\n          <label for=\"\">{{ $t('label.pin') }}</label>\r\n        </div>\r\n        <el-form-item prop=\"pin\" class=\"input-password\">\r\n          <el-input :type=\"showPass == true ? 'text' : 'password'\" style=\"border-clor: red\" :placeholder=\"$t('placeholder.pin')\" maxlength=\"4\" v-model=\"form.pin\" />\r\n          <!-- <el-input :placeholder=\"$t('placeholder.password')\" type=\"password\" v-model=\"form.password\" /> -->\r\n          <span class=\"icon-show-password\" @click=\"showPass = !showPass\">\r\n            <base-icon :icon=\"showPass == true ? 'icon-eye-off' : 'icon-eye'\" size=\"22\" />\r\n          </span>\r\n        </el-form-item>\r\n        <div class=\"label-box\">\r\n          <label for=\"\">{{ $t('label.repin') }}</label>\r\n        </div>\r\n        <el-form-item prop=\"repin\" class=\"input-password2\">\r\n          <el-input class=\"input-password\" :type=\"showPass2 == true ? 'text' : 'password'\" :placeholder=\"$t('placeholder.repin')\" v-model=\"form.repin\" maxlength=\"4\" />\r\n          <!-- <el-input class=\"input-password\" type=\"password\" :placeholder=\"$t('placeholder.repassword')\" v-model=\"form.repassword\" /> -->\r\n          <span class=\"icon-show-password2\" @click=\"showPass2 = !showPass2\">\r\n            <base-icon :icon=\"showPass2 == true ? 'icon-eye-off' : 'icon-eye'\" size=\"22\" />\r\n          </span>\r\n          <span class=\"small-err\" v-if=\"!isMatchPassword\">{{ $t('validate.password-correct') }}</span>\r\n        </el-form-item>\r\n        <el-button :loading=\"isLoading\" :class=\"getDisableBtn ? 'btn--disabled' : null\" class=\"btn w-100 is-none-border cursor\" @click=\"handleResetPass\"\r\n          >{{ $t('resetPin.submit') }}\r\n        </el-button>\r\n        <!-- <button :class=\"getDisableBtn ? 'btn--disabled' : null\" type=\"button\" class=\"btn is-none-border w-100 cursor\" @click=\"handleResetPass\">{{ $t('resetPass.submit') }}</button> -->\r\n      </el-form>\r\n    </div>\r\n    <!-- <language :isReload=\"false\" @changeLanguage=\"handleChangeLanguage\" /> -->\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\n  import VueRecaptcha from 'vue-recaptcha'\r\n  import HeaderLogin from '../components/HeaderLogin.vue'\r\n  import Language from '../components/Language.vue'\r\n  import { namespace } from 'vuex-class'\r\n\r\n  import getRepository from '@/services'\r\n  import { AuthRepository } from '@/services/repositories/auth'\r\n\r\n  import { Component, Vue, Watch } from 'vue-property-decorator'\r\n  import trim from 'lodash/trim'\r\n  const apiAuth: AuthRepository = getRepository('auth')\r\n\r\n  interface FormLogin {\r\n    pin: string\r\n    repin: string\r\n  }\r\n  const bcAuth = namespace('beAuth')\r\n\r\n  @Component({ components: { VueRecaptcha, HeaderLogin, Language } })\r\n  export default class ResetPin extends Vue {\r\n    @bcAuth.Getter('isLogin') isLogin!: boolean\r\n    @bcAuth.Action('logout') logout!: () => Promise<void>\r\n    isMatchPassword = true\r\n    showPass = false\r\n    showPass2 = false\r\n    language = 'en'\r\n    form: FormLogin = {\r\n      repin: '',\r\n      pin: ''\r\n    }\r\n    isLoading = false\r\n    visible = false\r\n    visibleRe = false\r\n    validate: Record<string, boolean> = {\r\n      length: false,\r\n      number: false,\r\n      uppercase: false,\r\n      lowercase: false,\r\n      specialCharacter: false\r\n    }\r\n    validateRepassword: Record<string, boolean> = {\r\n      length: false,\r\n      number: false,\r\n      uppercase: false,\r\n      lowercase: false,\r\n      specialCharacter: false\r\n    }\r\n    selectLanguage = ''\r\n\r\n    optionLanguage: Array<Record<string, any>> = [\r\n      {\r\n        id: 1,\r\n        lang: 'en'\r\n      },\r\n      {\r\n        id: 2,\r\n        lang: 'vi'\r\n      }\r\n    ]\r\n\r\n    rules: Record<string, any> = {\r\n      pin: [\r\n        {\r\n          required: true,\r\n          message: this.$t('resetPin.wrong-pin'),\r\n          trigger: 'blur'\r\n        }\r\n      ],\r\n      repin: [\r\n        {\r\n          required: true,\r\n          message: this.$t('resetPin.wrong-re-pin'),\r\n          trigger: 'blur'\r\n        }\r\n      ]\r\n    }\r\n\r\n    // }\r\n    @Watch('form.repin') watchRePassword(pass: string): void {\r\n      //@ts-ignore\r\n      this.$refs['form-login']?.fields.find(f => f.prop == 'repin').clearValidate()\r\n      if (this.form.pin && this.form.repin) {\r\n        this.isMatchPassword = !(this.form.pin !== this.form.repin)\r\n      } else {\r\n        this.isMatchPassword = true\r\n      }\r\n    }\r\n\r\n    get getDisableBtn(): boolean {\r\n      return !(this.form.pin && trim(this.form.pin) === this.form.repin && trim(this.form.repin))\r\n    }\r\n\r\n    created(): void {\r\n      this.language = window.localStorage.getItem('bc-lang')!\r\n      this.selectLanguage = this.language\r\n    }\r\n\r\n    handleChangeLanguage(): void {\r\n      //@ts-ignore\r\n      this.$refs['form-login']?.resetFields()\r\n    }\r\n    handleResetPass(): void {\r\n      if (this.getDisableBtn) {\r\n        return\r\n      }\r\n      //@ts-ignore\r\n      this.$refs['form-login']?.validate(async valid => {\r\n        if (valid) {\r\n          let message: any = ''\r\n          this.isLoading = true\r\n          const data = {\r\n            email: this.$route.query.email,\r\n            verificationCode: this.$route.query.code,\r\n            pin: this.$options.filters?.encryptPassword(this.form.pin),\r\n            pinConfirm: this.$options.filters?.encryptPassword(this.form.repin)\r\n          }\r\n          apiAuth\r\n            .resetPinCode(data)\r\n            .then(() => {\r\n              message = this.$t('notify.reset-pin-success')\r\n              this.$message.success({ message, duration: 5000 })\r\n              if (this.isLogin) {\r\n                this.logout().then(() => {\r\n                  this.$router.push({ name: 'login' })\r\n                })\r\n              } else {\r\n                this.$router.push({ name: 'login' })\r\n              }\r\n              this.isLoading = false\r\n            })\r\n            .catch((error: any) => {\r\n              let message: any = ''\r\n              const { data } = error.response\r\n\r\n              if (data.status === 'EXPIRED_VERIFICATION' || data.status === 'INVALID_VERIFICATION') {\r\n                message = this.$t('notify.reset-pin-timeout')\r\n                this.$message.error({ message, duration: 5000 })\r\n              } else {\r\n                message = this.$t('notify.reset-pin-not-match')\r\n                this.$message.error({ message, duration: 5000 })\r\n              }\r\n\r\n              this.isLoading = false\r\n            })\r\n        }\r\n      })\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n  .bc-login {\r\n    background-color: #f6f8fc;\r\n    height: 100vh;\r\n    .error {\r\n      color: var(--bc-status-error);\r\n\r\n      font-size: 12px;\r\n      line-height: 1;\r\n      padding-top: 4px;\r\n      position: absolute;\r\n      top: 100%;\r\n      left: 0;\r\n      margin-bottom: 3px;\r\n    }\r\n    .form {\r\n      width: 512px;\r\n      margin: 40px auto 0;\r\n      box-shadow: 0px 0.6px 1.8px rgba(0, 0, 0, 0.1), 0px 3.2px 7.2px rgba(0, 0, 0, 0.13);\r\n      border-radius: 8px;\r\n      background-color: var(--bc-bg-white);\r\n\r\n      .form-item {\r\n        padding: 30px 24px;\r\n        .title-form {\r\n          color: #201f1e;\r\n        }\r\n      }\r\n\r\n      .btn {\r\n        padding: 12px 0 !important;\r\n        font-size: 16px !important;\r\n        line-height: 24px !important;\r\n      }\r\n      .input-password {\r\n        position: relative;\r\n      }\r\n      .icon-show-password {\r\n        cursor: pointer;\r\n        position: absolute;\r\n        top: 3px;\r\n        right: 14px;\r\n        .span-icon {\r\n          color: var(--bc-color-grey90);\r\n        }\r\n      }\r\n    }\r\n    .label-box {\r\n      margin-bottom: 8px;\r\n      color: var(--bc-table-text-color);\r\n      font-weight: 400;\r\n      font-size: 14px;\r\n    }\r\n    .input-password,\r\n    .input-password2 {\r\n      position: relative;\r\n    }\r\n    .icon-show-password,\r\n    .icon-show-password2 {\r\n      cursor: pointer;\r\n      position: absolute;\r\n      top: 3px;\r\n      right: 14px;\r\n      .span-icon {\r\n        color: var(--bc-color-grey90);\r\n      }\r\n    }\r\n  }\r\n</style>\r\n"]}]}