{"remainingRequest":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\NEU\\CDTT\\frontend\\Website\\src\\modules\\auth\\views\\UnlockUser.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\NEU\\CDTT\\frontend\\Website\\src\\modules\\auth\\views\\UnlockUser.vue","mtime":1660970151295},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660970364629},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\babel-loader\\lib\\index.js","mtime":1660970387821},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\ts-loader\\index.js","mtime":1660970390648},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660970364629},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\vue-loader\\lib\\index.js","mtime":1660970394220}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCmltcG9ydCB7IENvbXBvbmVudCwgVnVlIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcicKaW1wb3J0IGdldFJlcG9zaXRvcnkgZnJvbSAnQC9zZXJ2aWNlcycKaW1wb3J0IEhlYWRlckxvZ2luIGZyb20gJy4uL2NvbXBvbmVudHMvSGVhZGVyTG9naW4udnVlJwoKaW1wb3J0IHsgbmFtZXNwYWNlIH0gZnJvbSAndnVleC1jbGFzcycKaW1wb3J0IHsgQXV0aFJlcG9zaXRvcnkgfSBmcm9tICdAL3NlcnZpY2VzL3JlcG9zaXRvcmllcy9hdXRoJwoKY29uc3QgYXBpQXV0aDogQXV0aFJlcG9zaXRvcnkgPSBnZXRSZXBvc2l0b3J5KCdhdXRoJykKY29uc3QgYmVCYXNlID0gbmFtZXNwYWNlKCdiZUJhc2UnKQpjb25zdCBiY0F1dGggPSBuYW1lc3BhY2UoJ2JlQXV0aCcpCgpAQ29tcG9uZW50KHsgY29tcG9uZW50czogeyBIZWFkZXJMb2dpbiB9IH0pCmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVubG9ja1VzZXIgZXh0ZW5kcyBWdWUgewogIEBiZUJhc2UuU3RhdGUoJ3VybFN5c3RlbScpIHVybFN5c3RlbSE6IFJlY29yZDxzdHJpbmcsIGFueT4KICBAYmNBdXRoLkdldHRlcignaXNMb2dpbicpIGlzTG9naW4hOiBib29sZWFuCiAgQGJjQXV0aC5BY3Rpb24oJ2xvZ291dCcpIGxvZ291dCE6ICgpID0+IFByb21pc2U8dm9pZD4KCiAgaXNMb2FkaW5nID0gZmFsc2UKICBpc1N1Y2Nlc3MgPSB0cnVlCgogIGNyZWF0ZWQoKTogdm9pZCB7CiAgICBjb25zdCBwYXJhbXMgPSB0aGlzLiRyb3V0ZS5xdWVyeQogICAgYXBpQXV0aAogICAgICAudW5sb2NrVXNlcih7IC4uLnBhcmFtcywgdmVyaWZpY2F0aW9uQ29kZTogdGhpcy4kcm91dGUucXVlcnkuY29kZSwgdHlwZTogJ0VNQUlMJyB9KQogICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSB0cnVlCiAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlCiAgICAgICAgaWYgKHRoaXMuaXNMb2dpbikgewogICAgICAgICAgdGhpcy5sb2dvdXQoKQogICAgICAgIH0KICAgICAgfSkKICAgICAgLmNhdGNoKChlcnJvcjogYW55KSA9PiB7CiAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZQogICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gZXJyb3IucmVzcG9uc2UKICAgICAgICBpZiAodGhpcy5pc0xvZ2luKSB7CiAgICAgICAgICB0aGlzLmxvZ291dCgpCiAgICAgICAgfQogICAgICAgIGlmIChkYXRhLnN0YXR1c0NvZGUgPT09IDQwMCAmJiBkYXRhLnN0YXR1cyA9PT0gJ0JBRF9SRVFVRVNUJykgewogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiAnbG9naW4nIH0pCiAgICAgICAgfQogICAgICAgIHRoaXMuaXNTdWNjZXNzID0gZmFsc2UKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZQogICAgICAgIH0sIDUwMCkKICAgICAgfSkKICB9CgogIGhhbmRsZVN1Ym1pdCgpOiB2b2lkIHsKICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogJ2xvZ2luJyB9KQogIH0KfQo="},{"version":3,"sources":["UnlockUser.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"UnlockUser.vue","sourceRoot":"src/modules/auth/views","sourcesContent":["<template>\r\n  <div class=\"bc-verify\">\r\n    <header-login />\r\n    <div class=\"content\" v-if=\"isLoading\">\r\n      <div class=\"be-flex jc-space-center verify-code\">\r\n        <base-icon v-if=\"isSuccess\" icon=\"icon-unlock-succsess\" size=\"80\" />\r\n        <base-icon v-else icon=\"icon-unlock-failed\" size=\"80\" />\r\n      </div>\r\n      <div class=\"text-3xl text-bold text-center mb-24 title\">\r\n        <span v-if=\"isSuccess\">{{ $t('verify.title-unlock-succsess') }}</span>\r\n        <span v-else>{{ $t('verify.title-unlock-failed') }}</span>\r\n      </div>\r\n      <div class=\"text-base text-center mb-24 des\">\r\n        <span v-if=\"isSuccess\">{{ $t('verify.des-unlock-succsess') }}</span>\r\n        <span v-else>{{ $t('verify.des-unlock-failed') }} {{ urlSystem['system.token.support_email'] }}</span>\r\n      </div>\r\n      <el-button class=\"btn w-100 is-none-border cursor\" @click=\"handleSubmit\">{{ $t('verify.continue') }} </el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\n  import { Component, Vue } from 'vue-property-decorator'\r\n  import getRepository from '@/services'\r\n  import HeaderLogin from '../components/HeaderLogin.vue'\r\n\r\n  import { namespace } from 'vuex-class'\r\n  import { AuthRepository } from '@/services/repositories/auth'\r\n\r\n  const apiAuth: AuthRepository = getRepository('auth')\r\n  const beBase = namespace('beBase')\r\n  const bcAuth = namespace('beAuth')\r\n\r\n  @Component({ components: { HeaderLogin } })\r\n  export default class UnlockUser extends Vue {\r\n    @beBase.State('urlSystem') urlSystem!: Record<string, any>\r\n    @bcAuth.Getter('isLogin') isLogin!: boolean\r\n    @bcAuth.Action('logout') logout!: () => Promise<void>\r\n\r\n    isLoading = false\r\n    isSuccess = true\r\n\r\n    created(): void {\r\n      const params = this.$route.query\r\n      apiAuth\r\n        .unlockUser({ ...params, verificationCode: this.$route.query.code, type: 'EMAIL' })\r\n        .then(() => {\r\n          this.isSuccess = true\r\n          this.isLoading = true\r\n          if (this.isLogin) {\r\n            this.logout()\r\n          }\r\n        })\r\n        .catch((error: any) => {\r\n          this.isLoading = false\r\n          const { data } = error.response\r\n          if (this.isLogin) {\r\n            this.logout()\r\n          }\r\n          if (data.statusCode === 400 && data.status === 'BAD_REQUEST') {\r\n            this.$router.push({ name: 'login' })\r\n          }\r\n          this.isSuccess = false\r\n          setTimeout(() => {\r\n            this.isLoading = true\r\n          }, 500)\r\n        })\r\n    }\r\n\r\n    handleSubmit(): void {\r\n      this.$router.push({ name: 'login' })\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n  .bc-verify {\r\n    background-color: #f6f8fc;\r\n    height: 100vh;\r\n    .content {\r\n      width: 512px;\r\n      margin: 40px auto 0;\r\n      padding: 30px 24px;\r\n      box-shadow: 0 0.6px 1.8px rgba(0, 0, 0, 0.1), 0 3.2px 7.2px rgba(0, 0, 0, 0.13);\r\n      border-radius: 8px;\r\n      background-color: var(--bc-bg-white);\r\n\r\n      .des {\r\n        padding: 0 14px;\r\n      }\r\n    }\r\n  }\r\n  .btn {\r\n    padding: 12px 0 !important;\r\n    font-size: 16px !important;\r\n    line-height: 24px !important;\r\n  }\r\n  .title-form {\r\n    color: #201f1e;\r\n    margin-bottom: 3px;\r\n  }\r\n  .input-code {\r\n    margin-top: 17px;\r\n  }\r\n</style>\r\n"]}]}