{"remainingRequest":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\NEU\\CDTT\\frontend\\Website\\src\\modules\\setting\\components\\popup\\PopupChangeNumberPhone.vue?vue&type=style&index=0&id=27e00bb5&scoped=true&lang=scss&","dependencies":[{"path":"D:\\NEU\\CDTT\\frontend\\Website\\src\\modules\\setting\\components\\popup\\PopupChangeNumberPhone.vue","mtime":1660123011572},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\css-loader\\dist\\cjs.js","mtime":1660970368992},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1660970411845},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\postcss-loader\\src\\index.js","mtime":1660970387688},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1660970364303},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660970364629},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\vue-loader\\lib\\index.js","mtime":1660970394220}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnBvcHVwLWNoYW5nZS1udW1iZXItcGhvbmUgewogIC5jb250ZW50IHsKICAgIHBhZGRpbmctYm90dG9tOiAyNHB4OwogICAgLmxhYmVsIHsKICAgICAgbWFyZ2luLXRvcDogMjRweDsKICAgICAgY29sb3I6IHZhcigtLWJjLXRleHQtcHJpbWFyeSk7CiAgICAgIC5yZXF1aXJlZCB7CiAgICAgICAgY29sb3I6IHZhcigtLWJjLXJlcXVpcmVkKTsKICAgICAgfQogICAgfQogICAgLmVsLXNlbGVjdCB7CiAgICAgIHdpZHRoOiAxMDAlOwogICAgfQogICAgLmlucHV0LW5ldy1waG9uZSB7CiAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgIG1hcmdpbi10b3A6IDhweDsKICAgICAgLm1pbmktYm94IHsKICAgICAgICB3aWR0aDogNDhweDsKICAgICAgICBoZWlnaHQ6IDQ4cHg7CiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmMtY29sb3ItZ3JleTIwKTsKICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgbGluZS1oZWlnaHQ6IDQ4cHg7CiAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDsKICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgICAgY29sb3I6IHZhcigtLWJjLXRleHQtZGlzY3JpcHQpOwogICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYy1jb2xvci1ncmV5NTApOwogICAgICAgIGJvcmRlci1yYWRpdXM6IDRweCAwIDAgNHB4OwogICAgICAgIGJvcmRlci1yaWdodDogbm9uZTsKICAgICAgfQogICAgfQogIH0KICAuZm9vdGVyIHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kOwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIC5idG4tYWN0aW9uIHsKICAgICAgd2lkdGg6IDEwMHB4OwogICAgICBoZWlnaHQ6IDQwcHg7CiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgbGluZS1oZWlnaHQ6IDQwcHg7CiAgICAgIGZvbnQtc2l6ZTogMTZweDsKICAgICAgZm9udC13ZWlnaHQ6IDQwMDsKICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICBib3JkZXItcmFkaXVzOiA2cHg7CiAgICAgICY6aG92ZXIgewogICAgICAgIGNvbG9yOiB2YXIoLS1iYy1idG4tZGVmYXVsdC10ZXh0LWhvdmVyKTsKICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYy1idG4tZGVmYXVsdC1ib3JkZXItaG92ZXIpOwogICAgICB9CiAgICB9CiAgICAuYnRuLWNsb3NlIHsKICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmMtY29sb3Itd2hpdGUpOwogICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYy1jb2xvci1ncmV5NTApOwogICAgICBjb2xvcjogdmFyKC0tYmMtY29sb3ItZ3JleTE1MCk7CiAgICAgIG1hcmdpbi1yaWdodDogMTZweDsKICAgICAgJjpob3ZlciB7CiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1iYy1idG4tZGVmYXVsdC1ib3JkZXItaG92ZXIpOwogICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJjLWJ0bi1kZWZhdWx0LXRleHQtaG92ZXIpOwogICAgICAgIC13ZWJraXQtYmFja2dyb3VuZC1jbGlwOiB0ZXh0OwogICAgICAgIC13ZWJraXQtdGV4dC1maWxsLWNvbG9yOiB0cmFuc3BhcmVudDsKICAgICAgfQogICAgfQogICAgLmJ0bi1zdWJtaXQgewogICAgICBib3JkZXI6IG5vbmU7CiAgICAgIGNvbG9yOiB2YXIoLS1iYy1jb2xvci13aGl0ZSk7CiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJjLXRoZW1lLXByaW1hcnktZ3JhZGllbnQpOwogICAgICAmOmhvdmVyIHsKICAgICAgICBib3JkZXI6IG5vbmU7CiAgICAgICAgY29sb3I6IHZhcigtLWJjLWNvbG9yLXdoaXRlKTsKICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYy10aGVtZS1wcmltYXJ5LWdyYWRpZW50LWhvdmVyKSAhaW1wb3J0YW50OwogICAgICB9CiAgICB9CiAgfQp9CkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDc2OHB4KSB7CiAgOjp2LWRlZXAucG9wdXAtY2hhbmdlLW51bWJlci1waG9uZXsKICAgIC5lbC1kaWFsb2d7CiAgICAgIHdpZHRoOiAzMzVweCAhaW1wb3J0YW50OwogICAgICAmX19oZWFkZXJ7CiAgICAgICAgLnRpdGxlewogICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDsKICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDsKICAgICAgICAgIGxpbmUtaGVpZ2h0OiAyNHB4OwogICAgICAgIH0KICAgICAgfQogICAgICAmX19ib2R5ewogICAgICAgIC5wb3B1cC1jb250ZW50ewogICAgICAgICAgLmNvbnRlbnR7CiAgICAgICAgICAgIC5taW5pLWJveHsKICAgICAgICAgICAgICBtaW4td2lkdGg6IDQ4cHg7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgJl9fZm9vdGVyewogICAgICAgIC5wb3B1cC1mb290ZXJ7CiAgICAgICAgICAuYnRuLWFjdGlvbnsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDIwcHg7CiAgICAgICAgICB9CiAgICAgICAgICAuYnRuLWNsb3NlewogICAgICAgICAgICBjb2xvcjogIzVCNjE2RTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9Cn0K"},{"version":3,"sources":["PopupChangeNumberPhone.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PopupChangeNumberPhone.vue","sourceRoot":"src/modules/setting/components/popup","sourcesContent":["<template>\r\n  <base-popup name=\"popup-change-number-phone\" class=\"popup-change-number-phone\" width=\"480px\" :open=\"handleOpen\" :close=\"handleClose\">\r\n    <div slot=\"title\">\r\n      <span>{{ $t('popupChangeNumberPhone.title') }}</span>\r\n    </div>\r\n    <div class=\"content\">\r\n      <el-form class=\"form-change-number-phone\" ref=\"dataInput\" :model=\"form\" :rules=\"rules\">\r\n        <div class=\"label\" style=\"margin-top: 0px\">{{ $t('popupChangeNumberPhone.label1') }} <span class=\"required\">*</span></div>\r\n        <!-- <el-form-item prop=\"value\">\r\n          <el-select v-model=\"dataInput.value\">\r\n            <el-option v-for=\"item in options\" :key=\"item.id\" :label=\"item.label\" :value=\"item.id\"></el-option>\r\n          </el-select>\r\n        </el-form-item> -->\r\n        <el-form-item prop=\"country\">\r\n          <el-select v-model=\"form.country\" filterable reserve-keyword remote :remote-method=\"remoteCountry\" clearable @change=\"handleSelectCountry\">\r\n            <el-option v-for=\"(country, index) in listCountry\" :key=\"index\" :label=\"country.name\" :value=\"country.name\" />\r\n          </el-select>\r\n        </el-form-item>\r\n        <!-- <el-input></el-input> -->\r\n        <div class=\"label\">{{ $t('popupChangeNumberPhone.label2') }} <span class=\"required\">*</span></div>\r\n        <div class=\"input-new-phone\">\r\n          <div class=\"mini-box\">{{ form.countryCode }}</div>\r\n          <el-form-item prop=\"newPhone\" class=\"input-phone\">\r\n            <el-input v-model=\"form.newPhone\" @keyup.native=\"numberFormat($event)\"></el-input>\r\n          </el-form-item>\r\n        </div>\r\n      </el-form>\r\n    </div>\r\n    <div slot=\"footer\" class=\"footer\">\r\n      <div @click=\"handleClose\" class=\"btn-action btn-close\">{{ $t('popupChangeNumberPhone.cancel') }}</div>\r\n      <div @click=\"handleSubmit\" class=\"btn-action btn-submit\">{{ $t('popupChangeNumberPhone.continue') }}</div>\r\n    </div>\r\n  </base-popup>\r\n</template>\r\n<script lang=\"ts\">\r\n  import { Component, Mixins, Prop, Watch } from 'vue-property-decorator'\r\n  import PopupMixin from '@/mixins/popup'\r\n  import countryJson from '@/utils/country/index.json'\r\n  import filter from 'lodash/filter'\r\n  import trim from 'lodash/trim'\r\n  import debounce from 'lodash/debounce'\r\n  import getRepository from '@/services'\r\n  import { SettingRepository } from '@/services/repositories/setting'\r\n\r\n  interface IListCountry {\r\n    name: string\r\n    dial_code: string\r\n    code: string\r\n  }\r\n  const api: SettingRepository = getRepository('setting')\r\n  @Component({ components: {} })\r\n  export default class PopupChangeNumberPhone extends Mixins(PopupMixin) {\r\n    @Prop({ required: true, type: Object, default: () => ({}) }) info!: Record<string, any>\r\n    listCountry: IListCountry[] = countryJson\r\n    form: any = {\r\n      country: '',\r\n      newPhone: '',\r\n      countryCode: ''\r\n    }\r\n    rules: any = {\r\n      country: [\r\n        {\r\n          required: true,\r\n          message: this.$t('popupChangeNumberPhone.wrong-country'),\r\n          trigger: 'blur'\r\n        }\r\n      ],\r\n      newPhone: [\r\n        {\r\n          required: true,\r\n          message: this.$t('popupChangeNumberPhone.wrong-new-phone'),\r\n          trigger: 'blur'\r\n        }\r\n      ]\r\n    }\r\n    @Watch('form.country')\r\n    clearCountry(value: any) {\r\n      if (!value) {\r\n        this.listCountry = countryJson\r\n      }\r\n    }\r\n    remoteCountry(query: string): void {\r\n      if (query) {\r\n        this.listCountry = filter(\r\n          countryJson,\r\n          country => trim(country.code).toUpperCase().includes(query.toUpperCase()) || trim(country.name).toUpperCase().includes(query.toUpperCase())\r\n        )\r\n        // if (currentCountry.length > 0) {\r\n        //   this.listCountry = currentCountry\r\n        // }\r\n      } else if (!query) {\r\n        this.listCountry = countryJson\r\n      }\r\n    }\r\n    handleReset(): void {\r\n      this.form = {\r\n        country: '',\r\n        newPhone: '',\r\n        countryCode: ''\r\n      }\r\n      if (this.$refs.dataInput) {\r\n        //@ts-ignore\r\n        this.$refs.dataInput.clearValidate()\r\n      }\r\n    }\r\n    validateForm(): boolean {\r\n      let formInput: any = this.$refs.dataInput\r\n      let valid = false\r\n      formInput.validate((_valid: boolean) => {\r\n        valid = _valid\r\n      })\r\n      return valid\r\n    }\r\n    handleOpen(): void {\r\n      const currentCountry = filter(this.listCountry, country => country.code === 'VN')[0]\r\n      this.form.country = currentCountry.name\r\n      this.form.countryCode = currentCountry.dial_code\r\n    }\r\n    handleClose(): void {\r\n      this.handleReset()\r\n      this.setOpenPopup({\r\n        popupName: 'popup-change-number-phone',\r\n        isOpen: false\r\n      })\r\n    }\r\n    // debounce chan doble click\r\n    debounceFilter = debounce((nameAction: any) => {\r\n      if (nameAction == 'handleSubmit') {\r\n        this.submit()\r\n      }\r\n    }, 400)\r\n    async handleSubmit(): Promise<void> {\r\n      const valid = this.validateForm()\r\n      if (valid) {\r\n        this.debounceFilter('handleSubmit')\r\n      }\r\n    }\r\n    async submit(): Promise<void> {\r\n      if (this.info.phoneVerified) {\r\n        await api.changePhone(this.form)\r\n        this.$emit('apply', 'popup-verification', this.form)\r\n      } else {\r\n        await api.changePhone(this.form, { status: 'unverified' })\r\n        this.$emit('apply', 'popup-verify-phone', this.form)\r\n      }\r\n\r\n      this.handleClose()\r\n    }\r\n    handleSelectCountry(country: string): void {\r\n      this.form.countryCode = filter(this.listCountry, item => item.name === country)[0].dial_code\r\n    }\r\n    numberFormat(event: FocusEvent): void {\r\n      const _event: any = event\r\n      let fnumber = _event.target.value\r\n      if (!isNaN(parseInt(fnumber))) {\r\n        if (fnumber.length == 1 && fnumber == '0') {\r\n          _event.target.value = ''\r\n        } else if (fnumber.length > 1 && fnumber.slice(0, 1) == '0') {\r\n          _event.target.value = ''\r\n        } else {\r\n          _event.target.value = fnumber\r\n        }\r\n      } else {\r\n        _event.target.value = ''\r\n      }\r\n    }\r\n    // @Watch('form.newPhone')\r\n    // changeNewPhone(phone: any): void {\r\n    //   if (phone.length == 1 && phone == '0') {\r\n    //     this.form.newPhone = ''\r\n    //   } else if (phone.length > 1 && phone.slice(0, 1) == '0') {\r\n    //     this.form.newPhone = ''\r\n    //   }\r\n    // }\r\n  }\r\n</script>\r\n<style scoped lang=\"scss\">\r\n  .popup-change-number-phone {\r\n    .content {\r\n      padding-bottom: 24px;\r\n      .label {\r\n        margin-top: 24px;\r\n        color: var(--bc-text-primary);\r\n        .required {\r\n          color: var(--bc-required);\r\n        }\r\n      }\r\n      .el-select {\r\n        width: 100%;\r\n      }\r\n      .input-new-phone {\r\n        display: flex;\r\n        margin-top: 8px;\r\n        .mini-box {\r\n          width: 48px;\r\n          height: 48px;\r\n          background: var(--bc-color-grey20);\r\n          text-align: center;\r\n          line-height: 48px;\r\n          font-weight: 400;\r\n          font-size: 14px;\r\n          color: var(--bc-text-discript);\r\n          display: inline-block;\r\n          border: 1px solid var(--bc-color-grey50);\r\n          border-radius: 4px 0 0 4px;\r\n          border-right: none;\r\n        }\r\n      }\r\n    }\r\n    .footer {\r\n      display: flex;\r\n      justify-content: flex-end;\r\n      align-items: center;\r\n      .btn-action {\r\n        width: 100px;\r\n        height: 40px;\r\n        text-align: center;\r\n        line-height: 40px;\r\n        font-size: 16px;\r\n        font-weight: 400;\r\n        cursor: pointer;\r\n        border-radius: 6px;\r\n        &:hover {\r\n          color: var(--bc-btn-default-text-hover);\r\n          border: 1px solid var(--bc-btn-default-border-hover);\r\n        }\r\n      }\r\n      .btn-close {\r\n        background: var(--bc-color-white);\r\n        border: 1px solid var(--bc-color-grey50);\r\n        color: var(--bc-color-grey150);\r\n        margin-right: 16px;\r\n        &:hover {\r\n          border-color: var(--bc-btn-default-border-hover);\r\n          background: var(--bc-btn-default-text-hover);\r\n          -webkit-background-clip: text;\r\n          -webkit-text-fill-color: transparent;\r\n        }\r\n      }\r\n      .btn-submit {\r\n        border: none;\r\n        color: var(--bc-color-white);\r\n        background: var(--bc-theme-primary-gradient);\r\n        &:hover {\r\n          border: none;\r\n          color: var(--bc-color-white);\r\n          background: var(--bc-theme-primary-gradient-hover) !important;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  @media screen and (max-width: 768px) {\r\n    ::v-deep.popup-change-number-phone{\r\n      .el-dialog{\r\n        width: 335px !important;\r\n        &__header{\r\n          .title{\r\n            font-weight: 600;\r\n            font-size: 16px;\r\n            line-height: 24px;\r\n          }\r\n        }\r\n        &__body{\r\n          .popup-content{\r\n            .content{\r\n              .mini-box{\r\n                min-width: 48px;\r\n              }\r\n            }\r\n          }\r\n        }\r\n        &__footer{\r\n          .popup-footer{\r\n            .btn-action{\r\n              display: flex;\r\n              align-items: center;\r\n              justify-content: center;\r\n              font-weight: 600;\r\n              font-size: 14px;\r\n              line-height: 20px;\r\n            }\r\n            .btn-close{\r\n              color: #5B616E;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n"]}]}