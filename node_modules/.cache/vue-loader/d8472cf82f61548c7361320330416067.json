{"remainingRequest":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\NEU\\CDTT\\frontend\\Website\\src\\modules\\setting\\components\\popup\\PopupVerification.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\NEU\\CDTT\\frontend\\Website\\src\\modules\\setting\\components\\popup\\PopupVerification.vue","mtime":1660123011575},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660970364629},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\babel-loader\\lib\\index.js","mtime":1660970387821},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\ts-loader\\index.js","mtime":1660970390648},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660970364629},{"path":"D:\\NEU\\CDTT\\frontend\\Website\\node_modules\\vue-loader\\lib\\index.js","mtime":1660970394220}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0IHsgQ29tcG9uZW50LCBNaXhpbnMsIFByb3AgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJwppbXBvcnQgUG9wdXBNaXhpbiBmcm9tICdAL21peGlucy9wb3B1cCcKaW1wb3J0IGdldFJlcG9zaXRvcnkgZnJvbSAnQC9zZXJ2aWNlcycKaW1wb3J0IHsgU2V0dGluZ1JlcG9zaXRvcnkgfSBmcm9tICdAL3NlcnZpY2VzL3JlcG9zaXRvcmllcy9zZXR0aW5nJwppbXBvcnQgZGVib3VuY2UgZnJvbSAnbG9kYXNoL2RlYm91bmNlJwppbnRlcmZhY2UgSUxpc3RDb3VudHJ5IHsKICBuYW1lOiBzdHJpbmcKICBkaWFsQ29kZTogc3RyaW5nCiAgaXNvQ29kZTogc3RyaW5nCiAgZmxhZzogc3RyaW5nCn0KY29uc3QgYXBpOiBTZXR0aW5nUmVwb3NpdG9yeSA9IGdldFJlcG9zaXRvcnkoJ3NldHRpbmcnKQpAQ29tcG9uZW50KHsgY29tcG9uZW50czoge30gfSkKZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBWZXJpZmljYXRpb24gZXh0ZW5kcyBNaXhpbnMoUG9wdXBNaXhpbikgewogIEBQcm9wKCkgc3RhZ2UhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+CiAgZGF0YUlucHV0OiBhbnkgPSB7CiAgICB2ZXJpZmljYXRpb25Db2RlT2xkUGhvbmU6ICcnLAogICAgdmVyaWZpY2F0aW9uQ29kZU5ld1Bob25lOiAnJywKICAgIGNvdW50cnlDb2RlOiAnJywKICAgIGNvdW50cnk6ICcnLAogICAgbmV3UGhvbmU6ICcnCiAgfQogIHJ1bGVzOiBhbnkgPSB7CiAgICB2ZXJpZmljYXRpb25Db2RlT2xkUGhvbmU6IFsKICAgICAgewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoJ3ZlcmlmaWNhdGlvbi53cm9uZy1vbGRQaG9uZScpLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9LAogICAgICB7CiAgICAgICAgbGVuOiA2LAogICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoJ2NoYW5nZVBhc3N3b3JkLmVycm9yTGVuZ3RoVmVyaWZpY2F0aW9uQ29kZScpLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9CiAgICBdLAogICAgdmVyaWZpY2F0aW9uQ29kZU5ld1Bob25lOiBbCiAgICAgIHsKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCd2ZXJpZmljYXRpb24ud3JvbmctbmV3UGhvbmUnKSwKICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgfSwKICAgICAgewogICAgICAgIGxlbjogNiwKICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdjaGFuZ2VQYXNzd29yZC5lcnJvckxlbmd0aFZlcmlmaWNhdGlvbkNvZGUnKSwKICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgfQogICAgXQogIH0KICBoYW5kbGVSZXNldCgpOiB2b2lkIHsKICAgIHRoaXMuZGF0YUlucHV0ID0gewogICAgICB2ZXJpZmljYXRpb25Db2RlT2xkUGhvbmU6ICcnLAogICAgICB2ZXJpZmljYXRpb25Db2RlTmV3UGhvbmU6ICcnLAogICAgICBjb3VudHJ5Q29kZTogJycsCiAgICAgIGNvdW50cnk6ICcnLAogICAgICBuZXdQaG9uZTogJycKICAgIH0KICAgIGlmICh0aGlzLiRyZWZzLmRhdGFJbnB1dCkgewogICAgICAvL0B0cy1pZ25vcmUKICAgICAgdGhpcy4kcmVmcy5kYXRhSW5wdXQuY2xlYXJWYWxpZGF0ZSgpCiAgICB9CiAgfQogIHZhbGlkYXRlRm9ybSgpOiBib29sZWFuIHsKICAgIGxldCBmb3JtSW5wdXQ6IGFueSA9IHRoaXMuJHJlZnMuZGF0YUlucHV0CiAgICBsZXQgdmFsaWQgPSBmYWxzZQogICAgZm9ybUlucHV0LnZhbGlkYXRlKChfdmFsaWQ6IGJvb2xlYW4pID0+IHsKICAgICAgdmFsaWQgPSBfdmFsaWQKICAgIH0pCiAgICByZXR1cm4gdmFsaWQKICB9CiAgaGFuZGxlT3BlbigpOiB2b2lkIHsKICAgIHRoaXMuZGF0YUlucHV0LmNvdW50cnlDb2RlID0gdGhpcy5zdGFnZS5jb3VudHJ5Q29kZQogICAgdGhpcy5kYXRhSW5wdXQuY291bnRyeSA9IHRoaXMuc3RhZ2UuY291bnRyeQogICAgdGhpcy5kYXRhSW5wdXQubmV3UGhvbmUgPSB0aGlzLnN0YWdlLm5ld1Bob25lCiAgfQogIGhhbmRsZUNsb3NlKCk6IHZvaWQgewogICAgdGhpcy5oYW5kbGVSZXNldCgpCiAgICB0aGlzLnNldE9wZW5Qb3B1cCh7CiAgICAgIHBvcHVwTmFtZTogJ3BvcHVwLXZlcmlmaWNhdGlvbicsCiAgICAgIGlzT3BlbjogZmFsc2UKICAgIH0pCiAgfQogIC8vIGRlYm91bmNlIGNoYW4gZG9ibGUgY2xpY2sKICBkZWJvdW5jZUZpbHRlciA9IGRlYm91bmNlKChuYW1lQWN0aW9uOiBhbnkpID0+IHsKICAgIGlmIChuYW1lQWN0aW9uID09ICdoYW5kbGVTdWJtaXQnKSB7CiAgICAgIHRoaXMuc3VibWl0KCkKICAgIH0KICB9LCA0MDApCiAgYXN5bmMgaGFuZGxlU3VibWl0KCk6IFByb21pc2U8dm9pZD4gewogICAgY29uc3QgdmFsaWQgPSB0aGlzLnZhbGlkYXRlRm9ybSgpCiAgICBpZiAodmFsaWQpIHsKICAgICAgdGhpcy5kZWJvdW5jZUZpbHRlcignaGFuZGxlU3VibWl0JykKICAgIH0KICB9CiAgYXN5bmMgc3VibWl0KCk6IFByb21pc2U8dm9pZD4gewogICAgYXdhaXQgYXBpCiAgICAgIC5jaGFuZ2VQaG9uZVZlcmlmaWNhdGlvbih0aGlzLmRhdGFJbnB1dCkKICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgIGxldCBtZXNzYWdlOiBhbnkgPSB0aGlzLiR0KCdub3RpZnkudmVyaWZ5LXN1Y2Nlc3MnKQogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhtZXNzYWdlKQogICAgICAgIHRoaXMuJGVtaXQoJ2FwcGx5JykKICAgICAgICB0aGlzLmhhbmRsZUNsb3NlKCkKICAgICAgfSkKICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikKICAgICAgfSkKICB9CiAgYXN5bmMgaGFuZGxlUmVzZW5kQ29kZShzdHJpbmc6IHN0cmluZyk6IFByb21pc2U8dm9pZD4gewogICAgaWYgKHN0cmluZykgewogICAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgICAgcmVzZW5kQ29kZTogc3RyaW5nCiAgICAgIH0KICAgICAgYXBpLmNoYW5nZVBob25lKHRoaXMuc3RhZ2UsIHBhcmFtcykudGhlbigoKSA9PiB7CiAgICAgICAgbGV0IG1lc3NhZ2U6IGFueSA9IHRoaXMuJHQoJ3ZlcmlmaWVkLnJlc2VuZENvZGVNZXNzJykKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MobWVzc2FnZSkKICAgICAgfSkKICAgICAgLy8gLmNhdGNoKCgpID0+IHsKICAgICAgLy8gICBsZXQgbWVzc2FnZTogYW55ID0gdGhpcy4kdCgnbm90aWZ5LnVzZXItYmxvY2tlZC1yZXNlbmQtY29kZScpCiAgICAgIC8vICAgdGhpcy4kbWVzc2FnZS5lcnJvcihtZXNzYWdlKQogICAgICAvLyB9KQogICAgfQogIH0KfQo="},{"version":3,"sources":["PopupVerification.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PopupVerification.vue","sourceRoot":"src/modules/setting/components/popup","sourcesContent":["<template>\r\n  <base-popup name=\"popup-verification\" class=\"popup-verification\" width=\"480px\" :open=\"handleOpen\" :close=\"handleClose\" :isShowFooter=\"false\">\r\n    <div slot=\"title\">\r\n      <span>{{ $t('verification.title') }}</span>\r\n    </div>\r\n    <div class=\"content\">\r\n      <el-form class=\"form-verification\" ref=\"dataInput\" :model=\"dataInput\" :rules=\"rules\">\r\n        <div class=\"big-title\">{{ $t('verification.bigTitle') }}</div>\r\n        <div class=\"label\" style=\"margin-top: 0px\">{{ $t('verification.label1') }}</div>\r\n        <el-form-item prop=\"verificationCodeOldPhone\" class=\"input-phone1\">\r\n          <el-input v-model=\"dataInput.verificationCodeOldPhone\" maxlength=\"6\" :placeholder=\"$t('verification.placeholder')\"></el-input>\r\n          <div class=\"btn-resend-code1\" @click=\"handleResendCode('old')\">{{ $t('verification.sendCode') }}</div>\r\n        </el-form-item>\r\n        <div class=\"label\">{{ $t('verification.label2') }}</div>\r\n        <el-form-item prop=\"verificationCodeNewPhone\" class=\"input-phone2\">\r\n          <el-input v-model=\"dataInput.verificationCodeNewPhone\" maxlength=\"6\" :placeholder=\"$t('verification.placeholder')\"></el-input>\r\n          <div class=\"btn-resend-code2\" @click=\"handleResendCode('new')\">{{ $t('verification.sendCode') }}</div>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div @click=\"handleSubmit\" class=\"btn-action btn-submit\">{{ $t('verification.submit') }}</div>\r\n    </div>\r\n  </base-popup>\r\n</template>\r\n<script lang=\"ts\">\r\n  import { Component, Mixins, Prop } from 'vue-property-decorator'\r\n  import PopupMixin from '@/mixins/popup'\r\n  import getRepository from '@/services'\r\n  import { SettingRepository } from '@/services/repositories/setting'\r\n  import debounce from 'lodash/debounce'\r\n  interface IListCountry {\r\n    name: string\r\n    dialCode: string\r\n    isoCode: string\r\n    flag: string\r\n  }\r\n  const api: SettingRepository = getRepository('setting')\r\n  @Component({ components: {} })\r\n  export default class PopupVerification extends Mixins(PopupMixin) {\r\n    @Prop() stage!: Record<string, any>\r\n    dataInput: any = {\r\n      verificationCodeOldPhone: '',\r\n      verificationCodeNewPhone: '',\r\n      countryCode: '',\r\n      country: '',\r\n      newPhone: ''\r\n    }\r\n    rules: any = {\r\n      verificationCodeOldPhone: [\r\n        {\r\n          required: true,\r\n          message: this.$t('verification.wrong-oldPhone'),\r\n          trigger: 'blur'\r\n        },\r\n        {\r\n          len: 6,\r\n          message: this.$t('changePassword.errorLengthVerificationCode'),\r\n          trigger: 'blur'\r\n        }\r\n      ],\r\n      verificationCodeNewPhone: [\r\n        {\r\n          required: true,\r\n          message: this.$t('verification.wrong-newPhone'),\r\n          trigger: 'blur'\r\n        },\r\n        {\r\n          len: 6,\r\n          message: this.$t('changePassword.errorLengthVerificationCode'),\r\n          trigger: 'blur'\r\n        }\r\n      ]\r\n    }\r\n    handleReset(): void {\r\n      this.dataInput = {\r\n        verificationCodeOldPhone: '',\r\n        verificationCodeNewPhone: '',\r\n        countryCode: '',\r\n        country: '',\r\n        newPhone: ''\r\n      }\r\n      if (this.$refs.dataInput) {\r\n        //@ts-ignore\r\n        this.$refs.dataInput.clearValidate()\r\n      }\r\n    }\r\n    validateForm(): boolean {\r\n      let formInput: any = this.$refs.dataInput\r\n      let valid = false\r\n      formInput.validate((_valid: boolean) => {\r\n        valid = _valid\r\n      })\r\n      return valid\r\n    }\r\n    handleOpen(): void {\r\n      this.dataInput.countryCode = this.stage.countryCode\r\n      this.dataInput.country = this.stage.country\r\n      this.dataInput.newPhone = this.stage.newPhone\r\n    }\r\n    handleClose(): void {\r\n      this.handleReset()\r\n      this.setOpenPopup({\r\n        popupName: 'popup-verification',\r\n        isOpen: false\r\n      })\r\n    }\r\n    // debounce chan doble click\r\n    debounceFilter = debounce((nameAction: any) => {\r\n      if (nameAction == 'handleSubmit') {\r\n        this.submit()\r\n      }\r\n    }, 400)\r\n    async handleSubmit(): Promise<void> {\r\n      const valid = this.validateForm()\r\n      if (valid) {\r\n        this.debounceFilter('handleSubmit')\r\n      }\r\n    }\r\n    async submit(): Promise<void> {\r\n      await api\r\n        .changePhoneVerification(this.dataInput)\r\n        .then(() => {\r\n          let message: any = this.$t('notify.verify-success')\r\n          this.$message.success(message)\r\n          this.$emit('apply')\r\n          this.handleClose()\r\n        })\r\n        .catch(error => {\r\n          console.log(error)\r\n        })\r\n    }\r\n    async handleResendCode(string: string): Promise<void> {\r\n      if (string) {\r\n        const params = {\r\n          resendCode: string\r\n        }\r\n        api.changePhone(this.stage, params).then(() => {\r\n          let message: any = this.$t('verified.resendCodeMess')\r\n          this.$message.success(message)\r\n        })\r\n        // .catch(() => {\r\n        //   let message: any = this.$t('notify.user-blocked-resend-code')\r\n        //   this.$message.error(message)\r\n        // })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style scoped lang=\"scss\">\r\n  .popup-verification {\r\n    .content {\r\n      padding-bottom: 24px;\r\n      .label {\r\n        margin-top: 24px !important;\r\n        color: var(--bc-text-primary);\r\n        font-size: 14px;\r\n        font-weight: 400;\r\n      }\r\n      .big-title {\r\n        text-align: center;\r\n        font-weight: 600;\r\n        font-size: 24px;\r\n        color: var(--bc-text-primary);\r\n        word-break: break-word;\r\n      }\r\n      .form-verification {\r\n        .input-phone1,\r\n        .input-phone2 {\r\n          position: relative;\r\n        }\r\n        .btn-resend-code1,\r\n        .btn-resend-code2 {\r\n          position: absolute;\r\n          top: 11px;\r\n          right: 10px;\r\n          color: var(--bc-btn-bg-default-hover);\r\n          font-weight: 600;\r\n          font-size: 14px;\r\n          cursor: pointer;\r\n        }\r\n      }\r\n    }\r\n    .btn-action {\r\n      width: 100%;\r\n      height: 40px;\r\n      text-align: center;\r\n      line-height: 40px;\r\n      font-size: 16px;\r\n      font-weight: 400;\r\n      cursor: pointer;\r\n      border-radius: 6px;\r\n    }\r\n    .btn-submit {\r\n      color: var(--bc-color-white);\r\n      background: var(--bc-theme-primary-gradient);\r\n      &:hover {\r\n        border: none;\r\n        color: var(--bc-color-white);\r\n        background: var(--bc-theme-primary-gradient-hover) !important;\r\n      }\r\n    }\r\n  }\r\n  @media screen and (max-width: 768px) {\r\n    ::v-deep.popup-verification{\r\n      .el-dialog{\r\n        width: 335px !important;\r\n        &__header{\r\n          .title{\r\n            font-weight: 600;\r\n            font-size: 16px;\r\n            line-height: 24px;\r\n          }\r\n        }\r\n        &__body{\r\n          .popup-content{\r\n            .content{\r\n              .big-title{\r\n                font-weight: 600;\r\n                font-size: 20px;\r\n                line-height: 24px;\r\n              }\r\n              .el-form-item{\r\n                input{\r\n                  height: 48px;\r\n                  padding: 0 12px;\r\n                }\r\n              }\r\n              .input-phone1 ,\r\n              .input-phone2{\r\n                .btn-resend-code1,\r\n                .btn-resend-code2{\r\n                  color: #0151FC;\r\n                }\r\n              }\r\n              .btn-submit{\r\n                display: flex;\r\n                justify-content: center;\r\n                align-items: center;\r\n                font-size: 14px;\r\n                line-height: 20px;\r\n                font-weight: 600;\r\n              }\r\n            }\r\n\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n"]}]}